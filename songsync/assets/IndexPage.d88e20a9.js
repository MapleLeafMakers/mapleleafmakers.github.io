import{c as me,a as N,h as J,b as pe,H as Oe,I as di,J as Te,K as fi,r as ae,g as ge,L as vt,M as We,d as hi,P as vi,N as Ue,G as Dt,O as we,w as ve,j as mi,o as xe,R as Re,m as ft,S as yt,T as Se,u as pi,U as Bt,V as Wt,W as Vt,X as jt,Y as It,Z as qt,$ as zt,a0 as Nt,a1 as gi,a2 as Be,a3 as yi,a4 as bt,k as Ht,a5 as bi,a6 as Ft,a7 as wi,a8 as ki,a9 as Ci,aa as $t,n as Pi,ab as Ai,ac as nt,ad as rt,ae as Ut,y as Ei,af as Si,ag as at,ah as _i,ai as Ri,aj as xi,i as wt,e as Ae,l as Oi,f as Ti,ak as Mi,al as Li,_ as Di,z as Bi,am as st,B as Ee,C as qe,D as F,E as I,an as de,F as ie,Q as oe,ao as ot,ap as ce,aq as kt,ar as Ct,as as Pt,at as Wi,au as Vi,av as At,aw as ji,ax as Ii,ay as qi}from"./index.ae99a0f0.js";import{Q as zi,a as Ni}from"./QResizeObserver.dae41f58.js";var te=me({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const a=N(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>J("div",{class:a.value},pe(t.default))}}),fe=me({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const a=N(()=>parseInt(e.lines,10)),l=N(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(a.value===1?" ellipsis":"")),i=N(()=>e.lines!==void 0&&a.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":a.value}:null);return()=>J("div",{style:i.value,class:l.value},pe(t.default))}}),he=me({name:"QItem",props:{...Oe,...di,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:a}){const{proxy:{$q:l}}=ge(),i=Te(e,l),{hasLink:v,linkAttrs:u,linkClass:c,linkTag:y,navigateOnClick:h}=fi(),A=ae(null),S=ae(null),V=N(()=>e.clickable===!0||v.value===!0||e.tag==="label"),P=N(()=>e.disable!==!0&&V.value===!0),z=N(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(v.value===!0&&e.active===null?c.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(P.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),R=N(()=>{if(e.insetLevel===void 0)return null;const w=l.lang.rtl===!0?"Right":"Left";return{["padding"+w]:16+e.insetLevel*56+"px"}});function L(w){P.value===!0&&(S.value!==null&&(w.qKeyEvent!==!0&&document.activeElement===A.value?S.value.focus():document.activeElement===S.value&&A.value.focus()),h(w))}function x(w){if(P.value===!0&&vt(w,13)===!0){We(w),w.qKeyEvent=!0;const p=new MouseEvent("click",w);p.qKeyEvent=!0,A.value.dispatchEvent(p)}a("keyup",w)}function j(){const w=hi(t.default,[]);return P.value===!0&&w.unshift(J("div",{class:"q-focus-helper",tabindex:-1,ref:S})),w}return()=>{const w={ref:A,class:z.value,style:R.value,role:"listitem",onClick:L,onKeyup:x};return P.value===!0?(w.tabindex=e.tabindex||"0",Object.assign(w,u.value)):V.value===!0&&(w["aria-disabled"]="true"),J(y.value,w,j())}}}),ze=me({name:"QList",props:{...Oe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const a=ge(),l=Te(e,a.proxy.$q),i=N(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(l.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>J(e.tag,{class:i.value},pe(t.default))}});function Qe(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),vi.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Qt={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Kt({showing:e,avoidEmit:t,configureAnchorEl:a}){const{props:l,proxy:i,emit:v}=ge(),u=ae(null);let c=null;function y(P){return u.value===null?!1:P===void 0||P.touches===void 0||P.touches.length<=1}const h={};a===void 0&&(Object.assign(h,{hide(P){i.hide(P)},toggle(P){i.toggle(P),P.qAnchorHandled=!0},toggleKey(P){vt(P,13)===!0&&h.toggle(P)},contextClick(P){i.hide(P),Ue(P),Dt(()=>{i.show(P),P.qAnchorHandled=!0})},prevent:Ue,mobileTouch(P){if(h.mobileCleanup(P),y(P)!==!0)return;i.hide(P),u.value.classList.add("non-selectable");const z=P.target;we(h,"anchor",[[z,"touchmove","mobileCleanup","passive"],[z,"touchend","mobileCleanup","passive"],[z,"touchcancel","mobileCleanup","passive"],[u.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{c=null,i.show(P),P.qAnchorHandled=!0},300)},mobileCleanup(P){u.value.classList.remove("non-selectable"),c!==null&&(clearTimeout(c),c=null),e.value===!0&&P!==void 0&&Qe()}}),a=function(P=l.contextMenu){if(l.noParentEvent===!0||u.value===null)return;let z;P===!0?i.$q.platform.is.mobile===!0?z=[[u.value,"touchstart","mobileTouch","passive"]]:z=[[u.value,"mousedown","hide","passive"],[u.value,"contextmenu","contextClick","notPassive"]]:z=[[u.value,"click","toggle","passive"],[u.value,"keyup","toggleKey","passive"]],we(h,"anchor",z)});function A(){Re(h,"anchor")}function S(P){for(u.value=P;u.value.classList.contains("q-anchor--skip");)u.value=u.value.parentNode;a()}function V(){if(l.target===!1||l.target===""||i.$el.parentNode===null)u.value=null;else if(l.target===!0)S(i.$el.parentNode);else{let P=l.target;if(typeof l.target=="string")try{P=document.querySelector(l.target)}catch{P=void 0}P!=null?(u.value=P.$el||P,a()):(u.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return ve(()=>l.contextMenu,P=>{u.value!==null&&(A(),a(P))}),ve(()=>l.target,()=>{u.value!==null&&A(),V()}),ve(()=>l.noParentEvent,P=>{u.value!==null&&(P===!0?A():a())}),mi(()=>{V(),t!==!0&&l.modelValue===!0&&u.value===null&&v("update:modelValue",!1)}),xe(()=>{c!==null&&clearTimeout(c),A()}),{anchorEl:u,canShow:y,anchorEvents:h}}function Gt(e,t){const a=ae(null);let l;function i(c,y){const h=`${y!==void 0?"add":"remove"}EventListener`,A=y!==void 0?y:l;c!==window&&c[h]("scroll",A,ft.passive),window[h]("scroll",A,ft.passive),l=y}function v(){a.value!==null&&(i(a.value),a.value=null)}const u=ve(()=>e.noParentEvent,()=>{a.value!==null&&(v(),t())});return xe(u),{localScrollTarget:a,unconfigureScrollTarget:v,changeScrollEvent:i}}const{notPassiveCapture:Ke}=ft,Ce=[];function Ge(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let a=yt.length-1;for(;a>=0;){const l=yt[a].$;if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;a--}for(let l=Ce.length-1;l>=0;l--){const i=Ce[l];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Xt(e){Ce.push(e),Ce.length===1&&(document.addEventListener("mousedown",Ge,Ke),document.addEventListener("touchstart",Ge,Ke))}function Xe(e){const t=Ce.findIndex(a=>a===e);t>-1&&(Ce.splice(t,1),Ce.length===0&&(document.removeEventListener("mousedown",Ge,Ke),document.removeEventListener("touchstart",Ge,Ke)))}let Et,St;function Ye(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Yt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const ht={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{ht[`${e}#ltr`]=e,ht[`${e}#rtl`]=e});function Je(e,t){const a=e.split(" ");return{vertical:a[0],horizontal:ht[`${a[1]}#${t===!0?"rtl":"ltr"}`]}}function Hi(e,t){let{top:a,left:l,right:i,bottom:v,width:u,height:c}=e.getBoundingClientRect();return t!==void 0&&(a-=t[1],l-=t[0],v+=t[1],i+=t[0],u+=t[0],c+=t[1]),{top:a,bottom:v,height:c,left:l,right:i,width:u,middle:l+(i-l)/2,center:a+(v-a)/2}}function Fi(e,t,a){let{top:l,left:i}=e.getBoundingClientRect();return l+=t.top,i+=t.left,a!==void 0&&(l+=a[1],i+=a[0]),{top:l,bottom:l+1,height:1,left:i,right:i+1,width:1,middle:i,center:l}}function $i(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function _t(e,t,a){return{top:e[a.anchorOrigin.vertical]-t[a.selfOrigin.vertical],left:e[a.anchorOrigin.horizontal]-t[a.selfOrigin.horizontal]}}function Jt(e){if(Se.is.ios===!0&&window.visualViewport!==void 0){const c=document.body.style,{offsetLeft:y,offsetTop:h}=window.visualViewport;y!==Et&&(c.setProperty("--q-pe-left",y+"px"),Et=y),h!==St&&(c.setProperty("--q-pe-top",h+"px"),St=h)}const{scrollLeft:t,scrollTop:a}=e.el,l=e.absoluteOffset===void 0?Hi(e.anchorEl,e.cover===!0?[0,0]:e.offset):Fi(e.anchorEl,e.absoluteOffset,e.offset);let i={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(i.minWidth=l.width+"px",e.cover===!0&&(i.minHeight=l.height+"px")),Object.assign(e.el.style,i);const v=$i(e.el);let u=_t(l,v,e);if(e.absoluteOffset===void 0||e.offset===void 0)lt(u,l,v,e.anchorOrigin,e.selfOrigin);else{const{top:c,left:y}=u;lt(u,l,v,e.anchorOrigin,e.selfOrigin);let h=!1;if(u.top!==c){h=!0;const A=2*e.offset[1];l.center=l.top-=A,l.bottom-=A+2}if(u.left!==y){h=!0;const A=2*e.offset[0];l.middle=l.left-=A,l.right-=A+2}h===!0&&(u=_t(l,v,e),lt(u,l,v,e.anchorOrigin,e.selfOrigin))}i={top:u.top+"px",left:u.left+"px"},u.maxHeight!==void 0&&(i.maxHeight=u.maxHeight+"px",l.height>u.maxHeight&&(i.minHeight=i.maxHeight)),u.maxWidth!==void 0&&(i.maxWidth=u.maxWidth+"px",l.width>u.maxWidth&&(i.minWidth=i.maxWidth)),Object.assign(e.el.style,i),e.el.scrollTop!==a&&(e.el.scrollTop=a),e.el.scrollLeft!==t&&(e.el.scrollLeft=t)}function lt(e,t,a,l,i){const v=a.bottom,u=a.right,c=pi(),y=window.innerHeight-c,h=document.body.clientWidth;if(e.top<0||e.top+v>y)if(i.vertical==="center")e.top=t[l.vertical]>y/2?Math.max(0,y-v):0,e.maxHeight=Math.min(v,y);else if(t[l.vertical]>y/2){const A=Math.min(y,l.vertical==="center"?t.center:l.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(v,A),e.top=Math.max(0,A-v)}else e.top=Math.max(0,l.vertical==="center"?t.center:l.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(v,y-e.top);if(e.left<0||e.left+u>h)if(e.maxWidth=Math.min(u,h),i.horizontal==="middle")e.left=t[l.horizontal]>h/2?Math.max(0,h-u):0;else if(t[l.horizontal]>h/2){const A=Math.min(h,l.horizontal==="middle"?t.middle:l.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(u,A),e.left=Math.max(0,A-e.maxWidth)}else e.left=Math.max(0,l.horizontal==="middle"?t.middle:l.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(u,h-e.left)}var Ne=me({name:"QMenu",inheritAttrs:!1,props:{...Qt,...Bt,...Oe,...Wt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ye},self:{type:String,validator:Ye},offset:{type:Array,validator:Yt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Vt,"click","escapeKey"],setup(e,{slots:t,emit:a,attrs:l}){let i=null,v,u,c;const y=ge(),{proxy:h}=y,{$q:A}=h,S=ae(null),V=ae(!1),P=N(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),z=Te(e,A),{registerTick:R,removeTick:L}=jt(),{registerTimeout:x}=It(),{transitionProps:j,transitionStyle:w}=qt(e),{localScrollTarget:p,changeScrollEvent:m,unconfigureScrollTarget:C}=Gt(e,D),{anchorEl:O,canShow:W}=Kt({showing:V}),{hide:B}=zt({showing:V,canShow:W,handleShow:f,handleHide:n,hideOnRouteChange:P,processOnMount:!0}),{showPortal:T,hidePortal:_,renderPortal:M}=Nt(y,S,Q,"menu"),k={anchorEl:O,innerRef:S,onClickOutside(U){if(e.persistent!==!0&&V.value===!0)return B(U),(U.type==="touchstart"||U.target.classList.contains("q-dialog__backdrop"))&&We(U),!0}},o=N(()=>Je(e.anchor||(e.cover===!0?"center middle":"bottom start"),A.lang.rtl)),d=N(()=>e.cover===!0?o.value:Je(e.self||"top start",A.lang.rtl)),b=N(()=>(e.square===!0?" q-menu--square":"")+(z.value===!0?" q-menu--dark q-dark":"")),s=N(()=>e.autoClose===!0?{onClick:$}:{}),r=N(()=>V.value===!0&&e.persistent!==!0);ve(r,U=>{U===!0?(wi(K),Xt(k)):(bt(K),Xe(k))});function g(){ki(()=>{let U=S.value;U&&U.contains(document.activeElement)!==!0&&(U=U.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||U.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||U.querySelector("[autofocus], [data-autofocus]")||U,U.focus({preventScroll:!0}))})}function f(U){if(i=e.noRefocus===!1?document.activeElement:null,gi(H),T(),D(),v=void 0,U!==void 0&&(e.touchPosition||e.contextMenu)){const ne=Be(U);if(ne.left!==void 0){const{top:Y,left:le}=O.value.getBoundingClientRect();v={left:ne.left-le,top:ne.top-Y}}}u===void 0&&(u=ve(()=>A.screen.width+"|"+A.screen.height+"|"+e.self+"|"+e.anchor+"|"+A.lang.rtl,G)),e.noFocus!==!0&&document.activeElement.blur(),R(()=>{G(),e.noFocus!==!0&&g()}),x(()=>{A.platform.is.ios===!0&&(c=e.autoClose,S.value.click()),G(),T(!0),a("show",U)},e.transitionDuration)}function n(U){L(),_(),E(!0),i!==null&&(U===void 0||U.qClickOutside!==!0)&&(((U&&U.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),x(()=>{_(!0),a("hide",U)},e.transitionDuration)}function E(U){v=void 0,u!==void 0&&(u(),u=void 0),(U===!0||V.value===!0)&&(yi(H),C(),Xe(k),bt(K)),U!==!0&&(i=null)}function D(){(O.value!==null||e.scrollTarget!==void 0)&&(p.value=Ht(O.value,e.scrollTarget),m(p.value,G))}function $(U){c!==!0?(bi(h,U),a("click",U)):c=!1}function H(U){r.value===!0&&e.noFocus!==!0&&Ci(S.value,U.target)!==!0&&g()}function K(U){a("escapeKey"),B(U)}function G(){const U=S.value;U===null||O.value===null||Jt({el:U,offset:e.offset,anchorEl:O.value,anchorOrigin:o.value,selfOrigin:d.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Q(){return J(Ft,j.value,()=>V.value===!0?J("div",{role:"menu",...l,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+b.value,l.class],style:[l.style,w.value],...s.value},pe(t.default)):null)}return xe(E),Object.assign(h,{focus:g,updatePosition:G}),M}}),He=me({name:"QBar",props:{...Oe,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=ge(),l=Te(e,a),i=N(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${l.value===!0?"dark":"light"}`);return()=>J("div",{class:i.value,role:"toolbar"},pe(t.default))}});const mt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ui=Object.keys(mt);mt.all=!0;function Rt(e){const t={};for(const a of Ui)e[a]===!0&&(t[a]=!0);return Object.keys(t).length===0?mt:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function xt(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function ut(e,t,a){const l=Be(e);let i,v=l.left-t.event.x,u=l.top-t.event.y,c=Math.abs(v),y=Math.abs(u);const h=t.direction;h.horizontal===!0&&h.vertical!==!0?i=v<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?i=u<0?"up":"down":h.up===!0&&u<0?(i="up",c>y&&(h.left===!0&&v<0?i="left":h.right===!0&&v>0&&(i="right"))):h.down===!0&&u>0?(i="down",c>y&&(h.left===!0&&v<0?i="left":h.right===!0&&v>0&&(i="right"))):h.left===!0&&v<0?(i="left",c<y&&(h.up===!0&&u<0?i="up":h.down===!0&&u>0&&(i="down"))):h.right===!0&&v>0&&(i="right",c<y&&(h.up===!0&&u<0?i="up":h.down===!0&&u>0&&(i="down")));let A=!1;if(i===void 0&&a===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};i=t.event.lastDir,A=!0,i==="left"||i==="right"?(l.left-=v,c=0,v=0):(l.top-=u,y=0,u=0)}return{synthetic:A,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:l,direction:i,isFirst:t.event.isFirst,isFinal:a===!0,duration:Date.now()-t.event.time,distance:{x:c,y},offset:{x:v,y:u},delta:{x:l.left-t.event.lastX,y:l.top-t.event.lastY}}}}let Qi=0;var Zt=$t({name:"touch-pan",beforeMount(e,{value:t,modifiers:a}){if(a.mouse!==!0&&Se.has.touch!==!0)return;function l(v,u){a.mouse===!0&&u===!0?We(v):(a.stop===!0&&rt(v),a.prevent===!0&&Ue(v))}const i={uid:"qvtp_"+Qi++,handler:t,modifiers:a,direction:Rt(a),noop:Pi,mouseStart(v){xt(v,i)&&Ai(v)&&(we(i,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),i.start(v,!0))},touchStart(v){if(xt(v,i)){const u=v.target;we(i,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","passiveCapture"],[u,"touchend","end","passiveCapture"]]),i.start(v)}},start(v,u){if(Se.is.firefox===!0&&nt(e,!0),i.lastEvt=v,u===!0||a.stop===!0){if(i.direction.all!==!0&&(u!==!0||i.modifiers.mouseAllDir!==!0&&i.modifiers.mousealldir!==!0)){const h=v.type.indexOf("mouse")>-1?new MouseEvent(v.type,v):new TouchEvent(v.type,v);v.defaultPrevented===!0&&Ue(h),v.cancelBubble===!0&&rt(h),Object.assign(h,{qKeyEvent:v.qKeyEvent,qClickOutside:v.qClickOutside,qAnchorHandled:v.qAnchorHandled,qClonedBy:v.qClonedBy===void 0?[i.uid]:v.qClonedBy.concat(i.uid)}),i.initialEvent={target:v.target,event:h}}rt(v)}const{left:c,top:y}=Be(v);i.event={x:c,y,time:Date.now(),mouse:u===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:c,lastY:y}},move(v){if(i.event===void 0)return;const u=Be(v),c=u.left-i.event.x,y=u.top-i.event.y;if(c===0&&y===0)return;i.lastEvt=v;const h=i.event.mouse===!0,A=()=>{l(v,h);let P;a.preserveCursor!==!0&&a.preservecursor!==!0&&(P=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Qe(),i.styleCleanup=z=>{if(i.styleCleanup=void 0,P!==void 0&&(document.documentElement.style.cursor=P),document.body.classList.remove("non-selectable"),h===!0){const R=()=>{document.body.classList.remove("no-pointer-events--children")};z!==void 0?setTimeout(()=>{R(),z()},50):R()}else z!==void 0&&z()}};if(i.event.detected===!0){i.event.isFirst!==!0&&l(v,i.event.mouse);const{payload:P,synthetic:z}=ut(v,i,!1);P!==void 0&&(i.handler(P)===!1?i.end(v):(i.styleCleanup===void 0&&i.event.isFirst===!0&&A(),i.event.lastX=P.position.left,i.event.lastY=P.position.top,i.event.lastDir=z===!0?void 0:P.direction,i.event.isFirst=!1));return}if(i.direction.all===!0||h===!0&&(i.modifiers.mouseAllDir===!0||i.modifiers.mousealldir===!0)){A(),i.event.detected=!0,i.move(v);return}const S=Math.abs(c),V=Math.abs(y);S!==V&&(i.direction.horizontal===!0&&S>V||i.direction.vertical===!0&&S<V||i.direction.up===!0&&S<V&&y<0||i.direction.down===!0&&S<V&&y>0||i.direction.left===!0&&S>V&&c<0||i.direction.right===!0&&S>V&&c>0?(i.event.detected=!0,i.move(v)):i.end(v,!0))},end(v,u){if(i.event!==void 0){if(Re(i,"temp"),Se.is.firefox===!0&&nt(e,!1),u===!0)i.styleCleanup!==void 0&&i.styleCleanup(),i.event.detected!==!0&&i.initialEvent!==void 0&&i.initialEvent.target.dispatchEvent(i.initialEvent.event);else if(i.event.detected===!0){i.event.isFirst===!0&&i.handler(ut(v===void 0?i.lastEvt:v,i).payload);const{payload:c}=ut(v===void 0?i.lastEvt:v,i,!0),y=()=>{i.handler(c)};i.styleCleanup!==void 0?i.styleCleanup(y):y()}i.event=void 0,i.initialEvent=void 0,i.lastEvt=void 0}}};if(e.__qtouchpan=i,a.mouse===!0){const v=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";we(i,"main",[[e,"mousedown","mouseStart",`passive${v}`]])}Se.has.touch===!0&&we(i,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const a=e.__qtouchpan;a!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&a.end(),a.handler=t.value),a.direction=Rt(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),Re(t,"main"),Re(t,"temp"),Se.is.firefox===!0&&nt(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}}),Ki=me({name:"QSplitter",props:{...Oe,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:a}){const{proxy:{$q:l}}=ge(),i=Te(e,l),v=ae(null),u={before:ae(null),after:ae(null)},c=N(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(i.value===!0?" q-splitter--dark":"")),y=N(()=>e.horizontal===!0?"height":"width"),h=N(()=>e.reverse!==!0?"before":"after"),A=N(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function S(m){return(e.unit==="%"?m:Math.round(m))+e.unit}const V=N(()=>({[h.value]:{[y.value]:S(e.modelValue)}}));let P,z,R,L,x;function j(m){if(m.isFirst===!0){const O=v.value.getBoundingClientRect()[y.value];P=e.horizontal===!0?"up":"left",z=e.unit==="%"?100:O,R=Math.min(z,A.value[1],Math.max(A.value[0],e.modelValue)),L=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:l.lang.rtl===!0?-1:1)*(e.unit==="%"?O===0?0:100/O:1),v.value.classList.add("q-splitter--active");return}if(m.isFinal===!0){x!==e.modelValue&&a("update:modelValue",x),v.value.classList.remove("q-splitter--active");return}const C=R+L*(m.direction===P?-1:1)*m.distance[e.horizontal===!0?"y":"x"];x=Math.min(z,A.value[1],Math.max(A.value[0],C)),u[h.value].value.style[y.value]=S(x),e.emitImmediately===!0&&e.modelValue!==x&&a("update:modelValue",x)}const w=N(()=>[[Zt,j,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function p(m,C){m<C[0]?a("update:modelValue",C[0]):m>C[1]&&a("update:modelValue",C[1])}return ve(()=>e.modelValue,m=>{p(m,A.value)}),ve(()=>e.limits,()=>{Dt(()=>{p(e.modelValue,A.value)})}),()=>{const m=[J("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:V.value.before},pe(t.before)),J("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Ut("div",{class:"q-splitter__separator-area absolute-full"},pe(t.separator),"sep",e.disable!==!0,()=>w.value)]),J("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:V.value.after},pe(t.after))];return J("div",{class:c.value,ref:v},Ei(t.default,m))}}});const Gi=J("div",{class:"q-space"});var ct=me({name:"QSpace",setup(){return()=>Gi}});function _e(e,t,a){return a<=t?t:Math.min(a,Math.max(t,e))}const Ot="q-slider__marker-labels",Xi=e=>({value:e}),Yi=({marker:e})=>J("div",{key:e.value,style:e.style,class:e.classes},e.label),ei=[34,37,40,33,39,38],Ji={...Oe,..._i,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Zi=["pan","update:modelValue","change"];function en({updateValue:e,updatePosition:t,getDragging:a,formAttrs:l}){const{props:i,emit:v,slots:u,proxy:{$q:c}}=ge(),y=Te(i,c),h=Ri(l),A=ae(!1),S=ae(!1),V=ae(!1),P=ae(!1),z=N(()=>i.vertical===!0?"--v":"--h"),R=N(()=>"-"+(i.switchLabelSide===!0?"switched":"standard")),L=N(()=>i.vertical===!0?i.reverse===!0:i.reverse!==(c.lang.rtl===!0)),x=N(()=>isNaN(i.innerMin)===!0||i.innerMin<i.min?i.min:i.innerMin),j=N(()=>isNaN(i.innerMax)===!0||i.innerMax>i.max?i.max:i.innerMax),w=N(()=>i.disable!==!0&&i.readonly!==!0&&x.value<j.value),p=N(()=>(String(i.step).trim().split(".")[1]||"").length),m=N(()=>i.step===0?1:i.step),C=N(()=>w.value===!0?i.tabindex||0:-1),O=N(()=>i.max-i.min),W=N(()=>j.value-x.value),B=N(()=>Y(x.value)),T=N(()=>Y(j.value)),_=N(()=>i.vertical===!0?L.value===!0?"bottom":"top":L.value===!0?"right":"left"),M=N(()=>i.vertical===!0?"height":"width"),k=N(()=>i.vertical===!0?"width":"height"),o=N(()=>i.vertical===!0?"vertical":"horizontal"),d=N(()=>{const q={role:"slider","aria-valuemin":x.value,"aria-valuemax":j.value,"aria-orientation":o.value,"data-step":i.step};return i.disable===!0?q["aria-disabled"]="true":i.readonly===!0&&(q["aria-readonly"]="true"),q}),b=N(()=>`q-slider q-slider${z.value} q-slider--${A.value===!0?"":"in"}active inline no-wrap `+(i.vertical===!0?"row":"column")+(i.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(V.value==="both"?" q-slider--focus":"")+(i.label||i.labelAlways===!0?" q-slider--label":"")+(i.labelAlways===!0?" q-slider--label-always":"")+(y.value===!0?" q-slider--dark":"")+(i.dense===!0?" q-slider--dense q-slider--dense"+z.value:""));function s(q){const X="q-slider__"+q;return`${X} ${X}${z.value} ${X}${z.value}${R.value}`}function r(q){const X="q-slider__"+q;return`${X} ${X}${z.value}`}const g=N(()=>{const q=i.selectionColor||i.color;return"q-slider__selection absolute"+(q!==void 0?` text-${q}`:"")}),f=N(()=>r("markers")+" absolute overflow-hidden"),n=N(()=>r("track-container")),E=N(()=>s("pin")),D=N(()=>s("label")),$=N(()=>s("text-container")),H=N(()=>s("marker-labels-container")+(i.markerLabelsClass!==void 0?` ${i.markerLabelsClass}`:"")),K=N(()=>"q-slider__track relative-position no-outline"+(i.trackColor!==void 0?` bg-${i.trackColor}`:"")),G=N(()=>{const q={[k.value]:i.trackSize};return i.trackImg!==void 0&&(q.backgroundImage=`url(${i.trackImg}) !important`),q}),Q=N(()=>"q-slider__inner absolute"+(i.innerTrackColor!==void 0?` bg-${i.innerTrackColor}`:"")),U=N(()=>{const q={[_.value]:`${100*B.value}%`,[M.value]:`${100*(T.value-B.value)}%`};return i.innerTrackImg!==void 0&&(q.backgroundImage=`url(${i.innerTrackImg}) !important`),q});function ne(q){const{min:X,max:Z,step:ee}=i;let se=X+q*(Z-X);if(ee>0){const be=(se-X)%ee;se+=(Math.abs(be)>=ee/2?(be<0?-1:1)*ee:0)-be}return p.value>0&&(se=parseFloat(se.toFixed(p.value))),_e(se,x.value,j.value)}function Y(q){return O.value===0?0:(q-i.min)/O.value}function le(q,X){const Z=Be(q),ee=i.vertical===!0?_e((Z.top-X.top)/X.height,0,1):_e((Z.left-X.left)/X.width,0,1);return _e(L.value===!0?1-ee:ee,B.value,T.value)}const re=N(()=>Si(i.markers)===!0?i.markers:m.value),ue=N(()=>{const q=[],X=re.value,Z=i.max;let ee=i.min;do q.push(ee),ee+=X;while(ee<Z);return q.push(Z),q}),Ve=N(()=>{const q=` ${Ot}${z.value}-`;return Ot+`${q}${i.switchMarkerLabelsSide===!0?"switched":"standard"}${q}${L.value===!0?"rtl":"ltr"}`}),Me=N(()=>i.markerLabels===!1?null:De(i.markerLabels).map((q,X)=>({index:X,value:q.value,label:q.label||q.value,classes:Ve.value+(q.classes!==void 0?" "+q.classes:""),style:{...je(q.value),...q.style||{}}}))),ye=N(()=>({markerList:Me.value,markerMap:Ie.value,classes:Ve.value,getStyle:je})),Le=N(()=>{if(W.value!==0){const q=100*re.value/W.value;return{...U.value,backgroundSize:i.vertical===!0?`2px ${q}%`:`${q}% 2px`}}return null});function De(q){if(q===!1)return null;if(q===!0)return ue.value.map(Xi);if(typeof q=="function")return ue.value.map(Z=>{const ee=q(Z);return at(ee)===!0?{...ee,value:Z}:{value:Z,label:ee}});const X=({value:Z})=>Z>=i.min&&Z<=i.max;return Array.isArray(q)===!0?q.map(Z=>at(Z)===!0?Z:{value:Z}).filter(X):Object.keys(q).map(Z=>{const ee=q[Z],se=Number(Z);return at(ee)===!0?{...ee,value:se}:{value:se,label:ee}}).filter(X)}function je(q){return{[_.value]:`${100*(q-i.min)/O.value}%`}}const Ie=N(()=>{if(i.markerLabels===!1)return null;const q={};return Me.value.forEach(X=>{q[X.value]=X}),q});function Pe(){if(u["marker-label-group"]!==void 0)return u["marker-label-group"](ye.value);const q=u["marker-label"]||Yi;return Me.value.map(X=>q({marker:X,...ye.value}))}const ni=N(()=>[[Zt,ri,void 0,{[o.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ri(q){q.isFinal===!0?(P.value!==void 0&&(t(q.evt),q.touch===!0&&e(!0),P.value=void 0,v("pan","end")),A.value=!1,V.value=!1):q.isFirst===!0?(P.value=a(q.evt),t(q.evt),e(),A.value=!0,v("pan","start")):(t(q.evt),e())}function gt(){V.value=!1}function ai(q){t(q,a(q)),e(),S.value=!0,A.value=!0,document.addEventListener("mouseup",et,!0)}function et(){S.value=!1,A.value=!1,e(!0),gt(),document.removeEventListener("mouseup",et,!0)}function si(q){t(q,a(q)),e(!0)}function oi(q){ei.includes(q.keyCode)&&e(!0)}function li(q){if(i.vertical===!0)return null;const X=c.lang.rtl!==i.reverse?1-q:q;return{transform:`translateX(calc(${2*X-1} * ${i.thumbSize} / 2 + ${50-100*X}%))`}}function ui(q){const X=N(()=>S.value===!1&&(V.value===q.focusValue||V.value==="both")?" q-slider--focus":""),Z=N(()=>`q-slider__thumb q-slider__thumb${z.value} q-slider__thumb${z.value}-${L.value===!0?"rtl":"ltr"} absolute non-selectable`+X.value+(q.thumbColor.value!==void 0?` text-${q.thumbColor.value}`:"")),ee=N(()=>({width:i.thumbSize,height:i.thumbSize,[_.value]:`${100*q.ratio.value}%`,zIndex:V.value===q.focusValue?2:void 0})),se=N(()=>q.labelColor.value!==void 0?` text-${q.labelColor.value}`:""),be=N(()=>li(q.ratio.value)),tt=N(()=>"q-slider__text"+(q.labelTextColor.value!==void 0?` text-${q.labelTextColor.value}`:""));return()=>{const it=[J("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[J("path",{d:i.thumbPath})]),J("div",{class:"q-slider__focus-ring fit"})];return(i.label===!0||i.labelAlways===!0)&&(it.push(J("div",{class:E.value+" absolute fit no-pointer-events"+se.value},[J("div",{class:D.value,style:{minWidth:i.thumbSize}},[J("div",{class:$.value,style:be.value},[J("span",{class:tt.value},q.label.value)])])])),i.name!==void 0&&i.disable!==!0&&h(it,"push")),J("div",{class:Z.value,style:ee.value,...q.getNodeData()},it)}}function ci(q,X,Z,ee){const se=[];i.innerTrackColor!=="transparent"&&se.push(J("div",{key:"inner",class:Q.value,style:U.value})),i.selectionColor!=="transparent"&&se.push(J("div",{key:"selection",class:g.value,style:q.value})),i.markers!==!1&&se.push(J("div",{key:"marker",class:f.value,style:Le.value})),ee(se);const be=[Ut("div",{key:"trackC",class:n.value,tabindex:X.value,...Z.value},[J("div",{class:K.value,style:G.value},se)],"slide",w.value,()=>ni.value)];if(i.markerLabels!==!1){const tt=i.switchMarkerLabelsSide===!0?"unshift":"push";be[tt](J("div",{key:"markerL",class:H.value},Pe()))}return be}return xe(()=>{document.removeEventListener("mouseup",et,!0)}),{state:{active:A,focus:V,preventFocus:S,dragging:P,editable:w,classes:b,tabindex:C,attributes:d,step:m,decimals:p,trackLen:O,innerMin:x,innerMinRatio:B,innerMax:j,innerMaxRatio:T,positionProp:_,sizeProp:M,isReversed:L},methods:{onActivate:ai,onMobileClick:si,onBlur:gt,onKeyup:oi,getContent:ci,getThumbRenderFn:ui,convertRatioToModel:ne,convertModelToRatio:Y,getDraggingRatio:le}}}const tn=()=>({});var Tt=me({name:"QSlider",props:{...Ji,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Zi,setup(e,{emit:t}){const{proxy:{$q:a}}=ge(),{state:l,methods:i}=en({updateValue:z,updatePosition:L,getDragging:R,formAttrs:xi(e)}),v=ae(null),u=ae(0),c=ae(0);function y(){c.value=e.modelValue===null?l.innerMin.value:_e(e.modelValue,l.innerMin.value,l.innerMax.value)}ve(()=>`${e.modelValue}|${l.innerMin.value}|${l.innerMax.value}`,y),y();const h=N(()=>i.convertModelToRatio(c.value)),A=N(()=>l.active.value===!0?u.value:h.value),S=N(()=>{const w={[l.positionProp.value]:`${100*l.innerMinRatio.value}%`,[l.sizeProp.value]:`${100*(A.value-l.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(w.backgroundImage=`url(${e.selectionImg}) !important`),w}),V=i.getThumbRenderFn({focusValue:!0,getNodeData:tn,ratio:A,label:N(()=>e.labelValue!==void 0?e.labelValue:c.value),thumbColor:N(()=>e.thumbColor||e.color),labelColor:N(()=>e.labelColor),labelTextColor:N(()=>e.labelTextColor)}),P=N(()=>l.editable.value!==!0?{}:a.platform.is.mobile===!0?{onClick:i.onMobileClick}:{onMousedown:i.onActivate,onFocus:x,onBlur:i.onBlur,onKeydown:j,onKeyup:i.onKeyup});function z(w){c.value!==e.modelValue&&t("update:modelValue",c.value),w===!0&&t("change",c.value)}function R(){return v.value.getBoundingClientRect()}function L(w,p=l.dragging.value){const m=i.getDraggingRatio(w,p);c.value=i.convertRatioToModel(m),u.value=e.snap!==!0||e.step===0?m:i.convertModelToRatio(c.value)}function x(){l.focus.value=!0}function j(w){if(!ei.includes(w.keyCode))return;We(w);const p=([34,33].includes(w.keyCode)?10:1)*l.step.value,m=([34,37,40].includes(w.keyCode)?-1:1)*(l.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*p;c.value=_e(parseFloat((c.value+m).toFixed(l.decimals.value)),l.innerMin.value,l.innerMax.value),z()}return()=>{const w=i.getContent(S,l.tabindex,P,p=>{p.push(V())});return J("div",{ref:v,class:l.classes.value+(e.modelValue===null?" q-slider--no-value":""),...l.attributes.value,"aria-valuenow":e.modelValue},w)}}}),dt=me({name:"QTooltip",inheritAttrs:!1,props:{...Qt,...Bt,...Wt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ye},self:{type:String,default:"top middle",validator:Ye},offset:{type:Array,default:()=>[14,14],validator:Yt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Vt],setup(e,{slots:t,emit:a,attrs:l}){let i,v;const u=ge(),{proxy:{$q:c}}=u,y=ae(null),h=ae(!1),A=N(()=>Je(e.anchor,c.lang.rtl)),S=N(()=>Je(e.self,c.lang.rtl)),V=N(()=>e.persistent!==!0),{registerTick:P,removeTick:z}=jt(),{registerTimeout:R}=It(),{transitionProps:L,transitionStyle:x}=qt(e),{localScrollTarget:j,changeScrollEvent:w,unconfigureScrollTarget:p}=Gt(e,f),{anchorEl:m,canShow:C,anchorEvents:O}=Kt({showing:h,configureAnchorEl:g}),{show:W,hide:B}=zt({showing:h,canShow:C,handleShow:k,handleHide:o,hideOnRouteChange:V,processOnMount:!0});Object.assign(O,{delayShow:s,delayHide:r});const{showPortal:T,hidePortal:_,renderPortal:M}=Nt(u,y,E,"tooltip");if(c.platform.is.mobile===!0){const D={anchorEl:m,innerRef:y,onClickOutside(H){return B(H),H.target.classList.contains("q-dialog__backdrop")&&We(H),!0}},$=N(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);ve($,H=>{(H===!0?Xt:Xe)(D)}),xe(()=>{Xe(D)})}function k(D){T(),P(()=>{v=new MutationObserver(()=>b()),v.observe(y.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),b(),f()}),i===void 0&&(i=ve(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,b)),R(()=>{T(!0),a("show",D)},e.transitionDuration)}function o(D){z(),_(),d(),R(()=>{_(!0),a("hide",D)},e.transitionDuration)}function d(){v!==void 0&&(v.disconnect(),v=void 0),i!==void 0&&(i(),i=void 0),p(),Re(O,"tooltipTemp")}function b(){const D=y.value;m.value===null||!D||Jt({el:D,offset:e.offset,anchorEl:m.value,anchorOrigin:A.value,selfOrigin:S.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function s(D){if(c.platform.is.mobile===!0){Qe(),document.body.classList.add("non-selectable");const $=m.value,H=["touchmove","touchcancel","touchend","click"].map(K=>[$,K,"delayHide","passiveCapture"]);we(O,"tooltipTemp",H)}R(()=>{W(D)},e.delay)}function r(D){c.platform.is.mobile===!0&&(Re(O,"tooltipTemp"),Qe(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),R(()=>{B(D)},e.hideDelay)}function g(){if(e.noParentEvent===!0||m.value===null)return;const D=c.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];we(O,"anchor",D)}function f(){if(m.value!==null||e.scrollTarget!==void 0){j.value=Ht(m.value,e.scrollTarget);const D=e.noParentEvent===!0?b:B;w(j.value,D)}}function n(){return h.value===!0?J("div",{...l,ref:y,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,x.value],role:"tooltip"},pe(t.default)):null}function E(){return J(Ft,L.value,n)}return xe(d),Object.assign(u.proxy,{updatePosition:b}),M}}),nn=me({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:a}}=ge(),l=wt(Oi,Ae);if(l===Ae)return console.error("QPage needs to be a deep child of QLayout"),Ae;if(wt(Ti,Ae)===Ae)return console.error("QPage needs to be child of QPageContainer"),Ae;const v=N(()=>{const c=(l.header.space===!0?l.header.size:0)+(l.footer.space===!0?l.footer.size:0);if(typeof e.styleFn=="function"){const y=l.isContainer.value===!0?l.containerHeight.value:a.screen.height;return e.styleFn(c,y)}return{minHeight:l.isContainer.value===!0?l.containerHeight.value-c+"px":a.screen.height===0?c!==0?`calc(100vh - ${c}px)`:"100vh":a.screen.height-c+"px"}}),u=N(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>J("main",{class:u.value,style:v.value},pe(t.default))}});function Mt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var rn=$t({name:"close-popup",beforeMount(e,{value:t}){const a={depth:Mt(t),handler(l){a.depth!==0&&setTimeout(()=>{const i=Mi(e);i!==void 0&&Li(i,l,a.depth)})},handlerKey(l){vt(l,13)===!0&&a.handler(l)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:t,oldValue:a}){t!==a&&(e.__qclosepopup.depth=Mt(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const an=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function Ze({r:e,g:t,b:a,a:l}){const i=l!==void 0;if(e=Math.round(e),t=Math.round(t),a=Math.round(a),e>255||t>255||a>255||i&&l>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return l=i?(Math.round(255*l/100)|1<<8).toString(16).slice(1):"","#"+(a|t<<8|e<<16|1<<24).toString(16).slice(1)+l}function ti(e){if(typeof e!="string")throw new TypeError("Expected a string");e=e.replace(/^#/,""),e.length===3?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e.length===4&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((t&255)/2.55)}:{r:t>>16,g:t>>8&255,b:t&255}}function sn({h:e,s:t,v:a,a:l}){let i,v,u;t=t/100,a=a/100,e=e/360;const c=Math.floor(e*6),y=e*6-c,h=a*(1-t),A=a*(1-y*t),S=a*(1-(1-y)*t);switch(c%6){case 0:i=a,v=S,u=h;break;case 1:i=A,v=a,u=h;break;case 2:i=h,v=a,u=S;break;case 3:i=h,v=A,u=a;break;case 4:i=S,v=h,u=a;break;case 5:i=a,v=h,u=A;break}return{r:Math.round(i*255),g:Math.round(v*255),b:Math.round(u*255),a:l}}function on({r:e,g:t,b:a,a:l}){const i=Math.max(e,t,a),v=Math.min(e,t,a),u=i-v,c=i===0?0:u/i,y=i/255;let h;switch(i){case v:h=0;break;case e:h=t-a+u*(t<a?6:0),h/=6*u;break;case t:h=a-e+u*2,h/=6*u;break;case a:h=e-t+u*4,h/=6*u;break}return{h:Math.round(h*360),s:Math.round(c*100),v:Math.round(y*100),a:l}}function ke(e){if(typeof e!="string")throw new TypeError("Expected a string");const t=e.replace(/ /g,""),a=an.exec(t);if(a===null)return ti(t);const l={r:Math.min(255,parseInt(a[2],10)),g:Math.min(255,parseInt(a[3],10)),b:Math.min(255,parseInt(a[4],10))};if(a[1]){const i=parseFloat(a[5]);l.a=Math.min(1,isNaN(i)===!0?1:i)*100}return l}function ln(e,t){if(typeof e!="string")throw new TypeError("Expected a string as color");if(typeof t!="number")throw new TypeError("Expected a numeric percent");const a=ke(e),l=t<0?0:255,i=Math.abs(t)/100,v=a.r,u=a.g,c=a.b;return"#"+(16777216+(Math.round((l-v)*i)+v)*65536+(Math.round((l-u)*i)+u)*256+(Math.round((l-c)*i)+c)).toString(16).slice(1)}function un(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?ke(e):e,a=t.r/255,l=t.g/255,i=t.b/255,v=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),u=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4),c=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4);return .2126*v+.7152*u+.0722*c}function cn(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?ke(e):e;return(t.r*299+t.g*587+t.b*114)/1e3}function dn(e,t){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as fgColor");if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as bgColor");const a=typeof e=="string"?ke(e):e,l=a.r/255,i=a.g/255,v=a.b/255,u=a.a!==void 0?a.a/100:1,c=typeof t=="string"?ke(t):t,y=c.r/255,h=c.g/255,A=c.b/255,S=c.a!==void 0?c.a/100:1,V=u+S*(1-u),P=Math.round((l*u+y*S*(1-u))/V*255),z=Math.round((i*u+h*S*(1-u))/V*255),R=Math.round((v*u+A*S*(1-u))/V*255),L={r:P,g:z,b:R,a:Math.round(V*100)};return typeof e=="string"?Ze(L):L}function fn(e,t){if(typeof e!="string")throw new TypeError("Expected a string as color");if(t===void 0||t<-1||t>1)throw new TypeError("Expected offset to be between -1 and 1");const{r:a,g:l,b:i,a:v}=ke(e),u=v!==void 0?v/100:0;return Ze({r:a,g:l,b:i,a:Math.round(Math.min(1,Math.max(0,u+t))*100)})}function hn(e){if(typeof e!="string")throw new TypeError("Expected a string as color");const t=document.createElement("div");t.className=`text-${e} invisible fixed no-pointer-events`,document.body.appendChild(t);const a=getComputedStyle(t).getPropertyValue("color");return t.remove(),Ze(ke(a))}var Fe={rgbToHex:Ze,hexToRgb:ti,hsvToRgb:sn,rgbToHsv:on,textToRgb:ke,lighten:ln,luminosity:un,brightness:cn,blend:dn,changeAlpha:fn,getPaletteColor:hn};function vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ii={exports:{}};/*!
 * wavesurfer.js 6.5.2 (2023-03-12)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(e,t){(function(l,i){e.exports=i()})(self,()=>(()=>{var a={"./src/drawer.canvasentry.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var h=S(y("./src/util/style.js")),A=S(y("./src/util/get-id.js"));function S(w){return w&&w.__esModule?w:{default:w}}function V(w){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},V(w)}function P(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function z(w,p){for(var m=0;m<p.length;m++){var C=p[m];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,L(C.key),C)}}function R(w,p,m){return p&&z(w.prototype,p),m&&z(w,m),Object.defineProperty(w,"prototype",{writable:!1}),w}function L(w){var p=x(w,"string");return V(p)==="symbol"?p:String(p)}function x(w,p){if(V(w)!=="object"||w===null)return w;var m=w[Symbol.toPrimitive];if(m!==void 0){var C=m.call(w,p||"default");if(V(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(w)}var j=function(){function w(){P(this,w),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,A.default)(typeof this.constructor.name!="undefined"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return R(w,[{key:"initWave",value:function(m){this.wave=m,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(m){this.progress=m,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(m,C,O,W){this.start=this.wave.offsetLeft/C||0,this.end=this.start+m/C,this.wave.width=O,this.wave.height=W;var B={width:m+"px"};(0,h.default)(this.wave,B),this.hasProgressCanvas&&(this.progress.width=O,this.progress.height=W,(0,h.default)(this.progress,B))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(m,C){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,m),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,C))}},{key:"getFillStyle",value:function(m,C){if(typeof C=="string"||C instanceof CanvasGradient)return C;var O=m.createLinearGradient(0,0,0,m.canvas.height);return C.forEach(function(W,B){return O.addColorStop(B/C.length,W)}),O}},{key:"applyCanvasTransforms",value:function(m){m&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(m,C,O,W,B){this.fillRectToContext(this.waveCtx,m,C,O,W,B),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,m,C,O,W,B)}},{key:"fillRectToContext",value:function(m,C,O,W,B,T){!m||(T?this.drawRoundedRect(m,C,O,W,B,T):m.fillRect(C,O,W,B))}},{key:"drawRoundedRect",value:function(m,C,O,W,B,T){B!==0&&(B<0&&(B*=-1,O-=B),m.beginPath(),m.moveTo(C+T,O),m.lineTo(C+W-T,O),m.quadraticCurveTo(C+W,O,C+W,O+T),m.lineTo(C+W,O+B-T),m.quadraticCurveTo(C+W,O+B,C+W-T,O+B),m.lineTo(C+T,O+B),m.quadraticCurveTo(C,O+B,C,O+B-T),m.lineTo(C,O+T),m.quadraticCurveTo(C,O,C+T,O),m.closePath(),m.fill())}},{key:"drawLines",value:function(m,C,O,W,B,T){this.drawLineToContext(this.waveCtx,m,C,O,W,B,T),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,m,C,O,W,B,T)}},{key:"drawLineToContext",value:function(m,C,O,W,B,T,_){if(!!m){var M=C.length/2,k=Math.round(M*this.start),o=Math.round(M*this.end)+1,d=k,b=o,s=this.wave.width/(b-d-1),r=W+B,g=O/W;m.beginPath(),m.moveTo((d-k)*s,r),m.lineTo((d-k)*s,r-Math.round((C[2*d]||0)/g));var f,n,E;for(f=d;f<b;f++)n=C[2*f]||0,E=Math.round(n/g),m.lineTo((f-k)*s+this.halfPixel,r-E);var D=b-1;for(D;D>=d;D--)n=C[2*D+1]||0,E=Math.round(n/g),m.lineTo((D-k)*s+this.halfPixel,r-E);m.lineTo((d-k)*s,r-Math.round((C[2*d+1]||0)/g)),m.closePath(),m.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(m,C,O){var W=this;if(O==="blob")return new Promise(function(B){W.wave.toBlob(B,m,C)});if(O==="dataURL")return this.wave.toDataURL(m,C)}}]),w}();c.default=j,u.exports=c.default},"./src/drawer.js":(u,c,y)=>{function h(T){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(T)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var A=V(y("./src/util/index.js"));function S(T){if(typeof WeakMap!="function")return null;var _=new WeakMap,M=new WeakMap;return(S=function(o){return o?M:_})(T)}function V(T,_){if(!_&&T&&T.__esModule)return T;if(T===null||h(T)!=="object"&&typeof T!="function")return{default:T};var M=S(_);if(M&&M.has(T))return M.get(T);var k={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in T)if(d!=="default"&&Object.prototype.hasOwnProperty.call(T,d)){var b=o?Object.getOwnPropertyDescriptor(T,d):null;b&&(b.get||b.set)?Object.defineProperty(k,d,b):k[d]=T[d]}return k.default=T,M&&M.set(T,k),k}function P(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function z(T,_){for(var M=0;M<_.length;M++){var k=_[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,L(k.key),k)}}function R(T,_,M){return _&&z(T.prototype,_),M&&z(T,M),Object.defineProperty(T,"prototype",{writable:!1}),T}function L(T){var _=x(T,"string");return h(_)==="symbol"?_:String(_)}function x(T,_){if(h(T)!=="object"||T===null)return T;var M=T[Symbol.toPrimitive];if(M!==void 0){var k=M.call(T,_||"default");if(h(k)!=="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(T)}function j(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),_&&w(T,_)}function w(T,_){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,o){return k.__proto__=o,k},w(T,_)}function p(T){var _=O();return function(){var k=W(T),o;if(_){var d=W(this).constructor;o=Reflect.construct(k,arguments,d)}else o=k.apply(this,arguments);return m(this,o)}}function m(T,_){if(_&&(h(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(T)}function C(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W(T){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},W(T)}var B=function(T){j(M,T);var _=p(M);function M(k,o){var d;return P(this,M),d=_.call(this),d.container=A.withOrientation(k,o.vertical),d.params=o,d.width=0,d.height=o.height*d.params.pixelRatio,d.lastPos=0,d.wrapper=null,d}return R(M,[{key:"style",value:function(o,d){return A.style(o,d)}},{key:"createWrapper",value:function(){this.wrapper=A.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(o,d){!d&&o.preventDefault();var b=A.withOrientation(o.targetTouches?o.targetTouches[0]:o,this.params.vertical).clientX,s=this.wrapper.getBoundingClientRect(),r=this.width,g=this.getWidth(),f=this.getProgressPixels(s,b),n;return!this.params.fillParent&&r<g?n=f*(this.params.pixelRatio/r)||0:n=(f+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,A.clamp(n,0,1)}},{key:"getProgressPixels",value:function(o,d){return this.params.rtl?o.right-d:d-o.left}},{key:"setupWrapperEvents",value:function(){var o=this;this.wrapper.addEventListener("click",function(d){var b=A.withOrientation(d,o.params.vertical),s=o.wrapper.offsetHeight-o.wrapper.clientHeight;if(s!==0){var r=o.wrapper.getBoundingClientRect();if(b.clientY>=r.bottom-s)return}o.params.interact&&o.fireEvent("click",d,o.handleEvent(d))}),this.wrapper.addEventListener("dblclick",function(d){o.params.interact&&o.fireEvent("dblclick",d,o.handleEvent(d))}),this.wrapper.addEventListener("scroll",function(d){return o.fireEvent("scroll",d)})}},{key:"drawPeaks",value:function(o,d,b,s){this.setWidth(d)||this.clearWave(),this.params.barWidth?this.drawBars(o,0,b,s):this.drawWave(o,0,b,s)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(o){var d=this.wrapper.scrollWidth*o;this.recenterOnPosition(d,!0)}},{key:"recenterOnPosition",value:function(o,d){var b=this.wrapper.scrollLeft,s=~~(this.wrapper.clientWidth/2),r=this.wrapper.scrollWidth-this.wrapper.clientWidth,g=o-s,f=g-b;if(r!=0){if(!d&&-s<=f&&f<s){var n=this.params.autoCenterRate;n/=s,n*=r,f=Math.max(-n,Math.min(n,f)),g=b+f}g=Math.max(0,Math.min(r,g)),g!=b&&(this.wrapper.scrollLeft=g)}}},{key:"getScrollX",value:function(){var o=0;if(this.wrapper){var d=this.params.pixelRatio;if(o=Math.round(this.wrapper.scrollLeft*d),this.params.scrollParent){var b=~~(this.wrapper.scrollWidth*d-this.getWidth());o=Math.min(b,Math.max(0,o))}}return o}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(o){if(this.width==o)return!1;if(this.width=o,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var d=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:d})}return this.updateSize(),!0}},{key:"setHeight",value:function(o){return o==this.height?!1:(this.height=o,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(o){var d=1/this.params.pixelRatio,b=Math.round(o*this.width)*d;if(b<this.lastPos||b-this.lastPos>=d){if(this.lastPos=b,this.params.scrollParent&&this.params.autoCenter){var s=~~(this.wrapper.scrollWidth*o);this.recenterOnPosition(s,this.params.autoCenterImmediately)}this.updateProgress(b)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(o,d,b,s){}},{key:"drawWave",value:function(o,d,b,s){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(o){}}]),M}(A.Observer);c.default=B,u.exports=c.default},"./src/drawer.multicanvas.js":(u,c,y)=>{function h(k){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h(k)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var A=R(y("./src/drawer.js")),S=z(y("./src/util/index.js")),V=R(y("./src/drawer.canvasentry.js"));function P(k){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(P=function(s){return s?d:o})(k)}function z(k,o){if(!o&&k&&k.__esModule)return k;if(k===null||h(k)!=="object"&&typeof k!="function")return{default:k};var d=P(o);if(d&&d.has(k))return d.get(k);var b={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in k)if(r!=="default"&&Object.prototype.hasOwnProperty.call(k,r)){var g=s?Object.getOwnPropertyDescriptor(k,r):null;g&&(g.get||g.set)?Object.defineProperty(b,r,g):b[r]=k[r]}return b.default=k,d&&d.set(k,b),b}function R(k){return k&&k.__esModule?k:{default:k}}function L(k,o){if(!(k instanceof o))throw new TypeError("Cannot call a class as a function")}function x(k,o){for(var d=0;d<o.length;d++){var b=o[d];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(k,w(b.key),b)}}function j(k,o,d){return o&&x(k.prototype,o),d&&x(k,d),Object.defineProperty(k,"prototype",{writable:!1}),k}function w(k){var o=p(k,"string");return h(o)==="symbol"?o:String(o)}function p(k,o){if(h(k)!=="object"||k===null)return k;var d=k[Symbol.toPrimitive];if(d!==void 0){var b=d.call(k,o||"default");if(h(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(k)}function m(k,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(o&&o.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),o&&C(k,o)}function C(k,o){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,s){return b.__proto__=s,b},C(k,o)}function O(k){var o=T();return function(){var b=_(k),s;if(o){var r=_(this).constructor;s=Reflect.construct(b,arguments,r)}else s=b.apply(this,arguments);return W(this,s)}}function W(k,o){if(o&&(h(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(k)}function B(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(k){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},_(k)}var M=function(k){m(d,k);var o=O(d);function d(b,s){var r;return L(this,d),r=o.call(this,b,s),r.maxCanvasWidth=s.maxCanvasWidth,r.maxCanvasElementWidth=Math.round(s.maxCanvasWidth/s.pixelRatio),r.hasProgressCanvas=s.waveColor!=s.progressColor,r.halfPixel=.5/s.pixelRatio,r.canvases=[],r.progressWave=null,r.EntryClass=V.default,r.canvasContextAttributes=s.drawingContextAttributes,r.overlap=2*Math.ceil(s.pixelRatio/2),r.barRadius=s.barRadius||0,r.vertical=s.vertical,r}return j(d,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=S.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var s=this,r=Math.round(this.width/this.params.pixelRatio),g=Math.ceil(r/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<g;)this.addCanvas();for(;this.canvases.length>g;)this.removeCanvas();var f=this.maxCanvasWidth+this.overlap,n=this.canvases.length-1;this.canvases.forEach(function(E,D){D==n&&(f=s.width-s.maxCanvasWidth*n),s.updateDimensions(E,f,s.height),E.clearWave()})}},{key:"addCanvas",value:function(){var s=new this.EntryClass;s.canvasContextAttributes=this.canvasContextAttributes,s.hasProgressCanvas=this.hasProgressCanvas,s.halfPixel=this.halfPixel;var r=this.maxCanvasElementWidth*this.canvases.length,g=S.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(g,{position:"absolute",zIndex:2,left:r+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),s.initWave(g),this.hasProgressCanvas){var f=S.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(f,{position:"absolute",left:r+"px",top:0,bottom:0,height:"100%"}),s.initProgress(f)}this.canvases.push(s)}},{key:"removeCanvas",value:function(){var s=this.canvases[this.canvases.length-1];s.wave.parentElement.removeChild(s.wave.domElement),this.hasProgressCanvas&&s.progress.parentElement.removeChild(s.progress.domElement),s&&(s.destroy(),s=null),this.canvases.pop()}},{key:"updateDimensions",value:function(s,r,g){var f=Math.round(r/this.params.pixelRatio),n=Math.round(this.width/this.params.pixelRatio);s.updateDimensions(f,n,r,g),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var s=this;S.frame(function(){s.canvases.forEach(function(r){return r.clearWave()})})()}},{key:"drawBars",value:function(s,r,g,f){var n=this;return this.prepareDraw(s,r,g,f,function(E){var D=E.absmax,$=E.hasMinVals;E.height;var H=E.offsetY,K=E.halfH,G=E.peaks,Q=E.channelIndex;if(g!==void 0){var U=$?2:1,ne=G.length/U,Y=n.params.barWidth*n.params.pixelRatio,le=n.params.barGap===null?Math.max(n.params.pixelRatio,~~(Y/2)):Math.max(n.params.pixelRatio,n.params.barGap*n.params.pixelRatio),re=Y+le,ue=ne/n.width,Ve=g,Me=f,ye=Ve;for(ye;ye<Me;ye+=re){var Le=0,De=Math.floor(ye*ue)*U,je=Math.floor((ye+re)*ue)*U;do{var Ie=Math.abs(G[De]);Ie>Le&&(Le=Ie),De+=U}while(De<je);var Pe=Math.round(Le/D*K);n.params.barMinHeight&&(Pe=Math.max(Pe,n.params.barMinHeight)),n.fillRect(ye+n.halfPixel,K-Pe+H,Y+n.halfPixel,Pe*2,n.barRadius,Q)}}})}},{key:"drawWave",value:function(s,r,g,f){var n=this;return this.prepareDraw(s,r,g,f,function(E){var D=E.absmax,$=E.hasMinVals;E.height;var H=E.offsetY,K=E.halfH,G=E.peaks,Q=E.channelIndex;if(!$){var U=[],ne=G.length,Y=0;for(Y;Y<ne;Y++)U[2*Y]=G[Y],U[2*Y+1]=-G[Y];G=U}g!==void 0&&n.drawLine(G,D,K,H,g,f,Q),n.fillRect(0,K+H-n.halfPixel,n.width,n.halfPixel,n.barRadius,Q)})}},{key:"drawLine",value:function(s,r,g,f,n,E,D){var $=this,H=this.params.splitChannelsOptions.channelColors[D]||{},K=H.waveColor,G=H.progressColor;this.canvases.forEach(function(Q,U){$.setFillStyles(Q,K,G),$.applyCanvasTransforms(Q,$.params.vertical),Q.drawLines(s,r,g,f,n,E)})}},{key:"fillRect",value:function(s,r,g,f,n,E){var D=Math.floor(s/this.maxCanvasWidth),$=Math.min(Math.ceil((s+g)/this.maxCanvasWidth)+1,this.canvases.length),H=D;for(H;H<$;H++){var K=this.canvases[H],G=H*this.maxCanvasWidth,Q={x1:Math.max(s,H*this.maxCanvasWidth),y1:r,x2:Math.min(s+g,H*this.maxCanvasWidth+K.wave.width),y2:r+f};if(Q.x1<Q.x2){var U=this.params.splitChannelsOptions.channelColors[E]||{},ne=U.waveColor,Y=U.progressColor;this.setFillStyles(K,ne,Y),this.applyCanvasTransforms(K,this.params.vertical),K.fillRects(Q.x1-G,Q.y1,Q.x2-Q.x1,Q.y2-Q.y1,n)}}}},{key:"hideChannel",value:function(s){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(s)}},{key:"prepareDraw",value:function(s,r,g,f,n,E,D){var $=this;return S.frame(function(){if(s[0]instanceof Array){var H=s;if($.params.splitChannels){var K=H.filter(function(re,ue){return!$.hideChannel(ue)});$.params.splitChannelsOptions.overlay||$.setHeight(Math.max(K.length,1)*$.params.height*$.params.pixelRatio);var G;return $.params.splitChannelsOptions&&$.params.splitChannelsOptions.relativeNormalization&&(G=S.max(H.map(function(re){return S.absMax(re)}))),H.forEach(function(re,ue){return $.prepareDraw(re,ue,g,f,n,K.indexOf(re),G)})}s=H[0]}if(!$.hideChannel(r)){var Q=1/$.params.barHeight;$.params.normalize&&(Q=D===void 0?S.absMax(s):D);var U=[].some.call(s,function(re){return re<0}),ne=$.params.height*$.params.pixelRatio,Y=ne/2,le=ne*E||0;return $.params.splitChannelsOptions&&$.params.splitChannelsOptions.overlay&&(le=0),n({absmax:Q,hasMinVals:U,height:ne,offsetY:le,halfH:Y,peaks:s,channelIndex:r})}})()}},{key:"setFillStyles",value:function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;s.setFillStyles(r,g)}},{key:"applyCanvasTransforms",value:function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.applyCanvasTransforms(r)}},{key:"getImage",value:function(s,r,g){if(g==="blob")return Promise.all(this.canvases.map(function(n){return n.getImage(s,r,g)}));if(g==="dataURL"){var f=this.canvases.map(function(n){return n.getImage(s,r,g)});return f.length>1?f:f[0]}}},{key:"updateProgress",value:function(s){this.style(this.progressWave,{width:s+"px"})}}]),d}(A.default);c.default=M,u.exports=c.default},"./src/mediaelement-webaudio.js":(u,c,y)=>{function h(_){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(_)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var A=S(y("./src/mediaelement.js"));function S(_){return _&&_.__esModule?_:{default:_}}function V(_,M){if(!(_ instanceof M))throw new TypeError("Cannot call a class as a function")}function P(_,M){for(var k=0;k<M.length;k++){var o=M[k];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(_,R(o.key),o)}}function z(_,M,k){return M&&P(_.prototype,M),k&&P(_,k),Object.defineProperty(_,"prototype",{writable:!1}),_}function R(_){var M=L(_,"string");return h(M)==="symbol"?M:String(M)}function L(_,M){if(h(_)!=="object"||_===null)return _;var k=_[Symbol.toPrimitive];if(k!==void 0){var o=k.call(_,M||"default");if(h(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(_)}function x(){return typeof Reflect!="undefined"&&Reflect.get?x=Reflect.get.bind():x=function(M,k,o){var d=j(M,k);if(!!d){var b=Object.getOwnPropertyDescriptor(d,k);return b.get?b.get.call(arguments.length<3?M:o):b.value}},x.apply(this,arguments)}function j(_,M){for(;!Object.prototype.hasOwnProperty.call(_,M)&&(_=B(_),_!==null););return _}function w(_,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(M&&M.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),M&&p(_,M)}function p(_,M){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,d){return o.__proto__=d,o},p(_,M)}function m(_){var M=W();return function(){var o=B(_),d;if(M){var b=B(this).constructor;d=Reflect.construct(o,arguments,b)}else d=o.apply(this,arguments);return C(this,d)}}function C(_,M){if(M&&(h(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(_)}function O(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function W(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(_){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},B(_)}var T=function(_){w(k,_);var M=m(k);function k(o){var d;return V(this,k),d=M.call(this,o),d.params=o,d.sourceMediaElement=null,d}return z(k,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(d,b,s){x(B(k.prototype),"_load",this).call(this,d,b,s),this.createMediaElementSource(d)}},{key:"createMediaElementSource",value:function(d){this.sourceMediaElement=this.ac.createMediaElementSource(d),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(d,b){return this.resumeAudioContext(),x(B(k.prototype),"play",this).call(this,d,b)}},{key:"destroy",value:function(){x(B(k.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),k}(A.default);c.default=T,u.exports=c.default},"./src/mediaelement.js":(u,c,y)=>{function h(o){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},h(o)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var A=z(y("./src/webaudio.js")),S=P(y("./src/util/index.js"));function V(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,b=new WeakMap;return(V=function(r){return r?b:d})(o)}function P(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||h(o)!=="object"&&typeof o!="function")return{default:o};var b=V(d);if(b&&b.has(o))return b.get(o);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var f=r?Object.getOwnPropertyDescriptor(o,g):null;f&&(f.get||f.set)?Object.defineProperty(s,g,f):s[g]=o[g]}return s.default=o,b&&b.set(o,s),s}function z(o){return o&&o.__esModule?o:{default:o}}function R(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function L(o,d){for(var b=0;b<d.length;b++){var s=d[b];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,j(s.key),s)}}function x(o,d,b){return d&&L(o.prototype,d),b&&L(o,b),Object.defineProperty(o,"prototype",{writable:!1}),o}function j(o){var d=w(o,"string");return h(d)==="symbol"?d:String(d)}function w(o,d){if(h(o)!=="object"||o===null)return o;var b=o[Symbol.toPrimitive];if(b!==void 0){var s=b.call(o,d||"default");if(h(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(o)}function p(){return typeof Reflect!="undefined"&&Reflect.get?p=Reflect.get.bind():p=function(d,b,s){var r=m(d,b);if(!!r){var g=Object.getOwnPropertyDescriptor(r,b);return g.get?g.get.call(arguments.length<3?d:s):g.value}},p.apply(this,arguments)}function m(o,d){for(;!Object.prototype.hasOwnProperty.call(o,d)&&(o=M(o),o!==null););return o}function C(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(d&&d.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),d&&O(o,d)}function O(o,d){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},O(o,d)}function W(o){var d=_();return function(){var s=M(o),r;if(d){var g=M(this).constructor;r=Reflect.construct(s,arguments,g)}else r=s.apply(this,arguments);return B(this,r)}}function B(o,d){if(d&&(h(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(o)}function T(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(o){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},M(o)}var k=function(o){C(b,o);var d=W(b);function b(s){var r;return R(this,b),r=d.call(this,s),r.params=s,r.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},r.mediaType=s.mediaType.toLowerCase(),r.elementPosition=s.elementPosition,r.peaks=null,r.playbackRate=1,r.volume=1,r.isMuted=!1,r.buffer=null,r.onPlayEnd=null,r.mediaListeners={},r}return x(b,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var r=this;this.mediaListeners.error=function(){r.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){r.fireEvent("waiting")},this.mediaListeners.canplay=function(){r.fireEvent("canplay")},this.mediaListeners.ended=function(){r.fireEvent("finish")},this.mediaListeners.play=function(){r.fireEvent("play")},this.mediaListeners.pause=function(){r.fireEvent("pause")},this.mediaListeners.seeked=function(g){r.fireEvent("seek")},this.mediaListeners.volumechange=function(g){r.isMuted=r.media.muted,r.isMuted?r.volume=0:r.volume=r.media.volume,r.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(g){r.media.removeEventListener(g,r.mediaListeners[g]),r.media.addEventListener(g,r.mediaListeners[g])})}},{key:"createTimer",value:function(){var r=this,g=function f(){r.isPaused()||(r.fireEvent("audioprocess",r.getCurrentTime()),S.frame(f)())};this.on("play",g),this.on("pause",function(){r.fireEvent("audioprocess",r.getCurrentTime())})}},{key:"load",value:function(r,g,f,n){var E=document.createElement(this.mediaType);E.controls=this.params.mediaControls,E.autoplay=this.params.autoplay||!1,E.preload=n==null?"auto":n,E.src=r,E.style.width="100%";var D=g.querySelector(this.mediaType);D&&g.removeChild(D),g.appendChild(E),this._load(E,f,n)}},{key:"loadElt",value:function(r,g){r.controls=this.params.mediaControls,r.autoplay=this.params.autoplay||!1,this._load(r,g,r.preload)}},{key:"_load",value:function(r,g,f){if(!(r instanceof HTMLMediaElement)||typeof r.addEventListener=="undefined")throw new Error("media parameter is not a valid media element");typeof r.load=="function"&&!(g&&f=="none")&&r.load(),this.media=r,this._setupMediaListeners(),this.peaks=g,this.onPlayEnd=null,this.buffer=null,this.isMuted=r.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var r=(this.buffer||this.media).duration;return r>=1/0&&(r=this.media.seekable.end(0)),r}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(r){this.playbackRate=r||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(r){r!=null&&!isNaN(r)&&(this.media.currentTime=r),this.clearPlayEnd()}},{key:"play",value:function(r,g){this.seekTo(r);var f=this.media.play();return g&&this.setPlayEnd(g),f}},{key:"pause",value:function(){var r;return this.media&&(r=this.media.pause()),this.clearPlayEnd(),r}},{key:"setPlayEnd",value:function(r){var g=this;this.clearPlayEnd(),this._onPlayEnd=function(f){f>=r&&(g.pause(),g.seekTo(r))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(r,g,f){return this.buffer?p(M(b.prototype),"getPeaks",this).call(this,r,g,f):this.peaks||[]}},{key:"setSinkId",value:function(r){return r?this.media.setSinkId?this.media.setSinkId(r):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+r))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(r){this.volume=r,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(r){this.isMuted=this.media.muted=r}},{key:"destroy",value:function(){var r=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(g){r.media&&r.media.removeEventListener(g,r.mediaListeners[g])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),b}(A.default);c.default=k,u.exports=c.default},"./src/peakcache.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;function y(R){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},y(R)}function h(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function A(R,L){for(var x=0;x<L.length;x++){var j=L[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(R,V(j.key),j)}}function S(R,L,x){return L&&A(R.prototype,L),x&&A(R,x),Object.defineProperty(R,"prototype",{writable:!1}),R}function V(R){var L=P(R,"string");return y(L)==="symbol"?L:String(L)}function P(R,L){if(y(R)!=="object"||R===null)return R;var x=R[Symbol.toPrimitive];if(x!==void 0){var j=x.call(R,L||"default");if(y(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(R)}var z=function(){function R(){h(this,R),this.clearPeakCache()}return S(R,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(x,j,w){x!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=x);for(var p=[],m=0;m<this.peakCacheRanges.length&&this.peakCacheRanges[m]<j;)m++;for(m%2==0&&p.push(j);m<this.peakCacheRanges.length&&this.peakCacheRanges[m]<=w;)p.push(this.peakCacheRanges[m]),m++;m%2==0&&p.push(w),p=p.filter(function(O,W,B){return W==0?O!=B[W+1]:W==B.length-1?O!=B[W-1]:O!=B[W-1]&&O!=B[W+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(p),this.peakCacheRanges=this.peakCacheRanges.sort(function(O,W){return O-W}).filter(function(O,W,B){return W==0?O!=B[W+1]:W==B.length-1?O!=B[W-1]:O!=B[W-1]&&O!=B[W+1]});var C=[];for(m=0;m<p.length;m+=2)C.push([p[m],p[m+1]]);return C}},{key:"getCacheRanges",value:function(){var x=[],j;for(j=0;j<this.peakCacheRanges.length;j+=2)x.push([this.peakCacheRanges[j],this.peakCacheRanges[j+1]]);return x}}]),R}();c.default=z,u.exports=c.default},"./src/util/absMax.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=V;var h=S(y("./src/util/max.js")),A=S(y("./src/util/min.js"));function S(P){return P&&P.__esModule?P:{default:P}}function V(P){var z=(0,h.default)(P),R=(0,A.default)(P);return-R>z?-R:z}u.exports=c.default},"./src/util/clamp.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=y;function y(h,A,S){return Math.min(Math.max(A,h),S)}u.exports=c.default},"./src/util/fetch.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=j;var h=A(y("./src/util/observer.js"));function A(w){return w&&w.__esModule?w:{default:w}}function S(w){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},S(w)}function V(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function P(w,p){for(var m=0;m<p.length;m++){var C=p[m];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,R(C.key),C)}}function z(w,p,m){return p&&P(w.prototype,p),m&&P(w,m),Object.defineProperty(w,"prototype",{writable:!1}),w}function R(w){var p=L(w,"string");return S(p)==="symbol"?p:String(p)}function L(w,p){if(S(w)!=="object"||w===null)return w;var m=w[Symbol.toPrimitive];if(m!==void 0){var C=m.call(w,p||"default");if(S(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(w)}var x=function(){function w(p,m,C){V(this,w),this.instance=p,this.instance._reader=C.body.getReader(),this.total=parseInt(m,10),this.loaded=0}return z(w,[{key:"start",value:function(m){var C=this,O=function W(){C.instance._reader.read().then(function(B){var T=B.done,_=B.value;if(T){C.total===0&&C.instance.onProgress.call(C.instance,{loaded:C.loaded,total:C.total,lengthComputable:!1}),m.close();return}C.loaded+=_.byteLength,C.instance.onProgress.call(C.instance,{loaded:C.loaded,total:C.total,lengthComputable:C.total!==0}),m.enqueue(_),W()}).catch(function(B){m.error(B)})};O()}}]),w}();function j(w){if(w){if(!w.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var p=new h.default,m=new Headers,C=new Request(w.url);p.controller=new AbortController,w&&w.requestHeaders&&w.requestHeaders.forEach(function(B){m.append(B.key,B.value)});var O=w.responseType||"json",W={method:w.method||"GET",headers:m,mode:w.mode||"cors",credentials:w.credentials||"same-origin",cache:w.cache||"default",redirect:w.redirect||"follow",referrer:w.referrer||"client",signal:p.controller.signal};return fetch(C,W).then(function(B){p.response=B;var T=!0;B.body||(T=!1);var _=B.headers.get("content-length");return _===null&&(T=!1),T?(p.onProgress=function(M){p.fireEvent("progress",M)},new Response(new ReadableStream(new x(p,_,B)),W)):B}).then(function(B){var T;if(B.ok)switch(O){case"arraybuffer":return B.arrayBuffer();case"json":return B.json();case"blob":return B.blob();case"text":return B.text();default:T="Unknown responseType: "+O;break}throw T||(T="HTTP error status: "+B.status),new Error(T)}).then(function(B){p.fireEvent("success",B)}).catch(function(B){p.fireEvent("error",B)}),p.fetchRequest=C,p}u.exports=c.default},"./src/util/frame.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=S;var h=A(y("./src/util/request-animation-frame.js"));function A(V){return V&&V.__esModule?V:{default:V}}function S(V){return function(){for(var P=arguments.length,z=new Array(P),R=0;R<P;R++)z[R]=arguments[R];return(0,h.default)(function(){return V.apply(void 0,z)})}}u.exports=c.default},"./src/util/get-id.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=y;function y(h){return h===void 0&&(h="wavesurfer_"),h+Math.random().toString(32).substring(2)}u.exports=c.default},"./src/util/index.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"Observer",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(c,"absMax",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(c,"clamp",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(c,"debounce",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(c,"fetchFile",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(c,"frame",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(c,"getId",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(c,"ignoreSilenceMode",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(c,"max",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(c,"min",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(c,"preventClick",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(c,"requestAnimationFrame",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(c,"style",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(c,"withOrientation",{enumerable:!0,get:function(){return m.default}});var h=O(y("./src/util/get-id.js")),A=O(y("./src/util/max.js")),S=O(y("./src/util/min.js")),V=O(y("./src/util/absMax.js")),P=O(y("./src/util/observer.js")),z=O(y("./src/util/style.js")),R=O(y("./src/util/request-animation-frame.js")),L=O(y("./src/util/frame.js")),x=O(y("./node_modules/debounce/index.js")),j=O(y("./src/util/prevent-click.js")),w=O(y("./src/util/fetch.js")),p=O(y("./src/util/clamp.js")),m=O(y("./src/util/orientation.js")),C=O(y("./src/util/silence-mode.js"));function O(W){return W&&W.__esModule?W:{default:W}}},"./src/util/max.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=y;function y(h){var A=-1/0;return Object.keys(h).forEach(function(S){h[S]>A&&(A=h[S])}),A}u.exports=c.default},"./src/util/min.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=y;function y(h){var A=Number(1/0);return Object.keys(h).forEach(function(S){h[S]<A&&(A=h[S])}),A}u.exports=c.default},"./src/util/observer.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;function y(R){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},y(R)}function h(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function A(R,L){for(var x=0;x<L.length;x++){var j=L[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(R,V(j.key),j)}}function S(R,L,x){return L&&A(R.prototype,L),x&&A(R,x),Object.defineProperty(R,"prototype",{writable:!1}),R}function V(R){var L=P(R,"string");return y(L)==="symbol"?L:String(L)}function P(R,L){if(y(R)!=="object"||R===null)return R;var x=R[Symbol.toPrimitive];if(x!==void 0){var j=x.call(R,L||"default");if(y(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(R)}var z=function(){function R(){h(this,R),this._disabledEventEmissions=[],this.handlers=null}return S(R,[{key:"on",value:function(x,j){var w=this;this.handlers||(this.handlers={});var p=this.handlers[x];return p||(p=this.handlers[x]=[]),p.push(j),{name:x,callback:j,un:function(C,O){return w.un(C,O)}}}},{key:"un",value:function(x,j){if(!!this.handlers){var w=this.handlers[x],p;if(w)if(j)for(p=w.length-1;p>=0;p--)w[p]==j&&w.splice(p,1);else w.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(x,j){var w=this,p=function m(){for(var C=arguments.length,O=new Array(C),W=0;W<C;W++)O[W]=arguments[W];j.apply(w,O),setTimeout(function(){w.un(x,m)},0)};return this.on(x,p)}},{key:"setDisabledEventEmissions",value:function(x){this._disabledEventEmissions=x}},{key:"_isDisabledEventEmission",value:function(x){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(x)}},{key:"fireEvent",value:function(x){for(var j=arguments.length,w=new Array(j>1?j-1:0),p=1;p<j;p++)w[p-1]=arguments[p];if(!(!this.handlers||this._isDisabledEventEmission(x))){var m=this.handlers[x];m&&m.forEach(function(C){C.apply(void 0,w)})}}}]),R}();c.default=z,u.exports=c.default},"./src/util/orientation.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=S;var y={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function h(V,P){return Object.prototype.hasOwnProperty.call(y,V)&&P?y[V]:V}var A=Symbol("isProxy");function S(V,P){return V[A]?V:new Proxy(V,{get:function(R,L,x){if(L===A)return!0;if(L==="domElement")return R;if(L==="style")return S(R.style,P);if(L==="canvas")return S(R.canvas,P);if(L==="getBoundingClientRect")return function(){return S(R.getBoundingClientRect.apply(R,arguments),P)};if(L==="getContext")return function(){return S(R.getContext.apply(R,arguments),P)};var j=R[h(L,P)];return typeof j=="function"?j.bind(R):j},set:function(R,L,x){return R[h(L,P)]=x,!0}})}u.exports=c.default},"./src/util/prevent-click.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=h;function y(A){A.stopPropagation(),document.body.removeEventListener("click",y,!0)}function h(A){document.body.addEventListener("click",y,!0)}u.exports=c.default},"./src/util/request-animation-frame.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var y=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h,A){return setTimeout(h,1e3/60)}).bind(window);c.default=y,u.exports=c.default},"./src/util/silence-mode.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=y;function y(){var h=new AudioContext,A=h.createBufferSource();A.buffer=h.createBuffer(1,1,44100),A.connect(h.destination),A.start();var S="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",V=document.createElement("div");V.innerHTML='<audio x-webkit-airplay="deny"></audio>';var P=V.children.item(0);P.src=S,P.preload="auto",P.type="audio/mpeg",P.disableRemotePlayback=!0,P.play(),P.remove(),V.remove()}u.exports=c.default},"./src/util/style.js":(u,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=y;function y(h,A){return Object.keys(A).forEach(function(S){h.style[S]!==A[S]&&(h.style[S]=A[S])}),h}u.exports=c.default},"./src/wavesurfer.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var h=x(y("./src/util/index.js")),A=R(y("./src/drawer.multicanvas.js")),S=R(y("./src/webaudio.js")),V=R(y("./src/mediaelement.js")),P=R(y("./src/peakcache.js")),z=R(y("./src/mediaelement-webaudio.js"));function R(s){return s&&s.__esModule?s:{default:s}}function L(s){if(typeof WeakMap!="function")return null;var r=new WeakMap,g=new WeakMap;return(L=function(n){return n?g:r})(s)}function x(s,r){if(!r&&s&&s.__esModule)return s;if(s===null||T(s)!=="object"&&typeof s!="function")return{default:s};var g=L(r);if(g&&g.has(s))return g.get(s);var f={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in s)if(E!=="default"&&Object.prototype.hasOwnProperty.call(s,E)){var D=n?Object.getOwnPropertyDescriptor(s,E):null;D&&(D.get||D.set)?Object.defineProperty(f,E,D):f[E]=s[E]}return f.default=s,g&&g.set(s,f),f}function j(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&w(s,r)}function w(s,r){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,n){return f.__proto__=n,f},w(s,r)}function p(s){var r=O();return function(){var f=W(s),n;if(r){var E=W(this).constructor;n=Reflect.construct(f,arguments,E)}else n=f.apply(this,arguments);return m(this,n)}}function m(s,r){if(r&&(T(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(s)}function C(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W(s){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},W(s)}function B(s,r,g){return r=o(r),r in s?Object.defineProperty(s,r,{value:g,enumerable:!0,configurable:!0,writable:!0}):s[r]=g,s}function T(s){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},T(s)}function _(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function M(s,r){for(var g=0;g<r.length;g++){var f=r[g];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,o(f.key),f)}}function k(s,r,g){return r&&M(s.prototype,r),g&&M(s,g),Object.defineProperty(s,"prototype",{writable:!1}),s}function o(s){var r=d(s,"string");return T(r)==="symbol"?r:String(r)}function d(s,r){if(T(s)!=="object"||s===null)return s;var g=s[Symbol.toPrimitive];if(g!==void 0){var f=g.call(s,r||"default");if(T(f)!=="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}var b=function(s){j(g,s);var r=p(g);function g(f){var n;if(_(this,g),n=r.call(this),B(C(n),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:A.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),B(C(n),"backends",{MediaElement:V.default,WebAudio:S.default,MediaElementWebAudio:z.default}),B(C(n),"util",h),n.params=Object.assign({},n.defaultParams,f),n.params.splitChannelsOptions=Object.assign({},n.defaultParams.splitChannelsOptions,f.splitChannelsOptions),n.container=typeof f.container=="string"?document.querySelector(n.params.container):n.params.container,!n.container)throw new Error("Container element not found");if(n.params.mediaContainer==null?n.mediaContainer=n.container:typeof n.params.mediaContainer=="string"?n.mediaContainer=document.querySelector(n.params.mediaContainer):n.mediaContainer=n.params.mediaContainer,!n.mediaContainer)throw new Error("Media Container element not found");if(n.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(n.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(n.params.rtl===!0&&(n.params.vertical===!0?h.style(n.container,{transform:"rotateX(180deg)"}):h.style(n.container,{transform:"rotateY(180deg)"})),n.params.backgroundColor&&n.setBackgroundColor(n.params.backgroundColor),n.savedVolume=0,n.isMuted=!1,n.tmpEvents=[],n.currentRequest=null,n.arraybuffer=null,n.drawer=null,n.backend=null,n.peakCache=null,typeof n.params.renderer!="function")throw new Error("Renderer parameter is invalid");n.Drawer=n.params.renderer,n.params.backend=="AudioElement"&&(n.params.backend="MediaElement"),(n.params.backend=="WebAudio"||n.params.backend==="MediaElementWebAudio")&&!S.default.prototype.supportsWebAudio.call(null)&&(n.params.backend="MediaElement"),n.Backend=n.backends[n.params.backend],n.initialisedPluginList={},n.isDestroyed=!1,n.isReady=!1;var E=0;return n._onResize=h.debounce(function(){n.drawer.wrapper&&E!=n.drawer.wrapper.clientWidth&&!n.params.scrollParent&&(E=n.drawer.wrapper.clientWidth,E&&n.drawer.fireEvent("redraw"))},typeof n.params.responsive=="number"?n.params.responsive:100),m(n,C(n))}return k(g,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(n){var E=this;return n.forEach(function(D){return E.addPlugin(D)}),n.forEach(function(D){D.deferInit||E.initPlugin(D.name)}),this.fireEvent("plugins-registered",n),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(n){var E=this;if(!n.name)throw new Error("Plugin does not have a name!");if(!n.instance)throw new Error("Plugin ".concat(n.name," does not have an instance property!"));n.staticProps&&Object.keys(n.staticProps).forEach(function(H){E[H]=n.staticProps[H]});var D=n.instance,$=Object.getOwnPropertyNames(h.Observer.prototype);return $.forEach(function(H){D.prototype[H]=h.Observer.prototype[H]}),this[n.name]=new D(n.params||{},this),this.fireEvent("plugin-added",n.name),this}},{key:"initPlugin",value:function(n){if(!this[n])throw new Error("Plugin ".concat(n," has not been added yet!"));return this.initialisedPluginList[n]&&this.destroyPlugin(n),this[n].init(),this.initialisedPluginList[n]=!0,this.fireEvent("plugin-initialised",n),this}},{key:"destroyPlugin",value:function(n){if(!this[n])throw new Error("Plugin ".concat(n," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[n])throw new Error("Plugin ".concat(n," is not active and cannot be destroyed!"));if(typeof this[n].destroy!="function")throw new Error("Plugin ".concat(n," does not have a destroy function!"));return this[n].destroy(),delete this.initialisedPluginList[n],this.fireEvent("plugin-destroyed",n),this}},{key:"destroyAllPlugins",value:function(){var n=this;Object.keys(this.initialisedPluginList).forEach(function(E){return n.destroyPlugin(E)})}},{key:"createDrawer",value:function(){var n=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){n.drawBuffer(),n.drawer.progress(n.backend.getPlayedPercents())}),this.drawer.on("click",function(E,D){setTimeout(function(){return n.seekTo(D)},0)}),this.drawer.on("scroll",function(E){n.params.partialRender&&n.drawBuffer(),n.fireEvent("scroll",E)})}},{key:"createBackend",value:function(){var n=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){n.drawer.progress(n.backend.getPlayedPercents()),n.fireEvent("finish")}),this.backend.on("play",function(){return n.fireEvent("play")}),this.backend.on("pause",function(){return n.fireEvent("pause")}),this.backend.on("audioprocess",function(E){n.drawer.progress(n.backend.getPlayedPercents()),n.fireEvent("audioprocess",E)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){n.drawer.progress(n.backend.getPlayedPercents())}),this.backend.on("volume",function(){var E=n.getVolume();n.fireEvent("volume",E),n.backend.isMuted!==n.isMuted&&(n.isMuted=n.backend.isMuted,n.fireEvent("mute",n.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new P.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(n){n>=this.getDuration()?this.seekTo(1):this.seekTo(n/this.getDuration())}},{key:"play",value:function(n,E){var D=this;return this.params.ignoreSilenceMode&&h.ignoreSilenceMode(),this.fireEvent("interaction",function(){return D.play(n,E)}),this.backend.play(n,E)}},{key:"setPlayEnd",value:function(n){this.backend.setPlayEnd(n)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(n){this.skip(-n||-this.params.skipLength)}},{key:"skipForward",value:function(n){this.skip(n||this.params.skipLength)}},{key:"skip",value:function(n){var E=this.getDuration()||1,D=this.getCurrentTime()||0;D=Math.max(0,Math.min(E,D+(n||0))),this.seekAndCenter(D/E)}},{key:"seekAndCenter",value:function(n){this.seekTo(n),this.drawer.recenter(n)}},{key:"seekTo",value:function(n){var E=this;if(typeof n!="number"||!isFinite(n)||n<0||n>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return E.seekTo(n)});var D=this.params.backend==="WebAudio",$=this.backend.isPaused();D&&!$&&this.backend.pause();var H=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(n*this.getDuration()),this.drawer.progress(n),D&&!$&&this.backend.play(),this.params.scrollParent=H,this.fireEvent("seek",n)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(n){return this.backend.setSinkId(n)}},{key:"setVolume",value:function(n){if(this.isMuted===!0){this.savedVolume=n;return}this.backend.setVolume(n),this.fireEvent("volume",n)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(n){this.backend.setPlaybackRate(n)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(n){if(n===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(n),this.isMuted=n):n?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[n]?this.params.splitChannelsOptions.channelColors[n].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(n){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[E]?this.params.splitChannelsOptions.channelColors[E].waveColor=n:this.params.waveColor=n,this.drawBuffer()}},{key:"getProgressColor",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[n]?this.params.splitChannelsOptions.channelColors[n].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(n,E){this.params.splitChannelsOptions.channelColors[E]?this.params.splitChannelsOptions.channelColors[E].progressColor=n:this.params.progressColor=n,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(n){this.params.backgroundColor=n,h.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(n){this.params.cursorColor=n,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(n){this.params.height=n,this.drawer.setHeight(n*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(n){this.params.splitChannelsOptions.filterChannels=n,this.drawBuffer()}},{key:"drawBuffer",value:function(){var n=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),E=this.drawer.getWidth(),D=n,$=0,H=Math.max($+E,D);this.params.fillParent&&(!this.params.scrollParent||n<E)&&(D=E,$=0,H=D);var K;if(this.params.partialRender){var G=this.peakCache.addRangeToPeakCache(D,$,H),Q;for(Q=0;Q<G.length;Q++)K=this.backend.getPeaks(D,G[Q][0],G[Q][1]),this.drawer.drawPeaks(K,D,G[Q][0],G[Q][1])}else K=this.backend.getPeaks(D,$,H),this.drawer.drawPeaks(K,D,$,H);this.fireEvent("redraw",K,D)}},{key:"zoom",value:function(n){n?(this.params.minPxPerSec=n,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",n)}},{key:"loadArrayBuffer",value:function(n){var E=this;this.decodeArrayBuffer(n,function(D){E.isDestroyed||E.loadDecodedBuffer(D)})}},{key:"loadDecodedBuffer",value:function(n){this.backend.load(n),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(n){var E=this,D=new FileReader;D.addEventListener("progress",function($){return E.onProgress($)}),D.addEventListener("load",function($){return E.loadArrayBuffer($.target.result)}),D.addEventListener("error",function(){return E.fireEvent("error","Error reading file")}),D.readAsArrayBuffer(n),this.empty()}},{key:"load",value:function(n,E,D,$){if(!n)throw new Error("url parameter cannot be empty");if(this.empty(),D){var H={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(D)===-1,"Peaks are not provided":!E,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof n!="string"},K=Object.keys(H).filter(function(G){return H[G]});K.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+K.join(`
	- `)),D=null)}switch(this.params.backend==="WebAudio"&&n instanceof HTMLMediaElement&&(n=n.src),this.params.backend){case"WebAudio":return this.loadBuffer(n,E,$);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(n,E,D,$)}}},{key:"loadBuffer",value:function(n,E,D){var $=this,H=function(G){return G&&$.tmpEvents.push($.once("ready",G)),$.getArrayBuffer(n,function(Q){return $.loadArrayBuffer(Q)})};if(E)this.backend.setPeaks(E,D),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",H));else return H()}},{key:"loadMediaElement",value:function(n,E,D,$){var H=this,K=n;if(typeof n=="string")this.backend.load(K,this.mediaContainer,E,D);else{var G=n;this.backend.loadElt(G,E),K=G.src}this.tmpEvents.push(this.backend.once("canplay",function(){H.backend.destroyed||(H.drawBuffer(),H.isReady=!0,H.fireEvent("ready"))}),this.backend.once("error",function(Q){return H.fireEvent("error",Q)})),E&&(this.backend.setPeaks(E,$),this.drawBuffer(),this.fireEvent("waveform-ready")),(!E||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(K,function(Q){H.decodeArrayBuffer(Q,function(U){H.backend.buffer=U,H.backend.setPeaks(null),H.drawBuffer(),H.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(n,E){var D=this;this.isDestroyed||(this.arraybuffer=n,this.backend.decodeArrayBuffer(n,function($){!D.isDestroyed&&D.arraybuffer==n&&(E($),D.arraybuffer=null)},function(){return D.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(n,E){var D=this,$=Object.assign({url:n,responseType:"arraybuffer"},this.params.xhr),H=h.fetchFile($);return this.currentRequest=H,this.tmpEvents.push(H.on("progress",function(K){D.onProgress(K)}),H.on("success",function(K){E(K),D.currentRequest=null}),H.on("error",function(K){D.fireEvent("error",K),D.currentRequest=null})),H}},{key:"onProgress",value:function(n){var E;n.lengthComputable?E=n.loaded/n.total:E=n.loaded/(n.loaded+1e6),this.fireEvent("loading",Math.round(E*100),n.target)}},{key:"exportPCM",value:function(n,E,D,$,H){n=n||1024,$=$||0,E=E||1e4,D=D||!1;var K=this.backend.getPeaks(n,$,H),G=[].map.call(K,function(Q){return Math.round(Q*E)/E});return new Promise(function(Q,U){if(!D){var ne=new Blob([JSON.stringify(G)],{type:"application/json;charset=utf-8"}),Y=URL.createObjectURL(ne);window.open(Y),URL.revokeObjectURL(Y)}Q(G)})}},{key:"exportImage",value:function(n,E,D){return n||(n="image/png"),E||(E=1),D||(D="dataURL"),this.drawer.getImage(n,E,D)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(n){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(n){return n.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(n){var E=new g(n);return E.init()}}]),g}(h.Observer);c.default=b,B(b,"VERSION","6.5.2"),B(b,"util",h),u.exports=c.default},"./src/webaudio.js":(u,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var h=S(y("./src/util/index.js"));function A(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,b=new WeakMap;return(A=function(r){return r?b:d})(o)}function S(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||V(o)!=="object"&&typeof o!="function")return{default:o};var b=A(d);if(b&&b.has(o))return b.get(o);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var f=r?Object.getOwnPropertyDescriptor(o,g):null;f&&(f.get||f.set)?Object.defineProperty(s,g,f):s[g]=o[g]}return s.default=o,b&&b.set(o,s),s}function V(o){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},V(o)}function P(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function z(o,d){for(var b=0;b<d.length;b++){var s=d[b];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,W(s.key),s)}}function R(o,d,b){return d&&z(o.prototype,d),b&&z(o,b),Object.defineProperty(o,"prototype",{writable:!1}),o}function L(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(d&&d.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),d&&x(o,d)}function x(o,d){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},x(o,d)}function j(o){var d=m();return function(){var s=C(o),r;if(d){var g=C(this).constructor;r=Reflect.construct(s,arguments,g)}else r=s.apply(this,arguments);return w(this,r)}}function w(o,d){if(d&&(V(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(o)}function p(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(o){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},C(o)}function O(o,d,b){return d=W(d),d in o?Object.defineProperty(o,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):o[d]=b,o}function W(o){var d=B(o,"string");return V(d)==="symbol"?d:String(d)}function B(o,d){if(V(o)!=="object"||o===null)return o;var b=o[Symbol.toPrimitive];if(b!==void 0){var s=b.call(o,d||"default");if(V(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(o)}var T="playing",_="paused",M="finished",k=function(o){L(b,o);var d=j(b);function b(s){var r,g,f;return P(this,b),f=d.call(this),O(p(f),"audioContext",null),O(p(f),"offlineAudioContext",null),O(p(f),"stateBehaviors",(r={},O(r,T,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var E=this.getDuration();return this.getCurrentTime()/E||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),O(r,_,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var E=this.getDuration();return this.getCurrentTime()/E||0},getCurrentTime:function(){return this.startPosition}}),O(r,M,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),r)),f.params=s,f.ac=s.audioContext||(f.supportsWebAudio()?f.getAudioContext():{}),f.lastPlay=f.ac.currentTime,f.startPosition=0,f.scheduledPause=null,f.states=(g={},O(g,T,Object.create(f.stateBehaviors[T])),O(g,_,Object.create(f.stateBehaviors[_])),O(g,M,Object.create(f.stateBehaviors[M])),g),f.buffer=null,f.filters=[],f.gainNode=null,f.mergedPeaks=null,f.offlineAc=null,f.peaks=null,f.playbackRate=1,f.analyser=null,f.scriptNode=null,f.source=null,f.splitPeaks=[],f.state=null,f.explicitDuration=s.duration,f.sinkStreamDestination=null,f.sinkAudioElement=null,f.destroyed=!1,f}return R(b,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(r){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,r)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(_),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(r){r&&r.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(r){this.state!==this.states[r]&&(this.state=this.states[r],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var r=arguments.length,g=new Array(r),f=0;f<r;f++)g[f]=arguments[f];this.setFilters(g)}},{key:"setFilters",value:function(r){this.disconnectFilters(),r&&r.length&&(this.filters=r,this.analyser.disconnect(),r.reduce(function(g,f){return g.connect(f),f},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(b.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(b.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var r=this;this.scriptNode.onaudioprocess=function(){var g=r.getCurrentTime();g>=r.getDuration()?(r.setState(M),r.fireEvent("pause")):g>=r.scheduledPause?r.pause():r.state===r.states[T]&&r.fireEvent("audioprocess",g)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(r){return r?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(r)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+r))}},{key:"setVolume",value:function(r){this.gainNode.gain.setValueAtTime(r,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(r,g,f){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(r,function(n){return g(n)},f):this.offlineAc.decodeAudioData(r).then(function(n){return g(n)}).catch(function(n){return f(n)})}},{key:"setPeaks",value:function(r,g){g!=null&&(this.explicitDuration=g),this.peaks=r}},{key:"setLength",value:function(r){if(!(this.mergedPeaks&&r==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var g=this.buffer?this.buffer.numberOfChannels:1,f;for(f=0;f<g;f++)this.splitPeaks[f]=[],this.splitPeaks[f][2*(r-1)]=0,this.splitPeaks[f][2*(r-1)+1]=0;this.mergedPeaks[2*(r-1)]=0,this.mergedPeaks[2*(r-1)+1]=0}}},{key:"getPeaks",value:function(r,g,f){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(g=g||0,f=f||r-1,this.setLength(r),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var E=this.buffer.length/r,D=~~(E/10)||1,$=this.buffer.numberOfChannels,H;for(H=0;H<$;H++){var K=this.splitPeaks[H],G=this.buffer.getChannelData(H),Q=void 0;for(Q=g;Q<=f;Q++){var U=~~(Q*E),ne=~~(U+E),Y=G[U],le=Y,re=void 0;for(re=U;re<ne;re+=D){var ue=G[re];ue>le&&(le=ue),ue<Y&&(Y=ue)}K[2*Q]=le,K[2*Q+1]=Y,(H==0||le>this.mergedPeaks[2*Q])&&(this.mergedPeaks[2*Q]=le),(H==0||Y<this.mergedPeaks[2*Q+1])&&(this.mergedPeaks[2*Q+1]=Y)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(r){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=r,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[T]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(r,g){if(!!this.buffer)return this.scheduledPause=null,r==null&&(r=this.getCurrentTime(),r>=this.getDuration()&&(r=0)),g==null&&(g=this.getDuration()),this.startPosition=r,this.lastPlay=this.ac.currentTime,this.state===this.states[M]&&this.setState(_),{start:r,end:g}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(r,g){if(!!this.buffer){this.createSource();var f=this.seekTo(r,g);r=f.start,g=f.end,this.scheduledPause=g,this.source.start(0,r),this.resumeAudioContext(),this.setState(T),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(_),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(r){this.playbackRate=r||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(r){this.scheduledPause=r}}]),b}(h.Observer);c.default=k,O(k,"scriptBufferSize",256),u.exports=c.default},"./node_modules/debounce/index.js":u=>{function c(y,h,A){var S,V,P,z,R;h==null&&(h=100);function L(){var j=Date.now()-z;j<h&&j>=0?S=setTimeout(L,h-j):(S=null,A||(R=y.apply(P,V),P=V=null))}var x=function(){P=this,V=arguments,z=Date.now();var j=A&&!S;return S||(S=setTimeout(L,h)),j&&(R=y.apply(P,V),P=V=null),R};return x.clear=function(){S&&(clearTimeout(S),S=null)},x.flush=function(){S&&(R=y.apply(P,V),P=V=null,clearTimeout(S),S=null)},x}c.debounce=c,u.exports=c}},l={};function i(u){var c=l[u];if(c!==void 0)return c.exports;var y=l[u]={exports:{}};return a[u](y,y.exports,i),y.exports}var v=i("./src/wavesurfer.js");return v})())})(ii);var mn=vn(ii.exports);class Lt{constructor(t,a,l){var v;this.wavesurfer=l,this.wrapper=l.drawer.wrapper,this.util=l.util,this.style=this.util.style,this.regionsUtil=a,this.vertical=l.drawer.params.vertical,this.id=t.id==null?l.util.getId():t.id,this.start=Number(t.start)||0,this.end=t.end==null?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=t.resize===void 0?!0:Boolean(t.resize),this.drag=t.drag===void 0?!0:Boolean(t.drag),this.contentEditable=Boolean(t.contentEditable),this.removeButton=Boolean(t.removeButton),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(t.loop),this.color=t.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=t.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=t.data||{},this.attributes=t.attributes||{},this.showTooltip=(v=t.showTooltip)!=null?v:!0,this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=()=>this.updateRender(),this.scroll=t.scroll!==!1&&l.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.preventContextMenu=t.preventContextMenu===void 0?!1:Boolean(t.preventContextMenu);let i=t.channelIdx==null?-1:parseInt(t.channelIdx);this.channelIdx=i,this.regionHeight="100%",this.marginTop="0px",this.setHeight(),this.formatTimeCallback=t.formatTimeCallback,this.edgeScrollWidth=t.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}setHeight(){if(this.channelIdx!==-1){let t=this.wavesurfer.regions.channelCount;t>=0&&this.channelIdx<t&&(this.regionHeight=Math.floor(1/t*100)+"%",this.marginTop=this.wrapper.querySelector("canvas").getBoundingClientRect().height/t*this.channelIdx+"px")}}update(t,a){t.start!=null&&(this.start=Number(t.start)),t.end!=null&&(this.end=Number(t.end)),t.loop!=null&&(this.loop=Boolean(t.loop)),t.color!=null&&(this.color=t.color),t.handleStyle!=null&&(this.handleStyle=t.handleStyle),t.data!=null&&(this.data=t.data),t.resize!=null&&(this.resize=Boolean(t.resize),this.updateHandlesResize(this.resize)),t.drag!=null&&(this.drag=Boolean(t.drag)),t.maxLength!=null&&(this.maxLength=Number(t.maxLength)),t.minLength!=null&&(this.minLength=Number(t.minLength)),t.attributes!=null&&(this.attributes=t.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,a)}remove(){this.element&&(this.element.remove(),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}play(t){const a=t||this.start;this.wavesurfer.play(a,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}playLoop(t){this.loop=!0,this.play(t)}setLoop(t){this.loop=t}render(){this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id);for(const t in this.attributes)this.element.setAttribute("data-region-"+t,this.attributes[t]);if(this.setHeight(),this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.removeButton){const t=document.createElement("div");t.className="remove-region-button",t.textContent="\u2A2F",this.removeButtonEl=this.element.appendChild(t);const a={zIndex:4,position:"absolute",bottom:0,right:"4px",cursor:"pointer",fontSize:"20px",lineHeight:"21px",color:"grey"};this.style(this.removeButtonEl,a)}if(this.contentEditable){const t=document.createElement("div");t.className="region-content",t.contentEditable="true",t.innerText=this.data.text||"",this.contentEl=this.element.appendChild(t);const a={zIndex:4,padding:"2px 5px",cursor:"text"};this.style(this.contentEl,a)}if(this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.textLabelEl=this.util.withOrientation(this.element.appendChild(document.createElement("div")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.textLabelEl.className="region-label",this.textLabelEl.textContent=this.formatTimeCallback(this.start,this.end),this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";const t={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%"},a=this.handleStyle.left!=="none"?Object.assign({left:"0px"},t,this.handleStyle.left):null,l=this.handleStyle.right!=="none"?Object.assign({right:"0px"},t,this.handleStyle.right):null;a&&this.style(this.handleLeftEl,a),l&&this.style(this.handleRightEl,l)}this.updateRender(),this.bindEvents()}formatTime(t,a){return this.formatTimeCallback?this.formatTimeCallback(t,a):(t==a?[t]:[t,a]).map(l=>[Math.floor(l%3600/60),("00"+Math.floor(l%60)).slice(-2)].join(":")).join("-")}getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}updateRender(){const t=this.wavesurfer.getDuration(),a=this.getWidth();let l=this.start,i=this.end;if(l<0&&(l=0,i=i-l),i>t&&(i=t,l=t-(i-l)),this.minLength!=null&&(i=Math.max(l+this.minLength,i)),this.maxLength!=null&&(i=Math.min(l+this.maxLength,i)),this.element!=null){const v=Math.round(l/t*a),u=Math.round(i/t*a)-v;this.setHeight(),this.textLabelEl.textContent=this.formatTimeCallback(this.start,this.end),this.style(this.element,{height:this.regionHeight,top:this.marginTop,left:v+"px",width:u+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"});for(const c in this.attributes)this.element.setAttribute("data-region-"+c,this.attributes[c]);this.element.classList.toggle("looping",this.loop),this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}bindInOut(){this.firedIn=!1,this.firedOut=!1;const t=a=>{let l=Math.round(this.start*10)/10,i=Math.round(this.end*10)/10;a=Math.round(a*10)/10,!this.firedOut&&this.firedIn&&(l>a||i<=a)&&(this.firedOut=!0,this.firedIn=!1,this.fireEvent("out"),this.wavesurfer.fireEvent("region-out",this)),!this.firedIn&&l<=a&&i>a&&(this.firedIn=!0,this.firedOut=!1,this.fireEvent("in"),this.wavesurfer.fireEvent("region-in",this))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",()=>{this.wavesurfer.backend.un("audioprocess",t)}),this.on("out",()=>{if(this.loop){const a=this.wavesurfer.getCurrentTime();a>=this.start&&a<=this.end&&this.wavesurfer.play(this.start)}})}bindEvents(){const t=this.preventContextMenu;this.element.addEventListener("mouseenter",a=>{this.fireEvent("mouseenter",a),this.wavesurfer.fireEvent("region-mouseenter",this,a)}),this.element.addEventListener("mouseleave",a=>{this.fireEvent("mouseleave",a),this.wavesurfer.fireEvent("region-mouseleave",this,a)}),this.element.addEventListener("click",a=>{a.preventDefault(),this.fireEvent("click",a),this.wavesurfer.fireEvent("region-click",this,a)}),this.element.addEventListener("dblclick",a=>{a.stopPropagation(),a.preventDefault(),this.fireEvent("dblclick",a),this.wavesurfer.fireEvent("region-dblclick",this,a)}),this.element.addEventListener("contextmenu",a=>{t&&a.preventDefault(),this.fireEvent("contextmenu",a),this.wavesurfer.fireEvent("region-contextmenu",this,a)}),(this.drag||this.resize)&&this.bindDragEvents(),this.contentEditable&&(this.contentEl.addEventListener("blur",this.onContentBlur.bind(this)),this.contentEl.addEventListener("click",this.onContentClick.bind(this))),this.removeButton&&this.removeButtonEl.addEventListener("click",this.onRemove.bind(this))}bindDragEvents(){const t=this.wavesurfer.drawer.container,a=this.scrollSpeed;let l,i,v,u,c,y=!1,h,A,S,V;const P=x=>{let j=this.util.withOrientation(x,this.vertical);const w=this.wavesurfer.getDuration();if(!h||!v&&!c)return;const p=j.clientX;let m=0,C=0,O=0,W=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(x)*w);if(v)h===-1?(C=S*this.wavesurfer.params.minPxPerSec,m=p-A.left):(C=V*this.wavesurfer.params.minPxPerSec,m=A.right-p);else{let M=this.minLength;M||(M=0),c==="start"?(W>this.end-M&&(W=this.end-M,O=a*h),W<0&&(W=0)):c==="end"&&(W<this.start+M&&(W=this.start+M,O=a*h),W>w&&(W=w))}const B=this.wrapper.scrollLeft;if(h===-1){if(Math.round(B)===0||Math.round(B-C+m)<=0)return}else if(Math.round(B)===u||Math.round(B+C-m)>=u)return;let T=B-O+a*h;if(h===-1){const M=Math.max(0+C-m,T);this.wrapper.scrollLeft=T=M}else{const M=Math.min(u-C+m,T);this.wrapper.scrollLeft=T=M}const _=W-l;l=W,v?this.onDrag(_):this.onResize(_,c),window.requestAnimationFrame(()=>{P(x)})},z=x=>{const j=this.wavesurfer.getDuration();x.touches&&x.touches.length>1||(i=x.targetTouches?x.targetTouches[0].identifier:null,(this.drag||this.resize)&&x.stopPropagation(),l=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(x,!0)*j),S=l-this.start,V=this.end-l,u=this.wrapper.scrollWidth-this.wrapper.clientWidth,A=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.isResizing=!1,this.isDragging=!1,x.target.tagName.toLowerCase()==="handle"?(this.isResizing=!0,c=x.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(this.isDragging=!0,v=!0,c=!1))},R=x=>{x.touches&&x.touches.length>1||((v||c)&&(this.isDragging=!1,this.isResizing=!1,v=!1,h=null,c=!1),y&&(y=!1,this.util.preventClick(),this.fireEvent("update-end",x),this.wavesurfer.fireEvent("region-update-end",this,x)))},L=x=>{const j=this.wavesurfer.getDuration();let w=this.util.withOrientation(x,this.vertical),p=null;if(x.touches&&x.touches.length>1||x.targetTouches&&x.targetTouches[0].identifier!=i||!v&&!c)return;let m=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(x)*j);if(v){const C=this.wavesurfer.getDuration();m>C-V&&(m=C-V),m-S<0&&(m=S)}if(c){let C=this.minLength;C||(C=0),c==="start"?(m>this.end-C&&(m=this.end-C),m<0&&(m=0)):c==="end"&&(m<this.start+C&&(m=this.start+C,p=m-(this.end+(m-l))),m>j&&(m=j))}if(p||(p=m-l),l=m,this.drag&&v&&(y=y||!!p,this.onDrag(p)),this.resize&&c&&(y=y||!!p,this.onResize(p,c)),this.scroll&&t.clientWidth<this.wrapper.scrollWidth){let C=w.clientX;C<A.left+this.edgeScrollWidth?h=-1:C>A.right-this.edgeScrollWidth?h=1:h=null,h&&P(x)}};this.element.addEventListener("mousedown",z),this.element.addEventListener("touchstart",z),document.body.addEventListener("mousemove",L),document.body.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("mouseup",R),document.body.addEventListener("touchend",R),this.on("remove",()=>{document.removeEventListener("mouseup",R),document.body.removeEventListener("touchend",R),document.body.removeEventListener("mousemove",L),document.body.removeEventListener("touchmove",L)}),this.wavesurfer.on("destroy",()=>{document.removeEventListener("mouseup",R),document.body.removeEventListener("touchend",R)})}onDrag(t){const a=this.wavesurfer.getDuration();this.end+t>a&&(t=a-this.end),this.start+t<0&&(t=this.start*-1);let l=null;for(let v of Object.values(this.wavesurfer.regions.list))v.id!==this.id&&(this.channelIdx===v.channelIdx&&(t>0?v.start>=this.end&&(!l||l.start>v.start)&&(l=v):t<0&&v.end<=this.start&&(!l||l.end<v.end)&&(l=v)),v.element.classList.toggle("highlight-start",v.start===this.start||v.start==this.end),v.element.classList.toggle("highlight-end",v.end===this.end||v.end==this.start),v.fadeTimer&&clearTimeout(v.fadeTimer),v.fadeTimer=setTimeout(()=>{v.element.classList.remove("highlight-end"),v.element.classList.remove("highlight-start")},1e3));l!=null&&(t<0?this.start+t<=l.end&&(t=l.end-this.start):t>0&&this.end+t>=l.start&&(t=l.start-this.end));const i={direction:this._getDragDirection(t),action:"drag"};this.update({start:this.regionsUtil.getRegionSnapToGridValue(this.start+t),end:this.regionsUtil.getRegionSnapToGridValue(this.end+t)},i)}_getDragDirection(t){return t<0?"left":t>0?"right":null}onResize(t,a){const l=this.wavesurfer.getDuration(),i={action:"resize",direction:a==="start"?"left":"right"};if(a==="start"){t>0&&this.end-(this.start+t)<this.minLength&&(t=this.end-this.minLength-this.start),t<0&&this.end-(this.start+t)>this.maxLength&&(t=this.end-this.start-this.maxLength),t<0&&this.start+t<0&&(t=this.start*-1);let v=null;if(t<0){for(let u of Object.values(this.wavesurfer.regions.list))u.id!==this.id&&(u.channelIdx==this.channelIdx&&u.end<=this.start&&(!v||v.end<u.end)&&(v=u),u.element.classList.toggle("highlight-start",u.start===this.start),u.element.classList.toggle("highlight-end",u.end==this.start),u.fadeTimer&&clearTimeout(u.fadeTimer),u.fadeTimer=setTimeout(()=>{u.element.classList.remove("highlight-end"),u.element.classList.remove("highlight-start")},1e3));v!=null&&this.start+t<v.end&&(t=v.end-this.start)}this.update({start:this.regionsUtil.getRegionSnapToGridValue(Math.min(this.start+t,this.end)),end:this.regionsUtil.getRegionSnapToGridValue(Math.max(this.start+t,this.end))},i)}else{t<0&&this.end+t-this.start<this.minLength&&(t=this.start+this.minLength-this.end),t>0&&this.end+t-this.start>this.maxLength&&(t=this.maxLength-(this.end-this.start)),t>0&&this.end+t>l&&(t=l-this.end);let v=null;if(t>0){for(let u of Object.values(this.wavesurfer.regions.list))u.id!==this.id&&(u.channelIdx==this.channelIdx&&u.start>=this.end&&(!v||v.start>u.start)&&(v=u),u.element.classList.toggle("highlight-start",u.start===this.end),u.element.classList.toggle("highlight-end",u.end==this.end),u.fadeTimer&&clearTimeout(u.fadeTimer),u.fadeTimer=setTimeout(()=>{u.element.classList.remove("highlight-end"),u.element.classList.remove("highlight-start")},1e3));v!=null&&this.end+t>v.start&&(t=v.start-this.end)}this.update({start:this.regionsUtil.getRegionSnapToGridValue(Math.min(this.end+t,this.start)),end:this.regionsUtil.getRegionSnapToGridValue(Math.max(this.end+t,this.start))},i)}}onContentBlur(t){const{text:a}=this.data||{},l=t.target.innerText,i={...this.data,text:l},v={action:"contentEdited",oldText:a,text:l};this.update({data:i},v)}onContentClick(t){t.stopPropagation()}onRemove(t){t.stopPropagation(),this.remove()}updateHandlesResize(t){let a;t?a=this.vertical?"row-resize":"col-resize":a="auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:a}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:a})}}class pt{static create(t){return{name:"regions",deferInit:t&&t.deferInit?t.deferInit:!1,params:t,staticProps:{addRegion(a){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(a)},clearRegions(){this.regions&&this.regions.clear()},enableDragSelection(a){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(a)},disableDragSelection(){this.regions.disableDragSelection()}},instance:pt}}constructor(t,a){this.params=t,this.wavesurfer=a,this.channelCount=0,this.util={...a.util,getRegionSnapToGridValue:v=>this.getRegionSnapToGridValue(v,t)},this.maxRegions=t.maxRegions,this.regionsMinLength=t.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(v=>{Lt.prototype[v]=this.util.Observer.prototype[v]}),this.wavesurfer.Region=Lt;const i=.05;this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.orientation=this.wavesurfer.drawer.orientation,this.defaultEdgeScrollWidth=this.wrapper.clientWidth*i,this.params.regions&&this.params.regions.forEach(v=>{this.add(v)})},this.list={},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.vertical=this.wavesurfer.drawer.params.vertical,this.params.dragSelection&&this.enableDragSelection(this.params),Object.keys(this.list).forEach(v=>{this.list[v].updateRender()})}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}add(t){if(this.wouldExceedMaxRegions())return null;t={edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,contentEditable:this.params.contentEditable,removeButton:this.params.removeButton,...t},!t.formatTimeCallback&&this.params.formatTimeCallback&&(t={...t,formatTimeCallback:this.params.formatTimeCallback}),!t.minLength&&this.regionsMinLength&&(t={...t,minLength:this.regionsMinLength});const a=new this.wavesurfer.Region(t,this.util,this.wavesurfer);return this.list[a.id]=a,a.on("remove",()=>{delete this.list[a.id]}),a}clear(){Object.keys(this.list).forEach(t=>{this.list[t].remove()})}enableDragSelection(t){this.disableDragSelection();const a=t.slop||2,l=this.wavesurfer.drawer.container,i=t.scroll!==!1&&this.wavesurfer.params.scrollParent,v=t.scrollSpeed||1,u=t.scrollThreshold||10;let c,y=this.wavesurfer.getDuration(),h,A,S,V,P=0,z,R;const L=p=>{if(!S||!z)return;let m=this.wrapper.scrollLeft+v*z;this.wrapper.scrollLeft=m=Math.min(h,Math.max(0,m));const C=this.wavesurfer.drawer.handleEvent(p);S.update({start:Math.min(C*y,A*y),end:Math.max(C*y,A*y)}),m<h&&m>0&&window.requestAnimationFrame(()=>{L(p)})},x=p=>{if(!(p.touches&&p.touches.length>1)){if(y=this.wavesurfer.getDuration(),V=p.targetTouches?p.targetTouches[0].identifier:null,h=this.wrapper.scrollWidth-this.wrapper.clientWidth,R=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.wavesurfer.params.splitChannels&&this.wavesurfer.params.splitChannelsOptions.splitDragSelection){const m=(p.touches?p.touches[0].clientY:p.clientY)-R.top,C=this.channelCount,O=this.wrapper.clientHeight/C,W=Math.floor(m/O);t.channelIdx=W;const B=this.wavesurfer.params.splitChannelsOptions.channelColors[W];B&&B.dragColor&&(t.color=B.dragColor)}c=!0,A=this.wavesurfer.drawer.handleEvent(p,!0),S=null,z=null}};this.wrapper.addEventListener("mousedown",x),this.wrapper.addEventListener("touchstart",x),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchstart",x),this.wrapper.removeEventListener("mousedown",x)});const j=p=>{p.touches&&p.touches.length>1||(c=!1,P=0,z=null,S&&(this.util.preventClick(),S.fireEvent("update-end",p),this.wavesurfer.fireEvent("region-update-end",S,p)),S=null)};this.wrapper.addEventListener("mouseleave",j),this.wrapper.addEventListener("mouseup",j),this.wrapper.addEventListener("touchend",j),document.body.addEventListener("mouseup",j),document.body.addEventListener("touchend",j),this.on("disable-drag-selection",()=>{document.body.removeEventListener("mouseup",j),document.body.removeEventListener("touchend",j),this.wrapper.removeEventListener("touchend",j),this.wrapper.removeEventListener("mouseup",j),this.wrapper.removeEventListener("mouseleave",j)});const w=p=>{if(!c||++P<=a||p.touches&&p.touches.length>1||p.targetTouches&&p.targetTouches[0].identifier!=V||!S&&(S=this.add(t||{}),!S))return;const m=this.wavesurfer.drawer.handleEvent(p),C=this.wavesurfer.regions.util.getRegionSnapToGridValue(A*y),O=this.wavesurfer.regions.util.getRegionSnapToGridValue(m*y);S.update({start:Math.min(O,C),end:Math.max(O,C)});let W=this.util.withOrientation(p,this.vertical);if(i&&l.clientWidth<this.wrapper.scrollWidth){const B=W.clientX-R.left;B<=u?z=-1:B>=R.right-u?z=1:z=null,z&&L(p)}};this.wrapper.addEventListener("mousemove",w),this.wrapper.addEventListener("touchmove",w),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchmove",w),this.wrapper.removeEventListener("mousemove",w)}),this.wavesurfer.on("region-created",p=>{this.regionsMinLength&&(p.minLength=this.regionsMinLength)})}disableDragSelection(){this.fireEvent("disable-drag-selection")}getCurrentRegion(){const t=this.wavesurfer.getCurrentTime();let a=null;return Object.keys(this.list).forEach(l=>{const i=this.list[l];i.start<=t&&i.end>=t&&(!a||i.end-i.start<a.end-a.start)&&(a=i)}),a}getRegionSnapToGridValue(t,a){return a.snapToGridInterval?Math.round(t*100)/100:t}}const $e={audioDataUri:null,selectedRegion:null,audioLoaded:!1,seekPos:0,volume:.5,playing:!1,bashscript:"",paneSize:200,trackId:0,zoomFactor:20},pn=Bi({name:"IndexPage",data(){return{...$e,tracks:[],palette:["rgba(255, 230, 230, 0.7)","rgba(255, 232, 204, 0.7)","rgba(255, 255, 204, 0.7)","rgba(230, 255, 230, 0.7)","rgba(230, 247, 255, 0.7)","rgba(230, 230, 255, 0.7)","rgba(255, 242, 204, 0.7)","rgba(204, 255, 242, 0.7)","rgba(255, 204, 230, 0.7)","rgba(242, 255, 204, 0.7)"]}},methods:{saturate(e,t){const a=Fe.rgbToHsv(Fe.textToRgb(e));return a.s=t,Fe.rgbToHex(Fe.hsvToRgb(a))},downloadScript(){const e=`data:text/plain,${encodeURIComponent(this.bashscript)}`;this.promptDownload("untitled.songsync",e)},promptDownload(e,t){var a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",e),document.body.appendChild(a),a.click(),document.body.removeChild(a)},exportProject(){this.saveState();const e=this.$q.localStorage.getItem("_savedState"),t="data:application/json, "+encodeURIComponent(JSON.stringify(e));this.promptDownload("project.json",t)},saveState(){this.$q.localStorage.set("_savedState",{audioDataUri:this.audioDataUri,tracks:this.tracks,regions:Array.from(Object.values(this.ws.regions.list)).map(e=>({id:e.id,channelIdx:e.channelIdx,start:e.start,end:e.end}))})},loadState(e){e||(e=this.$q.localStorage.getItem("_savedState")||{...$e,tracks:[]}),this.resetProject(),this.audioDataUri=e.audioDataUri,this.tracks=e.tracks,this.trackId=this.tracks.length,this.ws.regions.channelCount=this.tracks.length;let t=()=>{if(this.audioDataUri){this.audioLoaded=!0;for(let a of Object.values(e.regions))this.ws.regions.add({channelIdx:a.channelIdx,id:a.id,start:a.start,end:a.end,color:this.tracks[a.channelIdx].color})}this.ws.un("ready",t),this.saveState()};this.audioDataUri&&(this.ws.on("ready",t),this.ws.load(this.audioDataUri))},changeTrackColor(e,t){e.color=t;for(let a of Object.values(this.ws.regions.list))a.channelIdx==e.id&&(a.color=e.color,a.updateRender());this.saveState()},deleteTrack(e){this.$q.dialog({title:"Delete Effect?",message:"Are you sure?",cancel:!0,persistent:!0}).onOk(()=>{for(let t of Array.from(Object.values(this.ws.regions.list)).filter(a=>a.channelIdx==e.id))t.remove(),this.selectedRegion.id==t.id&&(this.selectedRegion=null);this.tracks.splice(e.id,1),this.tracks.forEach((t,a)=>{t.id!=a&&(Array.from(Object.values(this.ws.regions.list)).forEach(l=>{l.channelIdx==t.id&&(l.channelIdx=a)}),t.id=a)}),this.ws.regions.channelCount-=1,this.redrawRegions(),this.trackId-=1,this.generateScript()})},deleteRegion(){this.selectedRegion.remove(),this.selectedRegion=null},playRegion(){Object.keys(this.ws.regions.list).forEach(e=>{e!=this.selectedRegion.id&&(this.ws.regions.list[e].setLoop(!1),this.ws.regions.list[e].updateRender()),this.selectedRegion.play()})},playRegionLooped(){Object.keys(this.ws.regions.list).forEach(e=>{e!=this.selectedRegion.id&&(this.ws.regions.list[e].setLoop(!1),this.ws.regions.list[e].updateRender())}),this.selectedRegion.playLoop(),this.selectedRegion.updateRender()},newProject(){this.tracks.length>0?this.$q.dialog({title:"Create New Project?",message:"Your current work will be lost.",cancel:!0,persistent:!0}).onOk(()=>{this.resetProject()}):this.resetProject()},resetProject(){for(let e of Object.keys($e))this[e]=$e[e];this.tracks=[],this.ws.clearRegions(),this.ws.setVolume(this.volume),this.ws.zoom(this.zoomFactor),this.ws.empty()},seekTo(e){this.ws.seekAndCenter(Math.min(1,parseFloat(e)/this.ws.getDuration()))},seekToStart(){this.ws.seekAndCenter(0)},seekToEnd(){this.ws.seekAndCenter(1)},playPause(){if(this.playing=!this.playing,this.playing||this.tracks.forEach(e=>{e.playing=!1}),!this.playing)for(let e of Object.values(this.ws.regions.list))e.setLoop(!1),e.updateRender();this.ws.playPause()},setVolume(e){this.ws.setVolume(e)},renameTrack(e,t){e.target.blur(),t.label=e.target.textContent,this.generateScript()},copyToClipboard(){navigator.clipboard.writeText(this.bashscript)},uploadAudio(){document.getElementById("audioInput").click()},onAudioUploaded(e){this.audioLoaded=!0;const t=new FileReader;t.addEventListener("load",a=>{this.audioDataUri=a.target.result,console.log("saving");let l=()=>{this.saveState(),this.ws.un("ready",l)};this.ws.on("ready",l),this.ws.load(this.audioDataUri)}),t.readAsDataURL(e.target.files[0])},uploadProject(){document.getElementById("projectInput").click()},onProjectUploaded(e){let t=new FileReader;e.target,t.addEventListener("load",a=>{let l=JSON.parse(a.target.result);this.loadState(l)}),t.readAsText(e.target.files[0])},uploadCfg(){document.getElementById("cfgInput").click()},onCfgUploaded(e){let t=new FileReader;const a=e.target;t.addEventListener("load",l=>{let i=l.target.result.split(`
`);for(let v of i){let u=v.match(/^\[led_effect\s+([^\]]+)\]$/i);u!=null&&this.addTrack(u[1])}a.value=null}),t.readAsText(e.target.files[0])},generateScript(){this.bashscript="";let e=new Map;for(let l of Object.values(this.ws.regions.list))e.has(l.start)||e.set(l.start,[]),e.has(l.end)||e.set(l.end,[]),e.get(l.end).unshift({action:"end",region:this.tracks[l.channelIdx]}),e.get(l.start).push({action:"start",region:this.tracks[l.channelIdx]});let t=Array.from(e.keys());t.sort((l,i)=>l-i);let a=0;for(;t.length>0;){let l=t.shift(),i=Math.round((l-a)*100)/100;i!=0&&(this.bashscript+=`sleep:${i}
`);for(let v of e.get(l))this.bashscript+=`${v.action=="start"?"on":"off"}:${v.region.label}
`;a=l}this.saveState()},insertRegion(e){let t=this.ws.getCurrentTime();for(let a of Object.values(this.ws.regions.list))if(a.channelIdx==e.id&&a.start<=t&&a.end>=t)return;this.ws.regions.add({channelIdx:e.id,color:e.color,start:Math.round(this.ws.getCurrentTime()*100)/100,end:Math.round(this.ws.getCurrentTime()*100)/100+.5})},onResize(e){this.ws&&e.height!=this.ws.getHeight()&&this.ws.setHeight(e.height)},nextTrackId(){return this.trackId++},setZoom(e){this.zoomFactor=e,this.ws.zoom(e)},addTrack(e){let t=this.nextTrackId();this.tracks.push({id:t,label:e||`effect_${t}`,color:this.palette[t%this.palette.length]}),this.ws.regions.channelCount+=1,Object.values(this.ws.regions.list).forEach(a=>a.updateRender())},redrawRegions(){Object.keys(this.ws.regions.list).forEach(e=>{this.ws.regions.list[e].updateRender()})}},mounted(){this.ws=mn.create({container:".waveform",scrollParent:!0,responsive:!0,waveColor:"#999",progressColor:"#999",plugins:[pt.create({regionsMinLength:.01,snapToGridInterval:.01,style:{},formatTimeCallback:(e,t)=>`${e}s-${t}s`})]}),this.ws.on("play",e=>{console.log("play"),this.playing=!0}),this.ws.on("pause",e=>{console.log("pause"),this.playing=!1}),this.ws.on("seek",e=>{this.seekPos=(Math.round(this.ws.getCurrentTime()*100)/100).toFixed(2)}),this.ws.on("audioprocess",e=>{this.seekPos=(Math.round(this.ws.getCurrentTime()*100)/100).toFixed(2)}),this.ws.on("region-in",e=>{this.tracks[e.channelIdx].playing=!0}),this.ws.on("region-out",e=>{this.tracks[e.channelIdx].playing=!1}),this.ws.on("region-updated",st(this.generateScript,300)),this.ws.on("region-removed",st(this.generateScript,300)),this.ws.on("region-created",st(this.generateScript,300)),this.ws.on("region-created",e=>{this.selectedRegion&&this.selectedRegion.element.classList.remove("selected"),this.selectedRegion=e,e.element.classList.add("selected")}),this.ws.on("region-click",(e,t)=>{console.log(t);let a=!1;this.selectedRegion&&(a=this.selectedRegion.id==e.id,this.selectedRegion.element.classList.remove("selected")),this.selectedRegion=e,e.element.classList.add("selected"),a||(t.preventDefault(),t.stopPropagation())}),this.loadState()},beforeUnmount(){}}),gn={class:"tracklist"},yn=ce("div",{class:"vert-separator"},null,-1),bn=ce("div",{class:"waveform"},null,-1),wn={style:{width:"10vw"},class:"row q-mr-lg"},kn=ce("div",{class:"col-1"},null,-1),Cn=ce("div",{class:"col-1"},null,-1),Pn={style:{width:"10vw"},class:"row"},An=ce("div",{class:"col-1"},null,-1),En=ce("div",{class:"col-1"},null,-1),Sn=["value"];function _n(e,t,a,l,i,v){return Ee(),qe(nn,{class:"flex column"},{default:F(()=>[I(He,{class:"bg-secondary text-white"},{default:F(()=>[I(de,{dense:"",flat:""},{default:F(()=>[ie("Project "),I(Ne,{autoClose:""},{default:F(()=>[I(ze,{dense:""},{default:F(()=>[I(he,{clickable:"",onClick:e.newProject},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"add_chart"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("New Project...")]),_:1}),I(fe,{caption:""},{default:F(()=>[ie("Clear everything and start a new project")]),_:1})]),_:1})]),_:1},8,["onClick"]),I(ot),I(he,{clickable:"",onClick:e.uploadAudio},{default:F(()=>[ce("input",{type:"file",id:"audioInput",style:{display:"none"},onChange:t[0]||(t[0]=(...u)=>e.onAudioUploaded&&e.onAudioUploaded(...u))},null,32),I(te,{side:""},{default:F(()=>[I(oe,{name:"library_music"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Load Audio...")]),_:1}),I(fe,{caption:""},{default:F(()=>[ie("Upload a new audio track")]),_:1})]),_:1})]),_:1},8,["onClick"]),I(he,{clickable:"",onClick:e.uploadCfg},{default:F(()=>[ce("input",{type:"file",id:"cfgInput",style:{display:"none"},onChange:t[1]||(t[1]=(...u)=>e.onCfgUploaded&&e.onCfgUploaded(...u))},null,32),I(te,{side:""},{default:F(()=>[I(oe,{name:"blur_on"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Load Effects...")]),_:1}),I(fe,{caption:""},{default:F(()=>[ie("Import effect names from a klipper config file")]),_:1})]),_:1})]),_:1},8,["onClick"]),I(ot),I(he,{clickable:"",onClick:e.uploadProject},{default:F(()=>[ce("input",{type:"file",id:"projectInput",style:{display:"none"},onChange:t[2]||(t[2]=(...u)=>e.onProjectUploaded&&e.onProjectUploaded(...u))},null,32),I(te,{side:""},{default:F(()=>[I(oe,{name:"upload"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Import Project...")]),_:1})]),_:1})]),_:1},8,["onClick"]),I(he,{clickable:"",onClick:e.exportProject},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"download"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Export Project...")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),I(de,{dense:"",flat:"",disable:!e.selectedRegion},{default:F(()=>[ie("Region "),I(Ne,{autoClose:""},{default:F(()=>[I(ze,{dense:""},{default:F(()=>[I(he,{clickable:"",onClick:e.deleteRegion},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"delete"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Delete")]),_:1})]),_:1})]),_:1},8,["onClick"]),I(he,{clickable:"",onClick:e.playRegion},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"play_arrow"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Play")]),_:1})]),_:1})]),_:1},8,["onClick"]),I(he,{clickable:"",onClick:e.playRegionLooped},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"repeat"})]),_:1}),I(te,null,{default:F(()=>[I(fe,null,{default:F(()=>[ie("Play looped")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["disable"])]),_:1}),I(Ki,{modelValue:e.paneSize,"onUpdate:modelValue":t[3]||(t[3]=u=>e.paneSize=u),unit:"px"},{before:F(()=>[ce("div",gn,[(Ee(!0),kt(Pt,null,Ct(e.tracks,u=>(Ee(),qe(He,{class:Vi(["track-title",u.playing?"track-playing":null]),key:u.id,style:At(`background-color: ${u.playing?e.saturate(u.color,50):u.color};`)},{default:F(()=>[I(Ni,{contenteditable:"true",onKeydown:ji(c=>e.renameTrack(c,u),["enter"])},{default:F(()=>[ie(Ii(u.label),1)]),_:2},1032,["onKeydown"]),I(de,{flat:"",round:"",dense:"",icon:"add",onClick:c=>e.insertRegion(u)},null,8,["onClick"]),I(de,{flat:"",round:"",dense:"",icon:"more_vert"},{default:F(()=>[I(Ne,null,{default:F(()=>[I(ze,{dense:""},{default:F(()=>[qi((Ee(),qe(he,{clickable:"",onClick:()=>e.deleteTrack(u)},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"delete"})]),_:1}),I(te,null,{default:F(()=>[ie("Delete Effect")]),_:1})]),_:2},1032,["onClick"])),[[rn]]),I(he,{clickable:""},{default:F(()=>[I(te,{side:""},{default:F(()=>[I(oe,{name:"palette"})]),_:1}),I(te,null,{default:F(()=>[ie("Change Color")]),_:1}),I(te,{side:""},{default:F(()=>[I(oe,{name:"arrow_right"})]),_:1}),I(Ne,{"auto-close":"",anchor:"top end",self:"top start"},{default:F(()=>[I(ze,null,{default:F(()=>[(Ee(!0),kt(Pt,null,Ct(e.palette,c=>(Ee(),qe(he,{key:c,dense:"",clickable:"",style:At(`background-color: ${c}`),onClick:y=>e.changeTrackColor(u,c)},null,8,["style","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","style"]))),128)),I(zi,{onResize:e.onResize},null,8,["onResize"])])]),separator:F(()=>[yn]),after:F(()=>[bn]),_:1},8,["modelValue"]),I(He,{class:"bg-secondary text-white"},{default:F(()=>[I(de,{flat:"",dense:"",onClick:t[4]||(t[4]=()=>e.addTrack()),icon:"add"},{default:F(()=>[ie("Effect")]),_:1}),I(ct),I(de,{disable:!e.audioLoaded,flat:"",dense:"",onClick:e.seekToStart,icon:"skip_previous"},null,8,["disable","onClick"]),I(de,{disable:!e.audioLoaded,flat:"",dense:"",onClick:e.playPause,icon:e.playing?"pause":"play_arrow"},null,8,["disable","onClick","icon"]),I(de,{disable:!e.audioLoaded,flat:"",dense:"",onClick:e.seekToEnd,icon:"skip_next"},null,8,["disable","onClick"]),I(ct),I(Wi,{disable:!e.audioLoaded,dense:"",rounded:"",standout:"","input-class":"text-white text-right","model-value":e.seekPos,"onUpdate:modelValue":e.seekTo,color:"secondary"},{append:F(()=>[I(oe,{name:"schedule",size:"xs",color:"white"})]),_:1},8,["disable","model-value","onUpdate:modelValue"]),ce("div",wn,[I(oe,{size:"sm",name:"volume_down",class:"col-1"}),kn,I(Tt,{step:.01,class:"col-8",color:"white",min:0,max:1,modelValue:e.volume,"onUpdate:modelValue":e.setVolume},null,8,["step","modelValue","onUpdate:modelValue"]),Cn,I(oe,{size:"sm",name:"volume_up",class:"col-1"})]),ce("div",Pn,[I(oe,{size:"sm",name:"zoom_out",class:"col-1"}),An,I(Tt,{disable:!e.audioLoaded,class:"col-8",color:"white",min:20,max:500,modelValue:e.zoomFactor,"onUpdate:modelValue":e.setZoom},null,8,["disable","modelValue","onUpdate:modelValue"]),En,I(oe,{size:"sm",name:"zoom_in",class:"col-1"})])]),_:1}),I(ot),I(He,null,{default:F(()=>[I(de,{flat:"",dense:"",round:"",onClick:e.generateScript,icon:"refresh"},{default:F(()=>[I(dt,null,{default:F(()=>[ie("Regenerate Script")]),_:1})]),_:1},8,["onClick"]),I(de,{icon:"content_copy",flat:"",dense:"",onClick:e.copyToClipboard},{default:F(()=>[I(dt,null,{default:F(()=>[ie(" Copy script to clipboard ")]),_:1})]),_:1},8,["onClick"]),I(de,{flat:"",dense:"",round:"",icon:"download",onClick:e.downloadScript},{default:F(()=>[I(dt,null,{default:F(()=>[ie(" Download script ")]),_:1})]),_:1},8,["onClick"]),I(ct),I(de,{flat:"",dense:"",icon:"download",label:"Download Player",download:"player.py",href:"./player.py"})]),_:1}),ce("textarea",{readonly:"",value:e.bashscript,style:{"font-family":"Courier","flex-grow":"1",width:"100%",resize:"none"}},`
    `,8,Sn)]),_:1})}var On=Di(pn,[["render",_n]]);export{On as default};
