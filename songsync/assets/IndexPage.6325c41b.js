import{c as pe,a as H,h as Z,b as ge,H as Te,I as fi,J as Me,K as hi,r as se,g as ye,L as mt,M as Ve,d as vi,P as mi,N as Qe,G as Bt,O as ke,w as me,j as pi,o as Oe,Q as xe,m as ht,R as bt,S as _e,u as gi,T as Wt,U as Vt,V as jt,W as It,X as qt,Y as zt,Z as Nt,$ as Ht,a0 as yi,a1 as We,a2 as bi,a3 as wt,k as Ft,a4 as wi,a5 as $t,a6 as ki,a7 as Ci,a8 as Pi,a9 as Ut,n as Ai,aa as Ei,ab as rt,ac as at,ad as Qt,y as Si,ae as _i,af as st,ag as Ri,ah as xi,ai as Oi,i as kt,e as Ee,l as Ti,f as Mi,aj as Li,ak as Di,_ as Bi,z as Wi,al as ot,B as Se,C as ze,D as $,E as q,am as fe,F as ne,an as le,ao as lt,ap as de,aq as Ct,ar as Pt,as as At,at as Vi,au as ji,av as Et,aw as Ii,ax as qi,ay as zi}from"./index.bae76a81.js";import{Q as Ni,a as Hi}from"./QResizeObserver.18c8c93d.js";var ie=pe({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:i}){const s=H(()=>`q-item__section column q-item__section--${t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main"}`+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>Z("div",{class:s.value},ge(i.default))}}),he=pe({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:i}){const s=H(()=>parseInt(t.lines,10)),u=H(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(s.value===1?" ellipsis":"")),n=H(()=>t.lines!==void 0&&s.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":s.value}:null);return()=>Z("div",{style:n.value,class:u.value},ge(i.default))}}),ve=pe({name:"QItem",props:{...Te,...fi,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:i,emit:s}){const{proxy:{$q:u}}=ye(),n=Me(t,u),{hasLink:m,linkAttrs:c,linkClass:d,linkTag:b,navigateOnClick:v}=hi(),E=se(null),_=se(null),j=H(()=>t.clickable===!0||m.value===!0||t.tag==="label"),A=H(()=>t.disable!==!0&&j.value===!0),N=H(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(n.value===!0?" q-item--dark":"")+(m.value===!0&&t.active===null?d.value:t.active===!0?` q-item--active${t.activeClass!==void 0?` ${t.activeClass}`:""}`:"")+(t.disable===!0?" disabled":"")+(A.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),x=H(()=>{if(t.insetLevel===void 0)return null;const k=u.lang.rtl===!0?"Right":"Left";return{["padding"+k]:16+t.insetLevel*56+"px"}});function D(k){A.value===!0&&(_.value!==null&&(k.qKeyEvent!==!0&&document.activeElement===E.value?_.value.focus():document.activeElement===_.value&&E.value.focus()),v(k))}function O(k){if(A.value===!0&&mt(k,13)===!0){Ve(k),k.qKeyEvent=!0;const g=new MouseEvent("click",k);g.qKeyEvent=!0,E.value.dispatchEvent(g)}s("keyup",k)}function I(){const k=vi(i.default,[]);return A.value===!0&&k.unshift(Z("div",{class:"q-focus-helper",tabindex:-1,ref:_})),k}return()=>{const k={ref:E,class:N.value,style:x.value,role:"listitem",onClick:D,onKeyup:O};return A.value===!0?(k.tabindex=t.tabindex||"0",Object.assign(k,c.value)):j.value===!0&&(k["aria-disabled"]="true"),Z(b.value,k,I())}}}),Ne=pe({name:"QList",props:{...Te,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:i}){const s=ye(),u=Me(t,s.proxy.$q),n=H(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(u.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>Z(t.tag,{class:n.value},ge(i.default))}});function Ke(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),mi.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Kt={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Gt({showing:t,avoidEmit:i,configureAnchorEl:s}){const{props:u,proxy:n,emit:m}=ye(),c=se(null);let d=null;function b(A){return c.value===null?!1:A===void 0||A.touches===void 0||A.touches.length<=1}const v={};s===void 0&&(Object.assign(v,{hide(A){n.hide(A)},toggle(A){n.toggle(A),A.qAnchorHandled=!0},toggleKey(A){mt(A,13)===!0&&v.toggle(A)},contextClick(A){n.hide(A),Qe(A),Bt(()=>{n.show(A),A.qAnchorHandled=!0})},prevent:Qe,mobileTouch(A){if(v.mobileCleanup(A),b(A)!==!0)return;n.hide(A),c.value.classList.add("non-selectable");const N=A.target;ke(v,"anchor",[[N,"touchmove","mobileCleanup","passive"],[N,"touchend","mobileCleanup","passive"],[N,"touchcancel","mobileCleanup","passive"],[c.value,"contextmenu","prevent","notPassive"]]),d=setTimeout(()=>{d=null,n.show(A),A.qAnchorHandled=!0},300)},mobileCleanup(A){c.value.classList.remove("non-selectable"),d!==null&&(clearTimeout(d),d=null),t.value===!0&&A!==void 0&&Ke()}}),s=function(A=u.contextMenu){if(u.noParentEvent===!0||c.value===null)return;let N;A===!0?n.$q.platform.is.mobile===!0?N=[[c.value,"touchstart","mobileTouch","passive"]]:N=[[c.value,"mousedown","hide","passive"],[c.value,"contextmenu","contextClick","notPassive"]]:N=[[c.value,"click","toggle","passive"],[c.value,"keyup","toggleKey","passive"]],ke(v,"anchor",N)});function E(){xe(v,"anchor")}function _(A){for(c.value=A;c.value.classList.contains("q-anchor--skip");)c.value=c.value.parentNode;s()}function j(){if(u.target===!1||u.target===""||n.$el.parentNode===null)c.value=null;else if(u.target===!0)_(n.$el.parentNode);else{let A=u.target;if(typeof u.target=="string")try{A=document.querySelector(u.target)}catch{A=void 0}A!=null?(c.value=A.$el||A,s()):(c.value=null,console.error(`Anchor: target "${u.target}" not found`))}}return me(()=>u.contextMenu,A=>{c.value!==null&&(E(),s(A))}),me(()=>u.target,()=>{c.value!==null&&E(),j()}),me(()=>u.noParentEvent,A=>{c.value!==null&&(A===!0?E():s())}),pi(()=>{j(),i!==!0&&u.modelValue===!0&&c.value===null&&m("update:modelValue",!1)}),Oe(()=>{d!==null&&clearTimeout(d),E()}),{anchorEl:c,canShow:b,anchorEvents:v}}function Xt(t,i){const s=se(null);let u;function n(d,b){const v=`${b!==void 0?"add":"remove"}EventListener`,E=b!==void 0?b:u;d!==window&&d[v]("scroll",E,ht.passive),window[v]("scroll",E,ht.passive),u=b}function m(){s.value!==null&&(n(s.value),s.value=null)}const c=me(()=>t.noParentEvent,()=>{s.value!==null&&(m(),i())});return Oe(c),{localScrollTarget:s,unconfigureScrollTarget:m,changeScrollEvent:n}}const{notPassiveCapture:Ge}=ht,Pe=[];function Xe(t){const i=t.target;if(i===void 0||i.nodeType===8||i.classList.contains("no-pointer-events")===!0)return;let s=bt.length-1;for(;s>=0;){const u=bt[s].$;if(u.type.name!=="QDialog")break;if(u.props.seamless!==!0)return;s--}for(let u=Pe.length-1;u>=0;u--){const n=Pe[u];if((n.anchorEl.value===null||n.anchorEl.value.contains(i)===!1)&&(i===document.body||n.innerRef.value!==null&&n.innerRef.value.contains(i)===!1))t.qClickOutside=!0,n.onClickOutside(t);else return}}function Yt(t){Pe.push(t),Pe.length===1&&(document.addEventListener("mousedown",Xe,Ge),document.addEventListener("touchstart",Xe,Ge))}function Ye(t){const i=Pe.findIndex(s=>s===t);i>-1&&(Pe.splice(i,1),Pe.length===0&&(document.removeEventListener("mousedown",Xe,Ge),document.removeEventListener("touchstart",Xe,Ge)))}let St,_t;function Je(t){const i=t.split(" ");return i.length!==2?!1:["top","center","bottom"].includes(i[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(i[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Jt(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const vt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{vt[`${t}#ltr`]=t,vt[`${t}#rtl`]=t});function Ze(t,i){const s=t.split(" ");return{vertical:s[0],horizontal:vt[`${s[1]}#${i===!0?"rtl":"ltr"}`]}}function Fi(t,i){let{top:s,left:u,right:n,bottom:m,width:c,height:d}=t.getBoundingClientRect();return i!==void 0&&(s-=i[1],u-=i[0],m+=i[1],n+=i[0],c+=i[0],d+=i[1]),{top:s,bottom:m,height:d,left:u,right:n,width:c,middle:u+(n-u)/2,center:s+(m-s)/2}}function $i(t,i,s){let{top:u,left:n}=t.getBoundingClientRect();return u+=i.top,n+=i.left,s!==void 0&&(u+=s[1],n+=s[0]),{top:u,bottom:u+1,height:1,left:n,right:n+1,width:1,middle:n,center:u}}function Ui(t){return{top:0,center:t.offsetHeight/2,bottom:t.offsetHeight,left:0,middle:t.offsetWidth/2,right:t.offsetWidth}}function Rt(t,i,s){return{top:t[s.anchorOrigin.vertical]-i[s.selfOrigin.vertical],left:t[s.anchorOrigin.horizontal]-i[s.selfOrigin.horizontal]}}function Zt(t){if(_e.is.ios===!0&&window.visualViewport!==void 0){const d=document.body.style,{offsetLeft:b,offsetTop:v}=window.visualViewport;b!==St&&(d.setProperty("--q-pe-left",b+"px"),St=b),v!==_t&&(d.setProperty("--q-pe-top",v+"px"),_t=v)}const{scrollLeft:i,scrollTop:s}=t.el,u=t.absoluteOffset===void 0?Fi(t.anchorEl,t.cover===!0?[0,0]:t.offset):$i(t.anchorEl,t.absoluteOffset,t.offset);let n={maxHeight:t.maxHeight,maxWidth:t.maxWidth,visibility:"visible"};(t.fit===!0||t.cover===!0)&&(n.minWidth=u.width+"px",t.cover===!0&&(n.minHeight=u.height+"px")),Object.assign(t.el.style,n);const m=Ui(t.el);let c=Rt(u,m,t);if(t.absoluteOffset===void 0||t.offset===void 0)ut(c,u,m,t.anchorOrigin,t.selfOrigin);else{const{top:d,left:b}=c;ut(c,u,m,t.anchorOrigin,t.selfOrigin);let v=!1;if(c.top!==d){v=!0;const E=2*t.offset[1];u.center=u.top-=E,u.bottom-=E+2}if(c.left!==b){v=!0;const E=2*t.offset[0];u.middle=u.left-=E,u.right-=E+2}v===!0&&(c=Rt(u,m,t),ut(c,u,m,t.anchorOrigin,t.selfOrigin))}n={top:c.top+"px",left:c.left+"px"},c.maxHeight!==void 0&&(n.maxHeight=c.maxHeight+"px",u.height>c.maxHeight&&(n.minHeight=n.maxHeight)),c.maxWidth!==void 0&&(n.maxWidth=c.maxWidth+"px",u.width>c.maxWidth&&(n.minWidth=n.maxWidth)),Object.assign(t.el.style,n),t.el.scrollTop!==s&&(t.el.scrollTop=s),t.el.scrollLeft!==i&&(t.el.scrollLeft=i)}function ut(t,i,s,u,n){const m=s.bottom,c=s.right,d=gi(),b=window.innerHeight-d,v=document.body.clientWidth;if(t.top<0||t.top+m>b)if(n.vertical==="center")t.top=i[u.vertical]>b/2?Math.max(0,b-m):0,t.maxHeight=Math.min(m,b);else if(i[u.vertical]>b/2){const E=Math.min(b,u.vertical==="center"?i.center:u.vertical===n.vertical?i.bottom:i.top);t.maxHeight=Math.min(m,E),t.top=Math.max(0,E-m)}else t.top=Math.max(0,u.vertical==="center"?i.center:u.vertical===n.vertical?i.top:i.bottom),t.maxHeight=Math.min(m,b-t.top);if(t.left<0||t.left+c>v)if(t.maxWidth=Math.min(c,v),n.horizontal==="middle")t.left=i[u.horizontal]>v/2?Math.max(0,v-c):0;else if(i[u.horizontal]>v/2){const E=Math.min(v,u.horizontal==="middle"?i.middle:u.horizontal===n.horizontal?i.right:i.left);t.maxWidth=Math.min(c,E),t.left=Math.max(0,E-t.maxWidth)}else t.left=Math.max(0,u.horizontal==="middle"?i.middle:u.horizontal===n.horizontal?i.left:i.right),t.maxWidth=Math.min(c,v-t.left)}var He=pe({name:"QMenu",inheritAttrs:!1,props:{...Kt,...Wt,...Te,...Vt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Je},self:{type:String,validator:Je},offset:{type:Array,validator:Jt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...jt,"click","escapeKey"],setup(t,{slots:i,emit:s,attrs:u}){let n=null,m,c,d;const b=ye(),{proxy:v}=b,{$q:E}=v,_=se(null),j=se(!1),A=H(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),N=Me(t,E),{registerTick:x,removeTick:D}=It(),{registerTimeout:O}=qt(),{transitionProps:I,transitionStyle:k}=zt(t),{localScrollTarget:g,changeScrollEvent:p,unconfigureScrollTarget:P}=Xt(t,B),{anchorEl:T,canShow:V}=Gt({showing:j}),{hide:W}=Nt({showing:j,canShow:V,handleShow:h,handleHide:r,hideOnRouteChange:A,processOnMount:!0}),{showPortal:M,hidePortal:R,renderPortal:L}=Ht(b,_,K,"menu"),C={anchorEl:T,innerRef:_,onClickOutside(Q){if(t.persistent!==!0&&j.value===!0)return W(Q),(Q.type==="touchstart"||Q.target.classList.contains("q-dialog__backdrop"))&&Ve(Q),!0}},l=H(()=>Ze(t.anchor||(t.cover===!0?"center middle":"bottom start"),E.lang.rtl)),f=H(()=>t.cover===!0?l.value:Ze(t.self||"top start",E.lang.rtl)),w=H(()=>(t.square===!0?" q-menu--square":"")+(N.value===!0?" q-menu--dark q-dark":"")),o=H(()=>t.autoClose===!0?{onClick:U}:{}),a=H(()=>j.value===!0&&t.persistent!==!0);me(a,Q=>{Q===!0?(ki(G),Yt(C)):(wt(G),Ye(C))});function y(){Ci(()=>{let Q=_.value;Q&&Q.contains(document.activeElement)!==!0&&(Q=Q.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||Q.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||Q.querySelector("[autofocus], [data-autofocus]")||Q,Q.focus({preventScroll:!0}))})}function h(Q){if(n=t.noRefocus===!1?document.activeElement:null,yi(F),M(),B(),m=void 0,Q!==void 0&&(t.touchPosition||t.contextMenu)){const re=We(Q);if(re.left!==void 0){const{top:J,left:ue}=T.value.getBoundingClientRect();m={left:re.left-ue,top:re.top-J}}}c===void 0&&(c=me(()=>E.screen.width+"|"+E.screen.height+"|"+t.self+"|"+t.anchor+"|"+E.lang.rtl,X)),t.noFocus!==!0&&document.activeElement.blur(),x(()=>{X(),t.noFocus!==!0&&y()}),O(()=>{E.platform.is.ios===!0&&(d=t.autoClose,_.value.click()),X(),M(!0),s("show",Q)},t.transitionDuration)}function r(Q){D(),R(),S(!0),n!==null&&(Q===void 0||Q.qClickOutside!==!0)&&(((Q&&Q.type.indexOf("key")===0?n.closest('[tabindex]:not([tabindex^="-"])'):void 0)||n).focus(),n=null),O(()=>{R(!0),s("hide",Q)},t.transitionDuration)}function S(Q){m=void 0,c!==void 0&&(c(),c=void 0),(Q===!0||j.value===!0)&&(bi(F),P(),Ye(C),wt(G)),Q!==!0&&(n=null)}function B(){(T.value!==null||t.scrollTarget!==void 0)&&(g.value=Ft(T.value,t.scrollTarget),p(g.value,X))}function U(Q){d!==!0?(wi(v,Q),s("click",Q)):d=!1}function F(Q){a.value===!0&&t.noFocus!==!0&&Pi(_.value,Q.target)!==!0&&y()}function G(Q){s("escapeKey"),W(Q)}function X(){const Q=_.value;Q===null||T.value===null||Zt({el:Q,offset:t.offset,anchorEl:T.value,anchorOrigin:l.value,selfOrigin:f.value,absoluteOffset:m,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function K(){return Z($t,I.value,()=>j.value===!0?Z("div",{role:"menu",...u,ref:_,tabindex:-1,class:["q-menu q-position-engine scroll"+w.value,u.class],style:[u.style,k.value],...o.value},ge(i.default)):null)}return Oe(S),Object.assign(v,{focus:y,updatePosition:X}),L}}),Fe=pe({name:"QBar",props:{...Te,dense:Boolean},setup(t,{slots:i}){const{proxy:{$q:s}}=ye(),u=Me(t,s),n=H(()=>`q-bar row no-wrap items-center q-bar--${t.dense===!0?"dense":"standard"}  q-bar--${u.value===!0?"dark":"light"}`);return()=>Z("div",{class:n.value,role:"toolbar"},ge(i.default))}});const pt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Qi=Object.keys(pt);pt.all=!0;function xt(t){const i={};for(const s of Qi)t[s]===!0&&(i[s]=!0);return Object.keys(i).length===0?pt:(i.horizontal===!0?i.left=i.right=!0:i.left===!0&&i.right===!0&&(i.horizontal=!0),i.vertical===!0?i.up=i.down=!0:i.up===!0&&i.down===!0&&(i.vertical=!0),i.horizontal===!0&&i.vertical===!0&&(i.all=!0),i)}function Ot(t,i){return i.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof i.handler=="function"&&t.target.nodeName.toUpperCase()!=="INPUT"&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(i.uid)===-1)}function ct(t,i,s){const u=We(t);let n,m=u.left-i.event.x,c=u.top-i.event.y,d=Math.abs(m),b=Math.abs(c);const v=i.direction;v.horizontal===!0&&v.vertical!==!0?n=m<0?"left":"right":v.horizontal!==!0&&v.vertical===!0?n=c<0?"up":"down":v.up===!0&&c<0?(n="up",d>b&&(v.left===!0&&m<0?n="left":v.right===!0&&m>0&&(n="right"))):v.down===!0&&c>0?(n="down",d>b&&(v.left===!0&&m<0?n="left":v.right===!0&&m>0&&(n="right"))):v.left===!0&&m<0?(n="left",d<b&&(v.up===!0&&c<0?n="up":v.down===!0&&c>0&&(n="down"))):v.right===!0&&m>0&&(n="right",d<b&&(v.up===!0&&c<0?n="up":v.down===!0&&c>0&&(n="down")));let E=!1;if(n===void 0&&s===!1){if(i.event.isFirst===!0||i.event.lastDir===void 0)return{};n=i.event.lastDir,E=!0,n==="left"||n==="right"?(u.left-=m,d=0,m=0):(u.top-=c,b=0,c=0)}return{synthetic:E,payload:{evt:t,touch:i.event.mouse!==!0,mouse:i.event.mouse===!0,position:u,direction:n,isFirst:i.event.isFirst,isFinal:s===!0,duration:Date.now()-i.event.time,distance:{x:d,y:b},offset:{x:m,y:c},delta:{x:u.left-i.event.lastX,y:u.top-i.event.lastY}}}}let Ki=0;var ei=Ut({name:"touch-pan",beforeMount(t,{value:i,modifiers:s}){if(s.mouse!==!0&&_e.has.touch!==!0)return;function u(m,c){s.mouse===!0&&c===!0?Ve(m):(s.stop===!0&&at(m),s.prevent===!0&&Qe(m))}const n={uid:"qvtp_"+Ki++,handler:i,modifiers:s,direction:xt(s),noop:Ai,mouseStart(m){Ot(m,n)&&Ei(m)&&(ke(n,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),n.start(m,!0))},touchStart(m){if(Ot(m,n)){const c=m.target;ke(n,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),n.start(m)}},start(m,c){if(_e.is.firefox===!0&&rt(t,!0),n.lastEvt=m,c===!0||s.stop===!0){if(n.direction.all!==!0&&(c!==!0||n.modifiers.mouseAllDir!==!0&&n.modifiers.mousealldir!==!0)){const v=m.type.indexOf("mouse")>-1?new MouseEvent(m.type,m):new TouchEvent(m.type,m);m.defaultPrevented===!0&&Qe(v),m.cancelBubble===!0&&at(v),Object.assign(v,{qKeyEvent:m.qKeyEvent,qClickOutside:m.qClickOutside,qAnchorHandled:m.qAnchorHandled,qClonedBy:m.qClonedBy===void 0?[n.uid]:m.qClonedBy.concat(n.uid)}),n.initialEvent={target:m.target,event:v}}at(m)}const{left:d,top:b}=We(m);n.event={x:d,y:b,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:b}},move(m){if(n.event===void 0)return;const c=We(m),d=c.left-n.event.x,b=c.top-n.event.y;if(d===0&&b===0)return;n.lastEvt=m;const v=n.event.mouse===!0,E=()=>{u(m,v);let A;s.preserveCursor!==!0&&s.preservecursor!==!0&&(A=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),v===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ke(),n.styleCleanup=N=>{if(n.styleCleanup=void 0,A!==void 0&&(document.documentElement.style.cursor=A),document.body.classList.remove("non-selectable"),v===!0){const x=()=>{document.body.classList.remove("no-pointer-events--children")};N!==void 0?setTimeout(()=>{x(),N()},50):x()}else N!==void 0&&N()}};if(n.event.detected===!0){n.event.isFirst!==!0&&u(m,n.event.mouse);const{payload:A,synthetic:N}=ct(m,n,!1);A!==void 0&&(n.handler(A)===!1?n.end(m):(n.styleCleanup===void 0&&n.event.isFirst===!0&&E(),n.event.lastX=A.position.left,n.event.lastY=A.position.top,n.event.lastDir=N===!0?void 0:A.direction,n.event.isFirst=!1));return}if(n.direction.all===!0||v===!0&&(n.modifiers.mouseAllDir===!0||n.modifiers.mousealldir===!0)){E(),n.event.detected=!0,n.move(m);return}const _=Math.abs(d),j=Math.abs(b);_!==j&&(n.direction.horizontal===!0&&_>j||n.direction.vertical===!0&&_<j||n.direction.up===!0&&_<j&&b<0||n.direction.down===!0&&_<j&&b>0||n.direction.left===!0&&_>j&&d<0||n.direction.right===!0&&_>j&&d>0?(n.event.detected=!0,n.move(m)):n.end(m,!0))},end(m,c){if(n.event!==void 0){if(xe(n,"temp"),_e.is.firefox===!0&&rt(t,!1),c===!0)n.styleCleanup!==void 0&&n.styleCleanup(),n.event.detected!==!0&&n.initialEvent!==void 0&&n.initialEvent.target.dispatchEvent(n.initialEvent.event);else if(n.event.detected===!0){n.event.isFirst===!0&&n.handler(ct(m===void 0?n.lastEvt:m,n).payload);const{payload:d}=ct(m===void 0?n.lastEvt:m,n,!0),b=()=>{n.handler(d)};n.styleCleanup!==void 0?n.styleCleanup(b):b()}n.event=void 0,n.initialEvent=void 0,n.lastEvt=void 0}}};if(t.__qtouchpan=n,s.mouse===!0){const m=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";ke(n,"main",[[t,"mousedown","mouseStart",`passive${m}`]])}_e.has.touch===!0&&ke(n,"main",[[t,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,i){const s=t.__qtouchpan;s!==void 0&&(i.oldValue!==i.value&&(typeof value!="function"&&s.end(),s.handler=i.value),s.direction=xt(i.modifiers))},beforeUnmount(t){const i=t.__qtouchpan;i!==void 0&&(i.event!==void 0&&i.end(),xe(i,"main"),xe(i,"temp"),_e.is.firefox===!0&&rt(t,!1),i.styleCleanup!==void 0&&i.styleCleanup(),delete t.__qtouchpan)}}),Gi=pe({name:"QSplitter",props:{...Te,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"?!1:t[0]>=0&&t[0]<=t[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(t,{slots:i,emit:s}){const{proxy:{$q:u}}=ye(),n=Me(t,u),m=se(null),c={before:se(null),after:se(null)},d=H(()=>`q-splitter no-wrap ${t.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${t.disable===!0?"disabled":"workable"}`+(n.value===!0?" q-splitter--dark":"")),b=H(()=>t.horizontal===!0?"height":"width"),v=H(()=>t.reverse!==!0?"before":"after"),E=H(()=>t.limits!==void 0?t.limits:t.unit==="%"?[10,90]:[50,1/0]);function _(p){return(t.unit==="%"?p:Math.round(p))+t.unit}const j=H(()=>({[v.value]:{[b.value]:_(t.modelValue)}}));let A,N,x,D,O;function I(p){if(p.isFirst===!0){const T=m.value.getBoundingClientRect()[b.value];A=t.horizontal===!0?"up":"left",N=t.unit==="%"?100:T,x=Math.min(N,E.value[1],Math.max(E.value[0],t.modelValue)),D=(t.reverse!==!0?1:-1)*(t.horizontal===!0?1:u.lang.rtl===!0?-1:1)*(t.unit==="%"?T===0?0:100/T:1),m.value.classList.add("q-splitter--active");return}if(p.isFinal===!0){O!==t.modelValue&&s("update:modelValue",O),m.value.classList.remove("q-splitter--active");return}const P=x+D*(p.direction===A?-1:1)*p.distance[t.horizontal===!0?"y":"x"];O=Math.min(N,E.value[1],Math.max(E.value[0],P)),c[v.value].value.style[b.value]=_(O),t.emitImmediately===!0&&t.modelValue!==O&&s("update:modelValue",O)}const k=H(()=>[[ei,I,void 0,{[t.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function g(p,P){p<P[0]?s("update:modelValue",P[0]):p>P[1]&&s("update:modelValue",P[1])}return me(()=>t.modelValue,p=>{g(p,E.value)}),me(()=>t.limits,()=>{Bt(()=>{g(t.modelValue,E.value)})}),()=>{const p=[Z("div",{ref:c.before,class:["q-splitter__panel q-splitter__before"+(t.reverse===!0?" col":""),t.beforeClass],style:j.value.before},ge(i.before)),Z("div",{class:["q-splitter__separator",t.separatorClass],style:t.separatorStyle,"aria-disabled":t.disable===!0?"true":void 0},[Qt("div",{class:"q-splitter__separator-area absolute-full"},ge(i.separator),"sep",t.disable!==!0,()=>k.value)]),Z("div",{ref:c.after,class:["q-splitter__panel q-splitter__after"+(t.reverse===!0?"":" col"),t.afterClass],style:j.value.after},ge(i.after))];return Z("div",{class:d.value,ref:m},Si(i.default,p))}}});const Xi=Z("div",{class:"q-space"});var dt=pe({name:"QSpace",setup(){return()=>Xi}});function Re(t,i,s){return s<=i?i:Math.min(s,Math.max(i,t))}const Tt="q-slider__marker-labels",Yi=t=>({value:t}),Ji=({marker:t})=>Z("div",{key:t.value,style:t.style,class:t.classes},t.label),ti=[34,37,40,33,39,38],Zi={...Te,...Ri,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},en=["pan","update:modelValue","change"];function tn({updateValue:t,updatePosition:i,getDragging:s,formAttrs:u}){const{props:n,emit:m,slots:c,proxy:{$q:d}}=ye(),b=Me(n,d),v=xi(u),E=se(!1),_=se(!1),j=se(!1),A=se(!1),N=H(()=>n.vertical===!0?"--v":"--h"),x=H(()=>"-"+(n.switchLabelSide===!0?"switched":"standard")),D=H(()=>n.vertical===!0?n.reverse===!0:n.reverse!==(d.lang.rtl===!0)),O=H(()=>isNaN(n.innerMin)===!0||n.innerMin<n.min?n.min:n.innerMin),I=H(()=>isNaN(n.innerMax)===!0||n.innerMax>n.max?n.max:n.innerMax),k=H(()=>n.disable!==!0&&n.readonly!==!0&&O.value<I.value),g=H(()=>(String(n.step).trim().split(".")[1]||"").length),p=H(()=>n.step===0?1:n.step),P=H(()=>k.value===!0?n.tabindex||0:-1),T=H(()=>n.max-n.min),V=H(()=>I.value-O.value),W=H(()=>J(O.value)),M=H(()=>J(I.value)),R=H(()=>n.vertical===!0?D.value===!0?"bottom":"top":D.value===!0?"right":"left"),L=H(()=>n.vertical===!0?"height":"width"),C=H(()=>n.vertical===!0?"width":"height"),l=H(()=>n.vertical===!0?"vertical":"horizontal"),f=H(()=>{const z={role:"slider","aria-valuemin":O.value,"aria-valuemax":I.value,"aria-orientation":l.value,"data-step":n.step};return n.disable===!0?z["aria-disabled"]="true":n.readonly===!0&&(z["aria-readonly"]="true"),z}),w=H(()=>`q-slider q-slider${N.value} q-slider--${E.value===!0?"":"in"}active inline no-wrap `+(n.vertical===!0?"row":"column")+(n.disable===!0?" disabled":" q-slider--enabled"+(k.value===!0?" q-slider--editable":""))+(j.value==="both"?" q-slider--focus":"")+(n.label||n.labelAlways===!0?" q-slider--label":"")+(n.labelAlways===!0?" q-slider--label-always":"")+(b.value===!0?" q-slider--dark":"")+(n.dense===!0?" q-slider--dense q-slider--dense"+N.value:""));function o(z){const Y="q-slider__"+z;return`${Y} ${Y}${N.value} ${Y}${N.value}${x.value}`}function a(z){const Y="q-slider__"+z;return`${Y} ${Y}${N.value}`}const y=H(()=>{const z=n.selectionColor||n.color;return"q-slider__selection absolute"+(z!==void 0?` text-${z}`:"")}),h=H(()=>a("markers")+" absolute overflow-hidden"),r=H(()=>a("track-container")),S=H(()=>o("pin")),B=H(()=>o("label")),U=H(()=>o("text-container")),F=H(()=>o("marker-labels-container")+(n.markerLabelsClass!==void 0?` ${n.markerLabelsClass}`:"")),G=H(()=>"q-slider__track relative-position no-outline"+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),X=H(()=>{const z={[C.value]:n.trackSize};return n.trackImg!==void 0&&(z.backgroundImage=`url(${n.trackImg}) !important`),z}),K=H(()=>"q-slider__inner absolute"+(n.innerTrackColor!==void 0?` bg-${n.innerTrackColor}`:"")),Q=H(()=>{const z={[R.value]:`${100*W.value}%`,[L.value]:`${100*(M.value-W.value)}%`};return n.innerTrackImg!==void 0&&(z.backgroundImage=`url(${n.innerTrackImg}) !important`),z});function re(z){const{min:Y,max:ee,step:te}=n;let oe=Y+z*(ee-Y);if(te>0){const we=(oe-Y)%te;oe+=(Math.abs(we)>=te/2?(we<0?-1:1)*te:0)-we}return g.value>0&&(oe=parseFloat(oe.toFixed(g.value))),Re(oe,O.value,I.value)}function J(z){return T.value===0?0:(z-n.min)/T.value}function ue(z,Y){const ee=We(z),te=n.vertical===!0?Re((ee.top-Y.top)/Y.height,0,1):Re((ee.left-Y.left)/Y.width,0,1);return Re(D.value===!0?1-te:te,W.value,M.value)}const ae=H(()=>_i(n.markers)===!0?n.markers:p.value),ce=H(()=>{const z=[],Y=ae.value,ee=n.max;let te=n.min;do z.push(te),te+=Y;while(te<ee);return z.push(ee),z}),je=H(()=>{const z=` ${Tt}${N.value}-`;return Tt+`${z}${n.switchMarkerLabelsSide===!0?"switched":"standard"}${z}${D.value===!0?"rtl":"ltr"}`}),Le=H(()=>n.markerLabels===!1?null:Be(n.markerLabels).map((z,Y)=>({index:Y,value:z.value,label:z.label||z.value,classes:je.value+(z.classes!==void 0?" "+z.classes:""),style:{...Ie(z.value),...z.style||{}}}))),be=H(()=>({markerList:Le.value,markerMap:qe.value,classes:je.value,getStyle:Ie})),De=H(()=>{if(V.value!==0){const z=100*ae.value/V.value;return{...Q.value,backgroundSize:n.vertical===!0?`2px ${z}%`:`${z}% 2px`}}return null});function Be(z){if(z===!1)return null;if(z===!0)return ce.value.map(Yi);if(typeof z=="function")return ce.value.map(ee=>{const te=z(ee);return st(te)===!0?{...te,value:ee}:{value:ee,label:te}});const Y=({value:ee})=>ee>=n.min&&ee<=n.max;return Array.isArray(z)===!0?z.map(ee=>st(ee)===!0?ee:{value:ee}).filter(Y):Object.keys(z).map(ee=>{const te=z[ee],oe=Number(ee);return st(te)===!0?{...te,value:oe}:{value:oe,label:te}}).filter(Y)}function Ie(z){return{[R.value]:`${100*(z-n.min)/T.value}%`}}const qe=H(()=>{if(n.markerLabels===!1)return null;const z={};return Le.value.forEach(Y=>{z[Y.value]=Y}),z});function Ae(){if(c["marker-label-group"]!==void 0)return c["marker-label-group"](be.value);const z=c["marker-label"]||Ji;return Le.value.map(Y=>z({marker:Y,...be.value}))}const ri=H(()=>[[ei,ai,void 0,{[l.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ai(z){z.isFinal===!0?(A.value!==void 0&&(i(z.evt),z.touch===!0&&t(!0),A.value=void 0,m("pan","end")),E.value=!1,j.value=!1):z.isFirst===!0?(A.value=s(z.evt),i(z.evt),t(),E.value=!0,m("pan","start")):(i(z.evt),t())}function yt(){j.value=!1}function si(z){i(z,s(z)),t(),_.value=!0,E.value=!0,document.addEventListener("mouseup",tt,!0)}function tt(){_.value=!1,E.value=!1,t(!0),yt(),document.removeEventListener("mouseup",tt,!0)}function oi(z){i(z,s(z)),t(!0)}function li(z){ti.includes(z.keyCode)&&t(!0)}function ui(z){if(n.vertical===!0)return null;const Y=d.lang.rtl!==n.reverse?1-z:z;return{transform:`translateX(calc(${2*Y-1} * ${n.thumbSize} / 2 + ${50-100*Y}%))`}}function ci(z){const Y=H(()=>_.value===!1&&(j.value===z.focusValue||j.value==="both")?" q-slider--focus":""),ee=H(()=>`q-slider__thumb q-slider__thumb${N.value} q-slider__thumb${N.value}-${D.value===!0?"rtl":"ltr"} absolute non-selectable`+Y.value+(z.thumbColor.value!==void 0?` text-${z.thumbColor.value}`:"")),te=H(()=>({width:n.thumbSize,height:n.thumbSize,[R.value]:`${100*z.ratio.value}%`,zIndex:j.value===z.focusValue?2:void 0})),oe=H(()=>z.labelColor.value!==void 0?` text-${z.labelColor.value}`:""),we=H(()=>ui(z.ratio.value)),it=H(()=>"q-slider__text"+(z.labelTextColor.value!==void 0?` text-${z.labelTextColor.value}`:""));return()=>{const nt=[Z("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[Z("path",{d:n.thumbPath})]),Z("div",{class:"q-slider__focus-ring fit"})];return(n.label===!0||n.labelAlways===!0)&&(nt.push(Z("div",{class:S.value+" absolute fit no-pointer-events"+oe.value},[Z("div",{class:B.value,style:{minWidth:n.thumbSize}},[Z("div",{class:U.value,style:we.value},[Z("span",{class:it.value},z.label.value)])])])),n.name!==void 0&&n.disable!==!0&&v(nt,"push")),Z("div",{class:ee.value,style:te.value,...z.getNodeData()},nt)}}function di(z,Y,ee,te){const oe=[];n.innerTrackColor!=="transparent"&&oe.push(Z("div",{key:"inner",class:K.value,style:Q.value})),n.selectionColor!=="transparent"&&oe.push(Z("div",{key:"selection",class:y.value,style:z.value})),n.markers!==!1&&oe.push(Z("div",{key:"marker",class:h.value,style:De.value})),te(oe);const we=[Qt("div",{key:"trackC",class:r.value,tabindex:Y.value,...ee.value},[Z("div",{class:G.value,style:X.value},oe)],"slide",k.value,()=>ri.value)];if(n.markerLabels!==!1){const it=n.switchMarkerLabelsSide===!0?"unshift":"push";we[it](Z("div",{key:"markerL",class:F.value},Ae()))}return we}return Oe(()=>{document.removeEventListener("mouseup",tt,!0)}),{state:{active:E,focus:j,preventFocus:_,dragging:A,editable:k,classes:w,tabindex:P,attributes:f,step:p,decimals:g,trackLen:T,innerMin:O,innerMinRatio:W,innerMax:I,innerMaxRatio:M,positionProp:R,sizeProp:L,isReversed:D},methods:{onActivate:si,onMobileClick:oi,onBlur:yt,onKeyup:li,getContent:di,getThumbRenderFn:ci,convertRatioToModel:re,convertModelToRatio:J,getDraggingRatio:ue}}}const nn=()=>({});var Mt=pe({name:"QSlider",props:{...Zi,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:en,setup(t,{emit:i}){const{proxy:{$q:s}}=ye(),{state:u,methods:n}=tn({updateValue:N,updatePosition:D,getDragging:x,formAttrs:Oi(t)}),m=se(null),c=se(0),d=se(0);function b(){d.value=t.modelValue===null?u.innerMin.value:Re(t.modelValue,u.innerMin.value,u.innerMax.value)}me(()=>`${t.modelValue}|${u.innerMin.value}|${u.innerMax.value}`,b),b();const v=H(()=>n.convertModelToRatio(d.value)),E=H(()=>u.active.value===!0?c.value:v.value),_=H(()=>{const k={[u.positionProp.value]:`${100*u.innerMinRatio.value}%`,[u.sizeProp.value]:`${100*(E.value-u.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(k.backgroundImage=`url(${t.selectionImg}) !important`),k}),j=n.getThumbRenderFn({focusValue:!0,getNodeData:nn,ratio:E,label:H(()=>t.labelValue!==void 0?t.labelValue:d.value),thumbColor:H(()=>t.thumbColor||t.color),labelColor:H(()=>t.labelColor),labelTextColor:H(()=>t.labelTextColor)}),A=H(()=>u.editable.value!==!0?{}:s.platform.is.mobile===!0?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:O,onBlur:n.onBlur,onKeydown:I,onKeyup:n.onKeyup});function N(k){d.value!==t.modelValue&&i("update:modelValue",d.value),k===!0&&i("change",d.value)}function x(){return m.value.getBoundingClientRect()}function D(k,g=u.dragging.value){const p=n.getDraggingRatio(k,g);d.value=n.convertRatioToModel(p),c.value=t.snap!==!0||t.step===0?p:n.convertModelToRatio(d.value)}function O(){u.focus.value=!0}function I(k){if(!ti.includes(k.keyCode))return;Ve(k);const g=([34,33].includes(k.keyCode)?10:1)*u.step.value,p=([34,37,40].includes(k.keyCode)?-1:1)*(u.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*g;d.value=Re(parseFloat((d.value+p).toFixed(u.decimals.value)),u.innerMin.value,u.innerMax.value),N()}return()=>{const k=n.getContent(_,u.tabindex,A,g=>{g.push(j())});return Z("div",{ref:m,class:u.classes.value+(t.modelValue===null?" q-slider--no-value":""),...u.attributes.value,"aria-valuenow":t.modelValue},k)}}}),ft=pe({name:"QTooltip",inheritAttrs:!1,props:{...Kt,...Wt,...Vt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Je},self:{type:String,default:"top middle",validator:Je},offset:{type:Array,default:()=>[14,14],validator:Jt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...jt],setup(t,{slots:i,emit:s,attrs:u}){let n,m;const c=ye(),{proxy:{$q:d}}=c,b=se(null),v=se(!1),E=H(()=>Ze(t.anchor,d.lang.rtl)),_=H(()=>Ze(t.self,d.lang.rtl)),j=H(()=>t.persistent!==!0),{registerTick:A,removeTick:N}=It(),{registerTimeout:x}=qt(),{transitionProps:D,transitionStyle:O}=zt(t),{localScrollTarget:I,changeScrollEvent:k,unconfigureScrollTarget:g}=Xt(t,h),{anchorEl:p,canShow:P,anchorEvents:T}=Gt({showing:v,configureAnchorEl:y}),{show:V,hide:W}=Nt({showing:v,canShow:P,handleShow:C,handleHide:l,hideOnRouteChange:j,processOnMount:!0});Object.assign(T,{delayShow:o,delayHide:a});const{showPortal:M,hidePortal:R,renderPortal:L}=Ht(c,b,S,"tooltip");if(d.platform.is.mobile===!0){const B={anchorEl:p,innerRef:b,onClickOutside(F){return W(F),F.target.classList.contains("q-dialog__backdrop")&&Ve(F),!0}},U=H(()=>t.modelValue===null&&t.persistent!==!0&&v.value===!0);me(U,F=>{(F===!0?Yt:Ye)(B)}),Oe(()=>{Ye(B)})}function C(B){M(),A(()=>{m=new MutationObserver(()=>w()),m.observe(b.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),w(),h()}),n===void 0&&(n=me(()=>d.screen.width+"|"+d.screen.height+"|"+t.self+"|"+t.anchor+"|"+d.lang.rtl,w)),x(()=>{M(!0),s("show",B)},t.transitionDuration)}function l(B){N(),R(),f(),x(()=>{R(!0),s("hide",B)},t.transitionDuration)}function f(){m!==void 0&&(m.disconnect(),m=void 0),n!==void 0&&(n(),n=void 0),g(),xe(T,"tooltipTemp")}function w(){const B=b.value;p.value===null||!B||Zt({el:B,offset:t.offset,anchorEl:p.value,anchorOrigin:E.value,selfOrigin:_.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function o(B){if(d.platform.is.mobile===!0){Ke(),document.body.classList.add("non-selectable");const U=p.value,F=["touchmove","touchcancel","touchend","click"].map(G=>[U,G,"delayHide","passiveCapture"]);ke(T,"tooltipTemp",F)}x(()=>{V(B)},t.delay)}function a(B){d.platform.is.mobile===!0&&(xe(T,"tooltipTemp"),Ke(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),x(()=>{W(B)},t.hideDelay)}function y(){if(t.noParentEvent===!0||p.value===null)return;const B=d.platform.is.mobile===!0?[[p.value,"touchstart","delayShow","passive"]]:[[p.value,"mouseenter","delayShow","passive"],[p.value,"mouseleave","delayHide","passive"]];ke(T,"anchor",B)}function h(){if(p.value!==null||t.scrollTarget!==void 0){I.value=Ft(p.value,t.scrollTarget);const B=t.noParentEvent===!0?w:W;k(I.value,B)}}function r(){return v.value===!0?Z("div",{...u,ref:b,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",u.class],style:[u.style,O.value],role:"tooltip"},ge(i.default)):null}function S(){return Z($t,D.value,r)}return Oe(f),Object.assign(c.proxy,{updatePosition:w}),L}}),rn=pe({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:i}){const{proxy:{$q:s}}=ye(),u=kt(Ti,Ee);if(u===Ee)return console.error("QPage needs to be a deep child of QLayout"),Ee;if(kt(Mi,Ee)===Ee)return console.error("QPage needs to be child of QPageContainer"),Ee;const m=H(()=>{const d=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof t.styleFn=="function"){const b=u.isContainer.value===!0?u.containerHeight.value:s.screen.height;return t.styleFn(d,b)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-d+"px":s.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":s.screen.height-d+"px"}}),c=H(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>Z("main",{class:c.value,style:m.value},ge(i.default))}});function Lt(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const i=parseInt(t,10);return isNaN(i)?0:i}var an=Ut({name:"close-popup",beforeMount(t,{value:i}){const s={depth:Lt(i),handler(u){s.depth!==0&&setTimeout(()=>{const n=Li(t);n!==void 0&&Di(n,u,s.depth)})},handlerKey(u){mt(u,13)===!0&&s.handler(u)}};t.__qclosepopup=s,t.addEventListener("click",s.handler),t.addEventListener("keyup",s.handlerKey)},updated(t,{value:i,oldValue:s}){i!==s&&(t.__qclosepopup.depth=Lt(i))},beforeUnmount(t){const i=t.__qclosepopup;t.removeEventListener("click",i.handler),t.removeEventListener("keyup",i.handlerKey),delete t.__qclosepopup}});const sn=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function et({r:t,g:i,b:s,a:u}){const n=u!==void 0;if(t=Math.round(t),i=Math.round(i),s=Math.round(s),t>255||i>255||s>255||n&&u>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return u=n?(Math.round(255*u/100)|1<<8).toString(16).slice(1):"","#"+(s|i<<8|t<<16|1<<24).toString(16).slice(1)+u}function ii(t){if(typeof t!="string")throw new TypeError("Expected a string");t=t.replace(/^#/,""),t.length===3?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:t.length===4&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const i=parseInt(t,16);return t.length>6?{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:Math.round((i&255)/2.55)}:{r:i>>16,g:i>>8&255,b:i&255}}function on({h:t,s:i,v:s,a:u}){let n,m,c;i=i/100,s=s/100,t=t/360;const d=Math.floor(t*6),b=t*6-d,v=s*(1-i),E=s*(1-b*i),_=s*(1-(1-b)*i);switch(d%6){case 0:n=s,m=_,c=v;break;case 1:n=E,m=s,c=v;break;case 2:n=v,m=s,c=_;break;case 3:n=v,m=E,c=s;break;case 4:n=_,m=v,c=s;break;case 5:n=s,m=v,c=E;break}return{r:Math.round(n*255),g:Math.round(m*255),b:Math.round(c*255),a:u}}function ln({r:t,g:i,b:s,a:u}){const n=Math.max(t,i,s),m=Math.min(t,i,s),c=n-m,d=n===0?0:c/n,b=n/255;let v;switch(n){case m:v=0;break;case t:v=i-s+c*(i<s?6:0),v/=6*c;break;case i:v=s-t+c*2,v/=6*c;break;case s:v=t-i+c*4,v/=6*c;break}return{h:Math.round(v*360),s:Math.round(d*100),v:Math.round(b*100),a:u}}function Ce(t){if(typeof t!="string")throw new TypeError("Expected a string");const i=t.replace(/ /g,""),s=sn.exec(i);if(s===null)return ii(i);const u={r:Math.min(255,parseInt(s[2],10)),g:Math.min(255,parseInt(s[3],10)),b:Math.min(255,parseInt(s[4],10))};if(s[1]){const n=parseFloat(s[5]);u.a=Math.min(1,isNaN(n)===!0?1:n)*100}return u}function un(t,i){if(typeof t!="string")throw new TypeError("Expected a string as color");if(typeof i!="number")throw new TypeError("Expected a numeric percent");const s=Ce(t),u=i<0?0:255,n=Math.abs(i)/100,m=s.r,c=s.g,d=s.b;return"#"+(16777216+(Math.round((u-m)*n)+m)*65536+(Math.round((u-c)*n)+c)*256+(Math.round((u-d)*n)+d)).toString(16).slice(1)}function cn(t){if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const i=typeof t=="string"?Ce(t):t,s=i.r/255,u=i.g/255,n=i.b/255,m=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),c=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4),d=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return .2126*m+.7152*c+.0722*d}function dn(t){if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const i=typeof t=="string"?Ce(t):t;return(i.r*299+i.g*587+i.b*114)/1e3}function fn(t,i){if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as fgColor");if(typeof i!="string"&&(!i||i.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as bgColor");const s=typeof t=="string"?Ce(t):t,u=s.r/255,n=s.g/255,m=s.b/255,c=s.a!==void 0?s.a/100:1,d=typeof i=="string"?Ce(i):i,b=d.r/255,v=d.g/255,E=d.b/255,_=d.a!==void 0?d.a/100:1,j=c+_*(1-c),A=Math.round((u*c+b*_*(1-c))/j*255),N=Math.round((n*c+v*_*(1-c))/j*255),x=Math.round((m*c+E*_*(1-c))/j*255),D={r:A,g:N,b:x,a:Math.round(j*100)};return typeof t=="string"?et(D):D}function hn(t,i){if(typeof t!="string")throw new TypeError("Expected a string as color");if(i===void 0||i<-1||i>1)throw new TypeError("Expected offset to be between -1 and 1");const{r:s,g:u,b:n,a:m}=Ce(t),c=m!==void 0?m/100:0;return et({r:s,g:u,b:n,a:Math.round(Math.min(1,Math.max(0,c+i))*100)})}function vn(t){if(typeof t!="string")throw new TypeError("Expected a string as color");const i=document.createElement("div");i.className=`text-${t} invisible fixed no-pointer-events`,document.body.appendChild(i);const s=getComputedStyle(i).getPropertyValue("color");return i.remove(),et(Ce(s))}var $e={rgbToHex:et,hexToRgb:ii,hsvToRgb:on,rgbToHsv:ln,textToRgb:Ce,lighten:un,luminosity:cn,brightness:dn,blend:fn,changeAlpha:hn,getPaletteColor:vn};function mn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ni={exports:{}};/*!
 * wavesurfer.js 6.5.2 (2023-03-12)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(t,i){(function(u,n){t.exports=n()})(self,()=>(()=>{var s={"./src/drawer.canvasentry.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var v=_(b("./src/util/style.js")),E=_(b("./src/util/get-id.js"));function _(k){return k&&k.__esModule?k:{default:k}}function j(k){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},j(k)}function A(k,g){if(!(k instanceof g))throw new TypeError("Cannot call a class as a function")}function N(k,g){for(var p=0;p<g.length;p++){var P=g[p];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,D(P.key),P)}}function x(k,g,p){return g&&N(k.prototype,g),p&&N(k,p),Object.defineProperty(k,"prototype",{writable:!1}),k}function D(k){var g=O(k,"string");return j(g)==="symbol"?g:String(g)}function O(k,g){if(j(k)!=="object"||k===null)return k;var p=k[Symbol.toPrimitive];if(p!==void 0){var P=p.call(k,g||"default");if(j(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(k)}var I=function(){function k(){A(this,k),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,E.default)(typeof this.constructor.name!="undefined"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return x(k,[{key:"initWave",value:function(p){this.wave=p,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(p){this.progress=p,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(p,P,T,V){this.start=this.wave.offsetLeft/P||0,this.end=this.start+p/P,this.wave.width=T,this.wave.height=V;var W={width:p+"px"};(0,v.default)(this.wave,W),this.hasProgressCanvas&&(this.progress.width=T,this.progress.height=V,(0,v.default)(this.progress,W))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(p,P){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,p),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,P))}},{key:"getFillStyle",value:function(p,P){if(typeof P=="string"||P instanceof CanvasGradient)return P;var T=p.createLinearGradient(0,0,0,p.canvas.height);return P.forEach(function(V,W){return T.addColorStop(W/P.length,V)}),T}},{key:"applyCanvasTransforms",value:function(p){p&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(p,P,T,V,W){this.fillRectToContext(this.waveCtx,p,P,T,V,W),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,p,P,T,V,W)}},{key:"fillRectToContext",value:function(p,P,T,V,W,M){!p||(M?this.drawRoundedRect(p,P,T,V,W,M):p.fillRect(P,T,V,W))}},{key:"drawRoundedRect",value:function(p,P,T,V,W,M){W!==0&&(W<0&&(W*=-1,T-=W),p.beginPath(),p.moveTo(P+M,T),p.lineTo(P+V-M,T),p.quadraticCurveTo(P+V,T,P+V,T+M),p.lineTo(P+V,T+W-M),p.quadraticCurveTo(P+V,T+W,P+V-M,T+W),p.lineTo(P+M,T+W),p.quadraticCurveTo(P,T+W,P,T+W-M),p.lineTo(P,T+M),p.quadraticCurveTo(P,T,P+M,T),p.closePath(),p.fill())}},{key:"drawLines",value:function(p,P,T,V,W,M){this.drawLineToContext(this.waveCtx,p,P,T,V,W,M),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,p,P,T,V,W,M)}},{key:"drawLineToContext",value:function(p,P,T,V,W,M,R){if(!!p){var L=P.length/2,C=Math.round(L*this.start),l=Math.round(L*this.end)+1,f=C,w=l,o=this.wave.width/(w-f-1),a=V+W,y=T/V;p.beginPath(),p.moveTo((f-C)*o,a),p.lineTo((f-C)*o,a-Math.round((P[2*f]||0)/y));var h,r,S;for(h=f;h<w;h++)r=P[2*h]||0,S=Math.round(r/y),p.lineTo((h-C)*o+this.halfPixel,a-S);var B=w-1;for(B;B>=f;B--)r=P[2*B+1]||0,S=Math.round(r/y),p.lineTo((B-C)*o+this.halfPixel,a-S);p.lineTo((f-C)*o,a-Math.round((P[2*f+1]||0)/y)),p.closePath(),p.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(p,P,T){var V=this;if(T==="blob")return new Promise(function(W){V.wave.toBlob(W,p,P)});if(T==="dataURL")return this.wave.toDataURL(p,P)}}]),k}();d.default=I,c.exports=d.default},"./src/drawer.js":(c,d,b)=>{function v(M){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},v(M)}Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var E=j(b("./src/util/index.js"));function _(M){if(typeof WeakMap!="function")return null;var R=new WeakMap,L=new WeakMap;return(_=function(l){return l?L:R})(M)}function j(M,R){if(!R&&M&&M.__esModule)return M;if(M===null||v(M)!=="object"&&typeof M!="function")return{default:M};var L=_(R);if(L&&L.has(M))return L.get(M);var C={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in M)if(f!=="default"&&Object.prototype.hasOwnProperty.call(M,f)){var w=l?Object.getOwnPropertyDescriptor(M,f):null;w&&(w.get||w.set)?Object.defineProperty(C,f,w):C[f]=M[f]}return C.default=M,L&&L.set(M,C),C}function A(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}function N(M,R){for(var L=0;L<R.length;L++){var C=R[L];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(M,D(C.key),C)}}function x(M,R,L){return R&&N(M.prototype,R),L&&N(M,L),Object.defineProperty(M,"prototype",{writable:!1}),M}function D(M){var R=O(M,"string");return v(R)==="symbol"?R:String(R)}function O(M,R){if(v(M)!=="object"||M===null)return M;var L=M[Symbol.toPrimitive];if(L!==void 0){var C=L.call(M,R||"default");if(v(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(M)}function I(M,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(R&&R.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),R&&k(M,R)}function k(M,R){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,l){return C.__proto__=l,C},k(M,R)}function g(M){var R=T();return function(){var C=V(M),l;if(R){var f=V(this).constructor;l=Reflect.construct(C,arguments,f)}else l=C.apply(this,arguments);return p(this,l)}}function p(M,R){if(R&&(v(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(M)}function P(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V(M){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(L){return L.__proto__||Object.getPrototypeOf(L)},V(M)}var W=function(M){I(L,M);var R=g(L);function L(C,l){var f;return A(this,L),f=R.call(this),f.container=E.withOrientation(C,l.vertical),f.params=l,f.width=0,f.height=l.height*f.params.pixelRatio,f.lastPos=0,f.wrapper=null,f}return x(L,[{key:"style",value:function(l,f){return E.style(l,f)}},{key:"createWrapper",value:function(){this.wrapper=E.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(l,f){!f&&l.preventDefault();var w=E.withOrientation(l.targetTouches?l.targetTouches[0]:l,this.params.vertical).clientX,o=this.wrapper.getBoundingClientRect(),a=this.width,y=this.getWidth(),h=this.getProgressPixels(o,w),r;return!this.params.fillParent&&a<y?r=h*(this.params.pixelRatio/a)||0:r=(h+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,E.clamp(r,0,1)}},{key:"getProgressPixels",value:function(l,f){return this.params.rtl?l.right-f:f-l.left}},{key:"setupWrapperEvents",value:function(){var l=this;this.wrapper.addEventListener("click",function(f){var w=E.withOrientation(f,l.params.vertical),o=l.wrapper.offsetHeight-l.wrapper.clientHeight;if(o!==0){var a=l.wrapper.getBoundingClientRect();if(w.clientY>=a.bottom-o)return}l.params.interact&&l.fireEvent("click",f,l.handleEvent(f))}),this.wrapper.addEventListener("dblclick",function(f){l.params.interact&&l.fireEvent("dblclick",f,l.handleEvent(f))}),this.wrapper.addEventListener("scroll",function(f){return l.fireEvent("scroll",f)})}},{key:"drawPeaks",value:function(l,f,w,o){this.setWidth(f)||this.clearWave(),this.params.barWidth?this.drawBars(l,0,w,o):this.drawWave(l,0,w,o)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(l){var f=this.wrapper.scrollWidth*l;this.recenterOnPosition(f,!0)}},{key:"recenterOnPosition",value:function(l,f){var w=this.wrapper.scrollLeft,o=~~(this.wrapper.clientWidth/2),a=this.wrapper.scrollWidth-this.wrapper.clientWidth,y=l-o,h=y-w;if(a!=0){if(!f&&-o<=h&&h<o){var r=this.params.autoCenterRate;r/=o,r*=a,h=Math.max(-r,Math.min(r,h)),y=w+h}y=Math.max(0,Math.min(a,y)),y!=w&&(this.wrapper.scrollLeft=y)}}},{key:"getScrollX",value:function(){var l=0;if(this.wrapper){var f=this.params.pixelRatio;if(l=Math.round(this.wrapper.scrollLeft*f),this.params.scrollParent){var w=~~(this.wrapper.scrollWidth*f-this.getWidth());l=Math.min(w,Math.max(0,l))}}return l}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(l){if(this.width==l)return!1;if(this.width=l,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var f=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:f})}return this.updateSize(),!0}},{key:"setHeight",value:function(l){return l==this.height?!1:(this.height=l,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(l){var f=1/this.params.pixelRatio,w=Math.round(l*this.width)*f;if(w<this.lastPos||w-this.lastPos>=f){if(this.lastPos=w,this.params.scrollParent&&this.params.autoCenter){var o=~~(this.wrapper.scrollWidth*l);this.recenterOnPosition(o,this.params.autoCenterImmediately)}this.updateProgress(w)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(l,f,w,o){}},{key:"drawWave",value:function(l,f,w,o){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(l){}}]),L}(E.Observer);d.default=W,c.exports=d.default},"./src/drawer.multicanvas.js":(c,d,b)=>{function v(C){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},v(C)}Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var E=x(b("./src/drawer.js")),_=N(b("./src/util/index.js")),j=x(b("./src/drawer.canvasentry.js"));function A(C){if(typeof WeakMap!="function")return null;var l=new WeakMap,f=new WeakMap;return(A=function(o){return o?f:l})(C)}function N(C,l){if(!l&&C&&C.__esModule)return C;if(C===null||v(C)!=="object"&&typeof C!="function")return{default:C};var f=A(l);if(f&&f.has(C))return f.get(C);var w={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in C)if(a!=="default"&&Object.prototype.hasOwnProperty.call(C,a)){var y=o?Object.getOwnPropertyDescriptor(C,a):null;y&&(y.get||y.set)?Object.defineProperty(w,a,y):w[a]=C[a]}return w.default=C,f&&f.set(C,w),w}function x(C){return C&&C.__esModule?C:{default:C}}function D(C,l){if(!(C instanceof l))throw new TypeError("Cannot call a class as a function")}function O(C,l){for(var f=0;f<l.length;f++){var w=l[f];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(C,k(w.key),w)}}function I(C,l,f){return l&&O(C.prototype,l),f&&O(C,f),Object.defineProperty(C,"prototype",{writable:!1}),C}function k(C){var l=g(C,"string");return v(l)==="symbol"?l:String(l)}function g(C,l){if(v(C)!=="object"||C===null)return C;var f=C[Symbol.toPrimitive];if(f!==void 0){var w=f.call(C,l||"default");if(v(w)!=="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(C)}function p(C,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(l&&l.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),l&&P(C,l)}function P(C,l){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,o){return w.__proto__=o,w},P(C,l)}function T(C){var l=M();return function(){var w=R(C),o;if(l){var a=R(this).constructor;o=Reflect.construct(w,arguments,a)}else o=w.apply(this,arguments);return V(this,o)}}function V(C,l){if(l&&(v(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(C)}function W(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(C){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},R(C)}var L=function(C){p(f,C);var l=T(f);function f(w,o){var a;return D(this,f),a=l.call(this,w,o),a.maxCanvasWidth=o.maxCanvasWidth,a.maxCanvasElementWidth=Math.round(o.maxCanvasWidth/o.pixelRatio),a.hasProgressCanvas=o.waveColor!=o.progressColor,a.halfPixel=.5/o.pixelRatio,a.canvases=[],a.progressWave=null,a.EntryClass=j.default,a.canvasContextAttributes=o.drawingContextAttributes,a.overlap=2*Math.ceil(o.pixelRatio/2),a.barRadius=o.barRadius||0,a.vertical=o.vertical,a}return I(f,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=_.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var o=this,a=Math.round(this.width/this.params.pixelRatio),y=Math.ceil(a/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<y;)this.addCanvas();for(;this.canvases.length>y;)this.removeCanvas();var h=this.maxCanvasWidth+this.overlap,r=this.canvases.length-1;this.canvases.forEach(function(S,B){B==r&&(h=o.width-o.maxCanvasWidth*r),o.updateDimensions(S,h,o.height),S.clearWave()})}},{key:"addCanvas",value:function(){var o=new this.EntryClass;o.canvasContextAttributes=this.canvasContextAttributes,o.hasProgressCanvas=this.hasProgressCanvas,o.halfPixel=this.halfPixel;var a=this.maxCanvasElementWidth*this.canvases.length,y=_.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(y,{position:"absolute",zIndex:2,left:a+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),o.initWave(y),this.hasProgressCanvas){var h=_.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(h,{position:"absolute",left:a+"px",top:0,bottom:0,height:"100%"}),o.initProgress(h)}this.canvases.push(o)}},{key:"removeCanvas",value:function(){var o=this.canvases[this.canvases.length-1];o.wave.parentElement.removeChild(o.wave.domElement),this.hasProgressCanvas&&o.progress.parentElement.removeChild(o.progress.domElement),o&&(o.destroy(),o=null),this.canvases.pop()}},{key:"updateDimensions",value:function(o,a,y){var h=Math.round(a/this.params.pixelRatio),r=Math.round(this.width/this.params.pixelRatio);o.updateDimensions(h,r,a,y),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var o=this;_.frame(function(){o.canvases.forEach(function(a){return a.clearWave()})})()}},{key:"drawBars",value:function(o,a,y,h){var r=this;return this.prepareDraw(o,a,y,h,function(S){var B=S.absmax,U=S.hasMinVals;S.height;var F=S.offsetY,G=S.halfH,X=S.peaks,K=S.channelIndex;if(y!==void 0){var Q=U?2:1,re=X.length/Q,J=r.params.barWidth*r.params.pixelRatio,ue=r.params.barGap===null?Math.max(r.params.pixelRatio,~~(J/2)):Math.max(r.params.pixelRatio,r.params.barGap*r.params.pixelRatio),ae=J+ue,ce=re/r.width,je=y,Le=h,be=je;for(be;be<Le;be+=ae){var De=0,Be=Math.floor(be*ce)*Q,Ie=Math.floor((be+ae)*ce)*Q;do{var qe=Math.abs(X[Be]);qe>De&&(De=qe),Be+=Q}while(Be<Ie);var Ae=Math.round(De/B*G);r.params.barMinHeight&&(Ae=Math.max(Ae,r.params.barMinHeight)),r.fillRect(be+r.halfPixel,G-Ae+F,J+r.halfPixel,Ae*2,r.barRadius,K)}}})}},{key:"drawWave",value:function(o,a,y,h){var r=this;return this.prepareDraw(o,a,y,h,function(S){var B=S.absmax,U=S.hasMinVals;S.height;var F=S.offsetY,G=S.halfH,X=S.peaks,K=S.channelIndex;if(!U){var Q=[],re=X.length,J=0;for(J;J<re;J++)Q[2*J]=X[J],Q[2*J+1]=-X[J];X=Q}y!==void 0&&r.drawLine(X,B,G,F,y,h,K),r.fillRect(0,G+F-r.halfPixel,r.width,r.halfPixel,r.barRadius,K)})}},{key:"drawLine",value:function(o,a,y,h,r,S,B){var U=this,F=this.params.splitChannelsOptions.channelColors[B]||{},G=F.waveColor,X=F.progressColor;this.canvases.forEach(function(K,Q){U.setFillStyles(K,G,X),U.applyCanvasTransforms(K,U.params.vertical),K.drawLines(o,a,y,h,r,S)})}},{key:"fillRect",value:function(o,a,y,h,r,S){var B=Math.floor(o/this.maxCanvasWidth),U=Math.min(Math.ceil((o+y)/this.maxCanvasWidth)+1,this.canvases.length),F=B;for(F;F<U;F++){var G=this.canvases[F],X=F*this.maxCanvasWidth,K={x1:Math.max(o,F*this.maxCanvasWidth),y1:a,x2:Math.min(o+y,F*this.maxCanvasWidth+G.wave.width),y2:a+h};if(K.x1<K.x2){var Q=this.params.splitChannelsOptions.channelColors[S]||{},re=Q.waveColor,J=Q.progressColor;this.setFillStyles(G,re,J),this.applyCanvasTransforms(G,this.params.vertical),G.fillRects(K.x1-X,K.y1,K.x2-K.x1,K.y2-K.y1,r)}}}},{key:"hideChannel",value:function(o){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(o)}},{key:"prepareDraw",value:function(o,a,y,h,r,S,B){var U=this;return _.frame(function(){if(o[0]instanceof Array){var F=o;if(U.params.splitChannels){var G=F.filter(function(ae,ce){return!U.hideChannel(ce)});U.params.splitChannelsOptions.overlay||U.setHeight(Math.max(G.length,1)*U.params.height*U.params.pixelRatio);var X;return U.params.splitChannelsOptions&&U.params.splitChannelsOptions.relativeNormalization&&(X=_.max(F.map(function(ae){return _.absMax(ae)}))),F.forEach(function(ae,ce){return U.prepareDraw(ae,ce,y,h,r,G.indexOf(ae),X)})}o=F[0]}if(!U.hideChannel(a)){var K=1/U.params.barHeight;U.params.normalize&&(K=B===void 0?_.absMax(o):B);var Q=[].some.call(o,function(ae){return ae<0}),re=U.params.height*U.params.pixelRatio,J=re/2,ue=re*S||0;return U.params.splitChannelsOptions&&U.params.splitChannelsOptions.overlay&&(ue=0),r({absmax:K,hasMinVals:Q,height:re,offsetY:ue,halfH:J,peaks:o,channelIndex:a})}})()}},{key:"setFillStyles",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;o.setFillStyles(a,y)}},{key:"applyCanvasTransforms",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.applyCanvasTransforms(a)}},{key:"getImage",value:function(o,a,y){if(y==="blob")return Promise.all(this.canvases.map(function(r){return r.getImage(o,a,y)}));if(y==="dataURL"){var h=this.canvases.map(function(r){return r.getImage(o,a,y)});return h.length>1?h:h[0]}}},{key:"updateProgress",value:function(o){this.style(this.progressWave,{width:o+"px"})}}]),f}(E.default);d.default=L,c.exports=d.default},"./src/mediaelement-webaudio.js":(c,d,b)=>{function v(R){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},v(R)}Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var E=_(b("./src/mediaelement.js"));function _(R){return R&&R.__esModule?R:{default:R}}function j(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function A(R,L){for(var C=0;C<L.length;C++){var l=L[C];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(R,x(l.key),l)}}function N(R,L,C){return L&&A(R.prototype,L),C&&A(R,C),Object.defineProperty(R,"prototype",{writable:!1}),R}function x(R){var L=D(R,"string");return v(L)==="symbol"?L:String(L)}function D(R,L){if(v(R)!=="object"||R===null)return R;var C=R[Symbol.toPrimitive];if(C!==void 0){var l=C.call(R,L||"default");if(v(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(R)}function O(){return typeof Reflect!="undefined"&&Reflect.get?O=Reflect.get.bind():O=function(L,C,l){var f=I(L,C);if(!!f){var w=Object.getOwnPropertyDescriptor(f,C);return w.get?w.get.call(arguments.length<3?L:l):w.value}},O.apply(this,arguments)}function I(R,L){for(;!Object.prototype.hasOwnProperty.call(R,L)&&(R=W(R),R!==null););return R}function k(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(L&&L.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),L&&g(R,L)}function g(R,L){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,f){return l.__proto__=f,l},g(R,L)}function p(R){var L=V();return function(){var l=W(R),f;if(L){var w=W(this).constructor;f=Reflect.construct(l,arguments,w)}else f=l.apply(this,arguments);return P(this,f)}}function P(R,L){if(L&&(v(L)==="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(R)}function T(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function V(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W(R){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},W(R)}var M=function(R){k(C,R);var L=p(C);function C(l){var f;return j(this,C),f=L.call(this,l),f.params=l,f.sourceMediaElement=null,f}return N(C,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(f,w,o){O(W(C.prototype),"_load",this).call(this,f,w,o),this.createMediaElementSource(f)}},{key:"createMediaElementSource",value:function(f){this.sourceMediaElement=this.ac.createMediaElementSource(f),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(f,w){return this.resumeAudioContext(),O(W(C.prototype),"play",this).call(this,f,w)}},{key:"destroy",value:function(){O(W(C.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),C}(E.default);d.default=M,c.exports=d.default},"./src/mediaelement.js":(c,d,b)=>{function v(l){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},v(l)}Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var E=N(b("./src/webaudio.js")),_=A(b("./src/util/index.js"));function j(l){if(typeof WeakMap!="function")return null;var f=new WeakMap,w=new WeakMap;return(j=function(a){return a?w:f})(l)}function A(l,f){if(!f&&l&&l.__esModule)return l;if(l===null||v(l)!=="object"&&typeof l!="function")return{default:l};var w=j(f);if(w&&w.has(l))return w.get(l);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var h=a?Object.getOwnPropertyDescriptor(l,y):null;h&&(h.get||h.set)?Object.defineProperty(o,y,h):o[y]=l[y]}return o.default=l,w&&w.set(l,o),o}function N(l){return l&&l.__esModule?l:{default:l}}function x(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function D(l,f){for(var w=0;w<f.length;w++){var o=f[w];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,I(o.key),o)}}function O(l,f,w){return f&&D(l.prototype,f),w&&D(l,w),Object.defineProperty(l,"prototype",{writable:!1}),l}function I(l){var f=k(l,"string");return v(f)==="symbol"?f:String(f)}function k(l,f){if(v(l)!=="object"||l===null)return l;var w=l[Symbol.toPrimitive];if(w!==void 0){var o=w.call(l,f||"default");if(v(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(l)}function g(){return typeof Reflect!="undefined"&&Reflect.get?g=Reflect.get.bind():g=function(f,w,o){var a=p(f,w);if(!!a){var y=Object.getOwnPropertyDescriptor(a,w);return y.get?y.get.call(arguments.length<3?f:o):y.value}},g.apply(this,arguments)}function p(l,f){for(;!Object.prototype.hasOwnProperty.call(l,f)&&(l=L(l),l!==null););return l}function P(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),f&&T(l,f)}function T(l,f){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},T(l,f)}function V(l){var f=R();return function(){var o=L(l),a;if(f){var y=L(this).constructor;a=Reflect.construct(o,arguments,y)}else a=o.apply(this,arguments);return W(this,a)}}function W(l,f){if(f&&(v(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(l)}function M(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(l){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},L(l)}var C=function(l){P(w,l);var f=V(w);function w(o){var a;return x(this,w),a=f.call(this,o),a.params=o,a.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},a.mediaType=o.mediaType.toLowerCase(),a.elementPosition=o.elementPosition,a.peaks=null,a.playbackRate=1,a.volume=1,a.isMuted=!1,a.buffer=null,a.onPlayEnd=null,a.mediaListeners={},a}return O(w,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var a=this;this.mediaListeners.error=function(){a.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){a.fireEvent("waiting")},this.mediaListeners.canplay=function(){a.fireEvent("canplay")},this.mediaListeners.ended=function(){a.fireEvent("finish")},this.mediaListeners.play=function(){a.fireEvent("play")},this.mediaListeners.pause=function(){a.fireEvent("pause")},this.mediaListeners.seeked=function(y){a.fireEvent("seek")},this.mediaListeners.volumechange=function(y){a.isMuted=a.media.muted,a.isMuted?a.volume=0:a.volume=a.media.volume,a.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(y){a.media.removeEventListener(y,a.mediaListeners[y]),a.media.addEventListener(y,a.mediaListeners[y])})}},{key:"createTimer",value:function(){var a=this,y=function h(){a.isPaused()||(a.fireEvent("audioprocess",a.getCurrentTime()),_.frame(h)())};this.on("play",y),this.on("pause",function(){a.fireEvent("audioprocess",a.getCurrentTime())})}},{key:"load",value:function(a,y,h,r){var S=document.createElement(this.mediaType);S.controls=this.params.mediaControls,S.autoplay=this.params.autoplay||!1,S.preload=r==null?"auto":r,S.src=a,S.style.width="100%";var B=y.querySelector(this.mediaType);B&&y.removeChild(B),y.appendChild(S),this._load(S,h,r)}},{key:"loadElt",value:function(a,y){a.controls=this.params.mediaControls,a.autoplay=this.params.autoplay||!1,this._load(a,y,a.preload)}},{key:"_load",value:function(a,y,h){if(!(a instanceof HTMLMediaElement)||typeof a.addEventListener=="undefined")throw new Error("media parameter is not a valid media element");typeof a.load=="function"&&!(y&&h=="none")&&a.load(),this.media=a,this._setupMediaListeners(),this.peaks=y,this.onPlayEnd=null,this.buffer=null,this.isMuted=a.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var a=(this.buffer||this.media).duration;return a>=1/0&&(a=this.media.seekable.end(0)),a}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(a){this.playbackRate=a||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(a){a!=null&&!isNaN(a)&&(this.media.currentTime=a),this.clearPlayEnd()}},{key:"play",value:function(a,y){this.seekTo(a);var h=this.media.play();return y&&this.setPlayEnd(y),h}},{key:"pause",value:function(){var a;return this.media&&(a=this.media.pause()),this.clearPlayEnd(),a}},{key:"setPlayEnd",value:function(a){var y=this;this.clearPlayEnd(),this._onPlayEnd=function(h){h>=a&&(y.pause(),y.seekTo(a))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(a,y,h){return this.buffer?g(L(w.prototype),"getPeaks",this).call(this,a,y,h):this.peaks||[]}},{key:"setSinkId",value:function(a){return a?this.media.setSinkId?this.media.setSinkId(a):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+a))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(a){this.volume=a,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(a){this.isMuted=this.media.muted=a}},{key:"destroy",value:function(){var a=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(y){a.media&&a.media.removeEventListener(y,a.mediaListeners[y])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),w}(E.default);d.default=C,c.exports=d.default},"./src/peakcache.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;function b(x){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},b(x)}function v(x,D){if(!(x instanceof D))throw new TypeError("Cannot call a class as a function")}function E(x,D){for(var O=0;O<D.length;O++){var I=D[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,j(I.key),I)}}function _(x,D,O){return D&&E(x.prototype,D),O&&E(x,O),Object.defineProperty(x,"prototype",{writable:!1}),x}function j(x){var D=A(x,"string");return b(D)==="symbol"?D:String(D)}function A(x,D){if(b(x)!=="object"||x===null)return x;var O=x[Symbol.toPrimitive];if(O!==void 0){var I=O.call(x,D||"default");if(b(I)!=="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(x)}var N=function(){function x(){v(this,x),this.clearPeakCache()}return _(x,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(O,I,k){O!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=O);for(var g=[],p=0;p<this.peakCacheRanges.length&&this.peakCacheRanges[p]<I;)p++;for(p%2==0&&g.push(I);p<this.peakCacheRanges.length&&this.peakCacheRanges[p]<=k;)g.push(this.peakCacheRanges[p]),p++;p%2==0&&g.push(k),g=g.filter(function(T,V,W){return V==0?T!=W[V+1]:V==W.length-1?T!=W[V-1]:T!=W[V-1]&&T!=W[V+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(g),this.peakCacheRanges=this.peakCacheRanges.sort(function(T,V){return T-V}).filter(function(T,V,W){return V==0?T!=W[V+1]:V==W.length-1?T!=W[V-1]:T!=W[V-1]&&T!=W[V+1]});var P=[];for(p=0;p<g.length;p+=2)P.push([g[p],g[p+1]]);return P}},{key:"getCacheRanges",value:function(){var O=[],I;for(I=0;I<this.peakCacheRanges.length;I+=2)O.push([this.peakCacheRanges[I],this.peakCacheRanges[I+1]]);return O}}]),x}();d.default=N,c.exports=d.default},"./src/util/absMax.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=j;var v=_(b("./src/util/max.js")),E=_(b("./src/util/min.js"));function _(A){return A&&A.__esModule?A:{default:A}}function j(A){var N=(0,v.default)(A),x=(0,E.default)(A);return-x>N?-x:N}c.exports=d.default},"./src/util/clamp.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=b;function b(v,E,_){return Math.min(Math.max(E,v),_)}c.exports=d.default},"./src/util/fetch.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=I;var v=E(b("./src/util/observer.js"));function E(k){return k&&k.__esModule?k:{default:k}}function _(k){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_(k)}function j(k,g){if(!(k instanceof g))throw new TypeError("Cannot call a class as a function")}function A(k,g){for(var p=0;p<g.length;p++){var P=g[p];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,x(P.key),P)}}function N(k,g,p){return g&&A(k.prototype,g),p&&A(k,p),Object.defineProperty(k,"prototype",{writable:!1}),k}function x(k){var g=D(k,"string");return _(g)==="symbol"?g:String(g)}function D(k,g){if(_(k)!=="object"||k===null)return k;var p=k[Symbol.toPrimitive];if(p!==void 0){var P=p.call(k,g||"default");if(_(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(k)}var O=function(){function k(g,p,P){j(this,k),this.instance=g,this.instance._reader=P.body.getReader(),this.total=parseInt(p,10),this.loaded=0}return N(k,[{key:"start",value:function(p){var P=this,T=function V(){P.instance._reader.read().then(function(W){var M=W.done,R=W.value;if(M){P.total===0&&P.instance.onProgress.call(P.instance,{loaded:P.loaded,total:P.total,lengthComputable:!1}),p.close();return}P.loaded+=R.byteLength,P.instance.onProgress.call(P.instance,{loaded:P.loaded,total:P.total,lengthComputable:P.total!==0}),p.enqueue(R),V()}).catch(function(W){p.error(W)})};T()}}]),k}();function I(k){if(k){if(!k.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var g=new v.default,p=new Headers,P=new Request(k.url);g.controller=new AbortController,k&&k.requestHeaders&&k.requestHeaders.forEach(function(W){p.append(W.key,W.value)});var T=k.responseType||"json",V={method:k.method||"GET",headers:p,mode:k.mode||"cors",credentials:k.credentials||"same-origin",cache:k.cache||"default",redirect:k.redirect||"follow",referrer:k.referrer||"client",signal:g.controller.signal};return fetch(P,V).then(function(W){g.response=W;var M=!0;W.body||(M=!1);var R=W.headers.get("content-length");return R===null&&(M=!1),M?(g.onProgress=function(L){g.fireEvent("progress",L)},new Response(new ReadableStream(new O(g,R,W)),V)):W}).then(function(W){var M;if(W.ok)switch(T){case"arraybuffer":return W.arrayBuffer();case"json":return W.json();case"blob":return W.blob();case"text":return W.text();default:M="Unknown responseType: "+T;break}throw M||(M="HTTP error status: "+W.status),new Error(M)}).then(function(W){g.fireEvent("success",W)}).catch(function(W){g.fireEvent("error",W)}),g.fetchRequest=P,g}c.exports=d.default},"./src/util/frame.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=_;var v=E(b("./src/util/request-animation-frame.js"));function E(j){return j&&j.__esModule?j:{default:j}}function _(j){return function(){for(var A=arguments.length,N=new Array(A),x=0;x<A;x++)N[x]=arguments[x];return(0,v.default)(function(){return j.apply(void 0,N)})}}c.exports=d.default},"./src/util/get-id.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=b;function b(v){return v===void 0&&(v="wavesurfer_"),v+Math.random().toString(32).substring(2)}c.exports=d.default},"./src/util/index.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"Observer",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(d,"absMax",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(d,"clamp",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(d,"debounce",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(d,"fetchFile",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(d,"frame",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(d,"getId",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(d,"ignoreSilenceMode",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(d,"max",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(d,"min",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(d,"preventClick",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(d,"requestAnimationFrame",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(d,"style",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(d,"withOrientation",{enumerable:!0,get:function(){return p.default}});var v=T(b("./src/util/get-id.js")),E=T(b("./src/util/max.js")),_=T(b("./src/util/min.js")),j=T(b("./src/util/absMax.js")),A=T(b("./src/util/observer.js")),N=T(b("./src/util/style.js")),x=T(b("./src/util/request-animation-frame.js")),D=T(b("./src/util/frame.js")),O=T(b("./node_modules/debounce/index.js")),I=T(b("./src/util/prevent-click.js")),k=T(b("./src/util/fetch.js")),g=T(b("./src/util/clamp.js")),p=T(b("./src/util/orientation.js")),P=T(b("./src/util/silence-mode.js"));function T(V){return V&&V.__esModule?V:{default:V}}},"./src/util/max.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=b;function b(v){var E=-1/0;return Object.keys(v).forEach(function(_){v[_]>E&&(E=v[_])}),E}c.exports=d.default},"./src/util/min.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=b;function b(v){var E=Number(1/0);return Object.keys(v).forEach(function(_){v[_]<E&&(E=v[_])}),E}c.exports=d.default},"./src/util/observer.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;function b(x){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},b(x)}function v(x,D){if(!(x instanceof D))throw new TypeError("Cannot call a class as a function")}function E(x,D){for(var O=0;O<D.length;O++){var I=D[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,j(I.key),I)}}function _(x,D,O){return D&&E(x.prototype,D),O&&E(x,O),Object.defineProperty(x,"prototype",{writable:!1}),x}function j(x){var D=A(x,"string");return b(D)==="symbol"?D:String(D)}function A(x,D){if(b(x)!=="object"||x===null)return x;var O=x[Symbol.toPrimitive];if(O!==void 0){var I=O.call(x,D||"default");if(b(I)!=="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(x)}var N=function(){function x(){v(this,x),this._disabledEventEmissions=[],this.handlers=null}return _(x,[{key:"on",value:function(O,I){var k=this;this.handlers||(this.handlers={});var g=this.handlers[O];return g||(g=this.handlers[O]=[]),g.push(I),{name:O,callback:I,un:function(P,T){return k.un(P,T)}}}},{key:"un",value:function(O,I){if(!!this.handlers){var k=this.handlers[O],g;if(k)if(I)for(g=k.length-1;g>=0;g--)k[g]==I&&k.splice(g,1);else k.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(O,I){var k=this,g=function p(){for(var P=arguments.length,T=new Array(P),V=0;V<P;V++)T[V]=arguments[V];I.apply(k,T),setTimeout(function(){k.un(O,p)},0)};return this.on(O,g)}},{key:"setDisabledEventEmissions",value:function(O){this._disabledEventEmissions=O}},{key:"_isDisabledEventEmission",value:function(O){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(O)}},{key:"fireEvent",value:function(O){for(var I=arguments.length,k=new Array(I>1?I-1:0),g=1;g<I;g++)k[g-1]=arguments[g];if(!(!this.handlers||this._isDisabledEventEmission(O))){var p=this.handlers[O];p&&p.forEach(function(P){P.apply(void 0,k)})}}}]),x}();d.default=N,c.exports=d.default},"./src/util/orientation.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=_;var b={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function v(j,A){return Object.prototype.hasOwnProperty.call(b,j)&&A?b[j]:j}var E=Symbol("isProxy");function _(j,A){return j[E]?j:new Proxy(j,{get:function(x,D,O){if(D===E)return!0;if(D==="domElement")return x;if(D==="style")return _(x.style,A);if(D==="canvas")return _(x.canvas,A);if(D==="getBoundingClientRect")return function(){return _(x.getBoundingClientRect.apply(x,arguments),A)};if(D==="getContext")return function(){return _(x.getContext.apply(x,arguments),A)};var I=x[v(D,A)];return typeof I=="function"?I.bind(x):I},set:function(x,D,O){return x[v(D,A)]=O,!0}})}c.exports=d.default},"./src/util/prevent-click.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=v;function b(E){E.stopPropagation(),document.body.removeEventListener("click",b,!0)}function v(E){document.body.addEventListener("click",b,!0)}c.exports=d.default},"./src/util/request-animation-frame.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var b=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(v,E){return setTimeout(v,1e3/60)}).bind(window);d.default=b,c.exports=d.default},"./src/util/silence-mode.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=b;function b(){var v=new AudioContext,E=v.createBufferSource();E.buffer=v.createBuffer(1,1,44100),E.connect(v.destination),E.start();var _="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",j=document.createElement("div");j.innerHTML='<audio x-webkit-airplay="deny"></audio>';var A=j.children.item(0);A.src=_,A.preload="auto",A.type="audio/mpeg",A.disableRemotePlayback=!0,A.play(),A.remove(),j.remove()}c.exports=d.default},"./src/util/style.js":(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=b;function b(v,E){return Object.keys(E).forEach(function(_){v.style[_]!==E[_]&&(v.style[_]=E[_])}),v}c.exports=d.default},"./src/wavesurfer.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var v=O(b("./src/util/index.js")),E=x(b("./src/drawer.multicanvas.js")),_=x(b("./src/webaudio.js")),j=x(b("./src/mediaelement.js")),A=x(b("./src/peakcache.js")),N=x(b("./src/mediaelement-webaudio.js"));function x(o){return o&&o.__esModule?o:{default:o}}function D(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,y=new WeakMap;return(D=function(r){return r?y:a})(o)}function O(o,a){if(!a&&o&&o.__esModule)return o;if(o===null||M(o)!=="object"&&typeof o!="function")return{default:o};var y=D(a);if(y&&y.has(o))return y.get(o);var h={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in o)if(S!=="default"&&Object.prototype.hasOwnProperty.call(o,S)){var B=r?Object.getOwnPropertyDescriptor(o,S):null;B&&(B.get||B.set)?Object.defineProperty(h,S,B):h[S]=o[S]}return h.default=o,y&&y.set(o,h),h}function I(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),a&&k(o,a)}function k(o,a){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,r){return h.__proto__=r,h},k(o,a)}function g(o){var a=T();return function(){var h=V(o),r;if(a){var S=V(this).constructor;r=Reflect.construct(h,arguments,S)}else r=h.apply(this,arguments);return p(this,r)}}function p(o,a){if(a&&(M(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(o)}function P(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V(o){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},V(o)}function W(o,a,y){return a=l(a),a in o?Object.defineProperty(o,a,{value:y,enumerable:!0,configurable:!0,writable:!0}):o[a]=y,o}function M(o){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},M(o)}function R(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function L(o,a){for(var y=0;y<a.length;y++){var h=a[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(o,l(h.key),h)}}function C(o,a,y){return a&&L(o.prototype,a),y&&L(o,y),Object.defineProperty(o,"prototype",{writable:!1}),o}function l(o){var a=f(o,"string");return M(a)==="symbol"?a:String(a)}function f(o,a){if(M(o)!=="object"||o===null)return o;var y=o[Symbol.toPrimitive];if(y!==void 0){var h=y.call(o,a||"default");if(M(h)!=="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(o)}var w=function(o){I(y,o);var a=g(y);function y(h){var r;if(R(this,y),r=a.call(this),W(P(r),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:E.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),W(P(r),"backends",{MediaElement:j.default,WebAudio:_.default,MediaElementWebAudio:N.default}),W(P(r),"util",v),r.params=Object.assign({},r.defaultParams,h),r.params.splitChannelsOptions=Object.assign({},r.defaultParams.splitChannelsOptions,h.splitChannelsOptions),r.container=typeof h.container=="string"?document.querySelector(r.params.container):r.params.container,!r.container)throw new Error("Container element not found");if(r.params.mediaContainer==null?r.mediaContainer=r.container:typeof r.params.mediaContainer=="string"?r.mediaContainer=document.querySelector(r.params.mediaContainer):r.mediaContainer=r.params.mediaContainer,!r.mediaContainer)throw new Error("Media Container element not found");if(r.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(r.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(r.params.rtl===!0&&(r.params.vertical===!0?v.style(r.container,{transform:"rotateX(180deg)"}):v.style(r.container,{transform:"rotateY(180deg)"})),r.params.backgroundColor&&r.setBackgroundColor(r.params.backgroundColor),r.savedVolume=0,r.isMuted=!1,r.tmpEvents=[],r.currentRequest=null,r.arraybuffer=null,r.drawer=null,r.backend=null,r.peakCache=null,typeof r.params.renderer!="function")throw new Error("Renderer parameter is invalid");r.Drawer=r.params.renderer,r.params.backend=="AudioElement"&&(r.params.backend="MediaElement"),(r.params.backend=="WebAudio"||r.params.backend==="MediaElementWebAudio")&&!_.default.prototype.supportsWebAudio.call(null)&&(r.params.backend="MediaElement"),r.Backend=r.backends[r.params.backend],r.initialisedPluginList={},r.isDestroyed=!1,r.isReady=!1;var S=0;return r._onResize=v.debounce(function(){r.drawer.wrapper&&S!=r.drawer.wrapper.clientWidth&&!r.params.scrollParent&&(S=r.drawer.wrapper.clientWidth,S&&r.drawer.fireEvent("redraw"))},typeof r.params.responsive=="number"?r.params.responsive:100),p(r,P(r))}return C(y,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(r){var S=this;return r.forEach(function(B){return S.addPlugin(B)}),r.forEach(function(B){B.deferInit||S.initPlugin(B.name)}),this.fireEvent("plugins-registered",r),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(r){var S=this;if(!r.name)throw new Error("Plugin does not have a name!");if(!r.instance)throw new Error("Plugin ".concat(r.name," does not have an instance property!"));r.staticProps&&Object.keys(r.staticProps).forEach(function(F){S[F]=r.staticProps[F]});var B=r.instance,U=Object.getOwnPropertyNames(v.Observer.prototype);return U.forEach(function(F){B.prototype[F]=v.Observer.prototype[F]}),this[r.name]=new B(r.params||{},this),this.fireEvent("plugin-added",r.name),this}},{key:"initPlugin",value:function(r){if(!this[r])throw new Error("Plugin ".concat(r," has not been added yet!"));return this.initialisedPluginList[r]&&this.destroyPlugin(r),this[r].init(),this.initialisedPluginList[r]=!0,this.fireEvent("plugin-initialised",r),this}},{key:"destroyPlugin",value:function(r){if(!this[r])throw new Error("Plugin ".concat(r," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[r])throw new Error("Plugin ".concat(r," is not active and cannot be destroyed!"));if(typeof this[r].destroy!="function")throw new Error("Plugin ".concat(r," does not have a destroy function!"));return this[r].destroy(),delete this.initialisedPluginList[r],this.fireEvent("plugin-destroyed",r),this}},{key:"destroyAllPlugins",value:function(){var r=this;Object.keys(this.initialisedPluginList).forEach(function(S){return r.destroyPlugin(S)})}},{key:"createDrawer",value:function(){var r=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){r.drawBuffer(),r.drawer.progress(r.backend.getPlayedPercents())}),this.drawer.on("click",function(S,B){setTimeout(function(){return r.seekTo(B)},0)}),this.drawer.on("scroll",function(S){r.params.partialRender&&r.drawBuffer(),r.fireEvent("scroll",S)})}},{key:"createBackend",value:function(){var r=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){r.drawer.progress(r.backend.getPlayedPercents()),r.fireEvent("finish")}),this.backend.on("play",function(){return r.fireEvent("play")}),this.backend.on("pause",function(){return r.fireEvent("pause")}),this.backend.on("audioprocess",function(S){r.drawer.progress(r.backend.getPlayedPercents()),r.fireEvent("audioprocess",S)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){r.drawer.progress(r.backend.getPlayedPercents())}),this.backend.on("volume",function(){var S=r.getVolume();r.fireEvent("volume",S),r.backend.isMuted!==r.isMuted&&(r.isMuted=r.backend.isMuted,r.fireEvent("mute",r.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new A.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(r){r>=this.getDuration()?this.seekTo(1):this.seekTo(r/this.getDuration())}},{key:"play",value:function(r,S){var B=this;return this.params.ignoreSilenceMode&&v.ignoreSilenceMode(),this.fireEvent("interaction",function(){return B.play(r,S)}),this.backend.play(r,S)}},{key:"setPlayEnd",value:function(r){this.backend.setPlayEnd(r)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(r){this.skip(-r||-this.params.skipLength)}},{key:"skipForward",value:function(r){this.skip(r||this.params.skipLength)}},{key:"skip",value:function(r){var S=this.getDuration()||1,B=this.getCurrentTime()||0;B=Math.max(0,Math.min(S,B+(r||0))),this.seekAndCenter(B/S)}},{key:"seekAndCenter",value:function(r){this.seekTo(r),this.drawer.recenter(r)}},{key:"seekTo",value:function(r){var S=this;if(typeof r!="number"||!isFinite(r)||r<0||r>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return S.seekTo(r)});var B=this.params.backend==="WebAudio",U=this.backend.isPaused();B&&!U&&this.backend.pause();var F=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(r*this.getDuration()),this.drawer.progress(r),B&&!U&&this.backend.play(),this.params.scrollParent=F,this.fireEvent("seek",r)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(r){return this.backend.setSinkId(r)}},{key:"setVolume",value:function(r){if(this.isMuted===!0){this.savedVolume=r;return}this.backend.setVolume(r),this.fireEvent("volume",r)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(r){this.backend.setPlaybackRate(r)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(r){if(r===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(r),this.isMuted=r):r?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[r]?this.params.splitChannelsOptions.channelColors[r].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(r){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[S]?this.params.splitChannelsOptions.channelColors[S].waveColor=r:this.params.waveColor=r,this.drawBuffer()}},{key:"getProgressColor",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[r]?this.params.splitChannelsOptions.channelColors[r].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(r,S){this.params.splitChannelsOptions.channelColors[S]?this.params.splitChannelsOptions.channelColors[S].progressColor=r:this.params.progressColor=r,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(r){this.params.backgroundColor=r,v.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(r){this.params.cursorColor=r,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(r){this.params.height=r,this.drawer.setHeight(r*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(r){this.params.splitChannelsOptions.filterChannels=r,this.drawBuffer()}},{key:"drawBuffer",value:function(){var r=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),S=this.drawer.getWidth(),B=r,U=0,F=Math.max(U+S,B);this.params.fillParent&&(!this.params.scrollParent||r<S)&&(B=S,U=0,F=B);var G;if(this.params.partialRender){var X=this.peakCache.addRangeToPeakCache(B,U,F),K;for(K=0;K<X.length;K++)G=this.backend.getPeaks(B,X[K][0],X[K][1]),this.drawer.drawPeaks(G,B,X[K][0],X[K][1])}else G=this.backend.getPeaks(B,U,F),this.drawer.drawPeaks(G,B,U,F);this.fireEvent("redraw",G,B)}},{key:"zoom",value:function(r){r?(this.params.minPxPerSec=r,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",r)}},{key:"loadArrayBuffer",value:function(r){var S=this;this.decodeArrayBuffer(r,function(B){S.isDestroyed||S.loadDecodedBuffer(B)})}},{key:"loadDecodedBuffer",value:function(r){this.backend.load(r),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(r){var S=this,B=new FileReader;B.addEventListener("progress",function(U){return S.onProgress(U)}),B.addEventListener("load",function(U){return S.loadArrayBuffer(U.target.result)}),B.addEventListener("error",function(){return S.fireEvent("error","Error reading file")}),B.readAsArrayBuffer(r),this.empty()}},{key:"load",value:function(r,S,B,U){if(!r)throw new Error("url parameter cannot be empty");if(this.empty(),B){var F={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(B)===-1,"Peaks are not provided":!S,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof r!="string"},G=Object.keys(F).filter(function(X){return F[X]});G.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+G.join(`
	- `)),B=null)}switch(this.params.backend==="WebAudio"&&r instanceof HTMLMediaElement&&(r=r.src),this.params.backend){case"WebAudio":return this.loadBuffer(r,S,U);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(r,S,B,U)}}},{key:"loadBuffer",value:function(r,S,B){var U=this,F=function(X){return X&&U.tmpEvents.push(U.once("ready",X)),U.getArrayBuffer(r,function(K){return U.loadArrayBuffer(K)})};if(S)this.backend.setPeaks(S,B),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",F));else return F()}},{key:"loadMediaElement",value:function(r,S,B,U){var F=this,G=r;if(typeof r=="string")this.backend.load(G,this.mediaContainer,S,B);else{var X=r;this.backend.loadElt(X,S),G=X.src}this.tmpEvents.push(this.backend.once("canplay",function(){F.backend.destroyed||(F.drawBuffer(),F.isReady=!0,F.fireEvent("ready"))}),this.backend.once("error",function(K){return F.fireEvent("error",K)})),S&&(this.backend.setPeaks(S,U),this.drawBuffer(),this.fireEvent("waveform-ready")),(!S||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(G,function(K){F.decodeArrayBuffer(K,function(Q){F.backend.buffer=Q,F.backend.setPeaks(null),F.drawBuffer(),F.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(r,S){var B=this;this.isDestroyed||(this.arraybuffer=r,this.backend.decodeArrayBuffer(r,function(U){!B.isDestroyed&&B.arraybuffer==r&&(S(U),B.arraybuffer=null)},function(){return B.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(r,S){var B=this,U=Object.assign({url:r,responseType:"arraybuffer"},this.params.xhr),F=v.fetchFile(U);return this.currentRequest=F,this.tmpEvents.push(F.on("progress",function(G){B.onProgress(G)}),F.on("success",function(G){S(G),B.currentRequest=null}),F.on("error",function(G){B.fireEvent("error",G),B.currentRequest=null})),F}},{key:"onProgress",value:function(r){var S;r.lengthComputable?S=r.loaded/r.total:S=r.loaded/(r.loaded+1e6),this.fireEvent("loading",Math.round(S*100),r.target)}},{key:"exportPCM",value:function(r,S,B,U,F){r=r||1024,U=U||0,S=S||1e4,B=B||!1;var G=this.backend.getPeaks(r,U,F),X=[].map.call(G,function(K){return Math.round(K*S)/S});return new Promise(function(K,Q){if(!B){var re=new Blob([JSON.stringify(X)],{type:"application/json;charset=utf-8"}),J=URL.createObjectURL(re);window.open(J),URL.revokeObjectURL(J)}K(X)})}},{key:"exportImage",value:function(r,S,B){return r||(r="image/png"),S||(S=1),B||(B="dataURL"),this.drawer.getImage(r,S,B)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(r){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(r){return r.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(r){var S=new y(r);return S.init()}}]),y}(v.Observer);d.default=w,W(w,"VERSION","6.5.2"),W(w,"util",v),c.exports=d.default},"./src/webaudio.js":(c,d,b)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var v=_(b("./src/util/index.js"));function E(l){if(typeof WeakMap!="function")return null;var f=new WeakMap,w=new WeakMap;return(E=function(a){return a?w:f})(l)}function _(l,f){if(!f&&l&&l.__esModule)return l;if(l===null||j(l)!=="object"&&typeof l!="function")return{default:l};var w=E(f);if(w&&w.has(l))return w.get(l);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)){var h=a?Object.getOwnPropertyDescriptor(l,y):null;h&&(h.get||h.set)?Object.defineProperty(o,y,h):o[y]=l[y]}return o.default=l,w&&w.set(l,o),o}function j(l){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},j(l)}function A(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function N(l,f){for(var w=0;w<f.length;w++){var o=f[w];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,V(o.key),o)}}function x(l,f,w){return f&&N(l.prototype,f),w&&N(l,w),Object.defineProperty(l,"prototype",{writable:!1}),l}function D(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),f&&O(l,f)}function O(l,f){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},O(l,f)}function I(l){var f=p();return function(){var o=P(l),a;if(f){var y=P(this).constructor;a=Reflect.construct(o,arguments,y)}else a=o.apply(this,arguments);return k(this,a)}}function k(l,f){if(f&&(j(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(l)}function g(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function p(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(l){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},P(l)}function T(l,f,w){return f=V(f),f in l?Object.defineProperty(l,f,{value:w,enumerable:!0,configurable:!0,writable:!0}):l[f]=w,l}function V(l){var f=W(l,"string");return j(f)==="symbol"?f:String(f)}function W(l,f){if(j(l)!=="object"||l===null)return l;var w=l[Symbol.toPrimitive];if(w!==void 0){var o=w.call(l,f||"default");if(j(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(l)}var M="playing",R="paused",L="finished",C=function(l){D(w,l);var f=I(w);function w(o){var a,y,h;return A(this,w),h=f.call(this),T(g(h),"audioContext",null),T(g(h),"offlineAudioContext",null),T(g(h),"stateBehaviors",(a={},T(a,M,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var S=this.getDuration();return this.getCurrentTime()/S||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),T(a,R,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var S=this.getDuration();return this.getCurrentTime()/S||0},getCurrentTime:function(){return this.startPosition}}),T(a,L,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),a)),h.params=o,h.ac=o.audioContext||(h.supportsWebAudio()?h.getAudioContext():{}),h.lastPlay=h.ac.currentTime,h.startPosition=0,h.scheduledPause=null,h.states=(y={},T(y,M,Object.create(h.stateBehaviors[M])),T(y,R,Object.create(h.stateBehaviors[R])),T(y,L,Object.create(h.stateBehaviors[L])),y),h.buffer=null,h.filters=[],h.gainNode=null,h.mergedPeaks=null,h.offlineAc=null,h.peaks=null,h.playbackRate=1,h.analyser=null,h.scriptNode=null,h.source=null,h.splitPeaks=[],h.state=null,h.explicitDuration=o.duration,h.sinkStreamDestination=null,h.sinkAudioElement=null,h.destroyed=!1,h}return x(w,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(a){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,a)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(R),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(a){a&&a.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(a){this.state!==this.states[a]&&(this.state=this.states[a],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var a=arguments.length,y=new Array(a),h=0;h<a;h++)y[h]=arguments[h];this.setFilters(y)}},{key:"setFilters",value:function(a){this.disconnectFilters(),a&&a.length&&(this.filters=a,this.analyser.disconnect(),a.reduce(function(y,h){return y.connect(h),h},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(w.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(w.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var a=this;this.scriptNode.onaudioprocess=function(){var y=a.getCurrentTime();y>=a.getDuration()?(a.setState(L),a.fireEvent("pause")):y>=a.scheduledPause?a.pause():a.state===a.states[M]&&a.fireEvent("audioprocess",y)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(a){return a?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(a)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+a))}},{key:"setVolume",value:function(a){this.gainNode.gain.setValueAtTime(a,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(a,y,h){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(a,function(r){return y(r)},h):this.offlineAc.decodeAudioData(a).then(function(r){return y(r)}).catch(function(r){return h(r)})}},{key:"setPeaks",value:function(a,y){y!=null&&(this.explicitDuration=y),this.peaks=a}},{key:"setLength",value:function(a){if(!(this.mergedPeaks&&a==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var y=this.buffer?this.buffer.numberOfChannels:1,h;for(h=0;h<y;h++)this.splitPeaks[h]=[],this.splitPeaks[h][2*(a-1)]=0,this.splitPeaks[h][2*(a-1)+1]=0;this.mergedPeaks[2*(a-1)]=0,this.mergedPeaks[2*(a-1)+1]=0}}},{key:"getPeaks",value:function(a,y,h){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(y=y||0,h=h||a-1,this.setLength(a),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var r=this.createBuffer(1,4096,this.sampleRate);this.buffer=r.buffer}var S=this.buffer.length/a,B=~~(S/10)||1,U=this.buffer.numberOfChannels,F;for(F=0;F<U;F++){var G=this.splitPeaks[F],X=this.buffer.getChannelData(F),K=void 0;for(K=y;K<=h;K++){var Q=~~(K*S),re=~~(Q+S),J=X[Q],ue=J,ae=void 0;for(ae=Q;ae<re;ae+=B){var ce=X[ae];ce>ue&&(ue=ce),ce<J&&(J=ce)}G[2*K]=ue,G[2*K+1]=J,(F==0||ue>this.mergedPeaks[2*K])&&(this.mergedPeaks[2*K]=ue),(F==0||J<this.mergedPeaks[2*K+1])&&(this.mergedPeaks[2*K+1]=J)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(a){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=a,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[M]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(a,y){if(!!this.buffer)return this.scheduledPause=null,a==null&&(a=this.getCurrentTime(),a>=this.getDuration()&&(a=0)),y==null&&(y=this.getDuration()),this.startPosition=a,this.lastPlay=this.ac.currentTime,this.state===this.states[L]&&this.setState(R),{start:a,end:y}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(a,y){if(!!this.buffer){this.createSource();var h=this.seekTo(a,y);a=h.start,y=h.end,this.scheduledPause=y,this.source.start(0,a),this.resumeAudioContext(),this.setState(M),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(R),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(a){this.playbackRate=a||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(a){this.scheduledPause=a}}]),w}(v.Observer);d.default=C,T(C,"scriptBufferSize",256),c.exports=d.default},"./node_modules/debounce/index.js":c=>{function d(b,v,E){var _,j,A,N,x;v==null&&(v=100);function D(){var I=Date.now()-N;I<v&&I>=0?_=setTimeout(D,v-I):(_=null,E||(x=b.apply(A,j),A=j=null))}var O=function(){A=this,j=arguments,N=Date.now();var I=E&&!_;return _||(_=setTimeout(D,v)),I&&(x=b.apply(A,j),A=j=null),x};return O.clear=function(){_&&(clearTimeout(_),_=null)},O.flush=function(){_&&(x=b.apply(A,j),A=j=null,clearTimeout(_),_=null)},O}d.debounce=d,c.exports=d}},u={};function n(c){var d=u[c];if(d!==void 0)return d.exports;var b=u[c]={exports:{}};return s[c](b,b.exports,n),b.exports}var m=n("./src/wavesurfer.js");return m})())})(ni);var pn=mn(ni.exports);class Dt{constructor(i,s,u){var m;this.wavesurfer=u,this.wrapper=u.drawer.wrapper,this.util=u.util,this.style=this.util.style,this.regionsUtil=s,this.vertical=u.drawer.params.vertical,this.id=i.id==null?u.util.getId():i.id,this.start=Number(i.start)||0,this.end=i.end==null?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(i.end),this.resize=i.resize===void 0?!0:Boolean(i.resize),this.drag=i.drag===void 0?!0:Boolean(i.drag),this.contentEditable=Boolean(i.contentEditable),this.removeButton=Boolean(i.removeButton),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(i.loop),this.color=i.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=i.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=i.data||{},this.attributes=i.attributes||{},this.showTooltip=(m=i.showTooltip)!=null?m:!0,this.maxLength=i.maxLength,this.minLength=i.minLength,this._onRedraw=()=>this.updateRender(),this.scroll=i.scroll!==!1&&u.params.scrollParent,this.scrollSpeed=i.scrollSpeed||1,this.scrollThreshold=i.scrollThreshold||10,this.preventContextMenu=i.preventContextMenu===void 0?!1:Boolean(i.preventContextMenu);let n=i.channelIdx==null?-1:parseInt(i.channelIdx);this.channelIdx=n,this.regionHeight="100%",this.marginTop="0px",this.setHeight(),this.formatTimeCallback=i.formatTimeCallback,this.edgeScrollWidth=i.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}setHeight(){if(this.channelIdx!==-1){let i=this.wavesurfer.regions.channelCount;i>=0&&this.channelIdx<i&&(this.regionHeight=Math.floor(1/i*100)+"%",this.marginTop=this.wrapper.querySelector("canvas").getBoundingClientRect().height/i*this.channelIdx+"px")}}update(i,s){i.start!=null&&(this.start=Number(i.start)),i.end!=null&&(this.end=Number(i.end)),i.loop!=null&&(this.loop=Boolean(i.loop)),i.color!=null&&(this.color=i.color),i.handleStyle!=null&&(this.handleStyle=i.handleStyle),i.data!=null&&(this.data=i.data),i.resize!=null&&(this.resize=Boolean(i.resize),this.updateHandlesResize(this.resize)),i.drag!=null&&(this.drag=Boolean(i.drag)),i.maxLength!=null&&(this.maxLength=Number(i.maxLength)),i.minLength!=null&&(this.minLength=Number(i.minLength)),i.attributes!=null&&(this.attributes=i.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,s)}remove(){this.element&&(this.element.remove(),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}play(i){const s=i||this.start;this.wavesurfer.play(s,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}playLoop(i){this.loop=!0,this.play(i)}setLoop(i){this.loop=i}render(){this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id);for(const i in this.attributes)this.element.setAttribute("data-region-"+i,this.attributes[i]);if(this.setHeight(),this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.removeButton){const i=document.createElement("div");i.className="remove-region-button",i.textContent="\u2A2F",this.removeButtonEl=this.element.appendChild(i);const s={zIndex:4,position:"absolute",bottom:0,right:"4px",cursor:"pointer",fontSize:"20px",lineHeight:"21px",color:"grey"};this.style(this.removeButtonEl,s)}if(this.contentEditable){const i=document.createElement("div");i.className="region-content",i.contentEditable="true",i.innerText=this.data.text||"",this.contentEl=this.element.appendChild(i);const s={zIndex:4,padding:"2px 5px",cursor:"text"};this.style(this.contentEl,s)}if(this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.textLabelEl=this.util.withOrientation(this.element.appendChild(document.createElement("div")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.textLabelEl.className="region-label",this.textLabelEl.textContent=this.formatTimeCallback(this.start,this.end),this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";const i={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%"},s=this.handleStyle.left!=="none"?Object.assign({left:"0px"},i,this.handleStyle.left):null,u=this.handleStyle.right!=="none"?Object.assign({right:"0px"},i,this.handleStyle.right):null;s&&this.style(this.handleLeftEl,s),u&&this.style(this.handleRightEl,u)}this.updateRender(),this.bindEvents()}formatTime(i,s){return this.formatTimeCallback?this.formatTimeCallback(i,s):(i==s?[i]:[i,s]).map(u=>[Math.floor(u%3600/60),("00"+Math.floor(u%60)).slice(-2)].join(":")).join("-")}getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}updateRender(){const i=this.wavesurfer.getDuration(),s=this.getWidth();let u=this.start,n=this.end;if(u<0&&(u=0,n=n-u),n>i&&(n=i,u=i-(n-u)),this.minLength!=null&&(n=Math.max(u+this.minLength,n)),this.maxLength!=null&&(n=Math.min(u+this.maxLength,n)),this.element!=null){const m=Math.round(u/i*s),c=Math.round(n/i*s)-m;this.setHeight(),this.textLabelEl.textContent=this.formatTimeCallback(this.start,this.end),this.style(this.element,{height:this.regionHeight,top:this.marginTop,left:m+"px",width:c+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"});for(const d in this.attributes)this.element.setAttribute("data-region-"+d,this.attributes[d]);this.element.classList.toggle("looping",this.loop),this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}bindInOut(){this.firedIn=!1,this.firedOut=!1;const i=s=>{let u=Math.round(this.start*10)/10,n=Math.round(this.end*10)/10;s=Math.round(s*10)/10,!this.firedOut&&this.firedIn&&(u>s||n<=s)&&(this.firedOut=!0,this.firedIn=!1,this.fireEvent("out"),this.wavesurfer.fireEvent("region-out",this)),!this.firedIn&&u<=s&&n>s&&(this.firedIn=!0,this.firedOut=!1,this.fireEvent("in"),this.wavesurfer.fireEvent("region-in",this))};this.wavesurfer.backend.on("audioprocess",i),this.on("remove",()=>{this.wavesurfer.backend.un("audioprocess",i)}),this.on("out",()=>{if(this.loop){const s=this.wavesurfer.getCurrentTime();s>=this.start&&s<=this.end&&this.wavesurfer.play(this.start)}})}bindEvents(){const i=this.preventContextMenu;this.element.addEventListener("mouseenter",s=>{this.fireEvent("mouseenter",s),this.wavesurfer.fireEvent("region-mouseenter",this,s)}),this.element.addEventListener("mouseleave",s=>{this.fireEvent("mouseleave",s),this.wavesurfer.fireEvent("region-mouseleave",this,s)}),this.element.addEventListener("click",s=>{s.preventDefault(),this.fireEvent("click",s),this.wavesurfer.fireEvent("region-click",this,s)}),this.element.addEventListener("dblclick",s=>{s.stopPropagation(),s.preventDefault(),this.fireEvent("dblclick",s),this.wavesurfer.fireEvent("region-dblclick",this,s)}),this.element.addEventListener("contextmenu",s=>{i&&s.preventDefault(),this.fireEvent("contextmenu",s),this.wavesurfer.fireEvent("region-contextmenu",this,s)}),(this.drag||this.resize)&&this.bindDragEvents(),this.contentEditable&&(this.contentEl.addEventListener("blur",this.onContentBlur.bind(this)),this.contentEl.addEventListener("click",this.onContentClick.bind(this))),this.removeButton&&this.removeButtonEl.addEventListener("click",this.onRemove.bind(this))}bindDragEvents(){const i=this.wavesurfer.drawer.container,s=this.scrollSpeed;let u,n,m,c,d,b=!1,v,E,_,j;const A=O=>{let I=this.util.withOrientation(O,this.vertical);const k=this.wavesurfer.getDuration();if(!v||!m&&!d)return;const g=I.clientX;let p=0,P=0,T=0,V=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(O)*k);if(m)v===-1?(P=_*this.wavesurfer.params.minPxPerSec,p=g-E.left):(P=j*this.wavesurfer.params.minPxPerSec,p=E.right-g);else{let L=this.minLength;L||(L=0),d==="start"?(V>this.end-L&&(V=this.end-L,T=s*v),V<0&&(V=0)):d==="end"&&(V<this.start+L&&(V=this.start+L,T=s*v),V>k&&(V=k))}const W=this.wrapper.scrollLeft;if(v===-1){if(Math.round(W)===0||Math.round(W-P+p)<=0)return}else if(Math.round(W)===c||Math.round(W+P-p)>=c)return;let M=W-T+s*v;if(v===-1){const L=Math.max(0+P-p,M);this.wrapper.scrollLeft=M=L}else{const L=Math.min(c-P+p,M);this.wrapper.scrollLeft=M=L}const R=V-u;u=V,m?this.onDrag(R):this.onResize(R,d),window.requestAnimationFrame(()=>{A(O)})},N=O=>{const I=this.wavesurfer.getDuration();O.touches&&O.touches.length>1||(n=O.targetTouches?O.targetTouches[0].identifier:null,(this.drag||this.resize)&&O.stopPropagation(),u=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(O,!0)*I),_=u-this.start,j=this.end-u,c=this.wrapper.scrollWidth-this.wrapper.clientWidth,E=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.isResizing=!1,this.isDragging=!1,O.target.tagName.toLowerCase()==="handle"?(this.isResizing=!0,d=O.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(this.isDragging=!0,m=!0,d=!1))},x=O=>{O.touches&&O.touches.length>1||((m||d)&&(this.isDragging=!1,this.isResizing=!1,m=!1,v=null,d=!1),b&&(b=!1,this.util.preventClick(),this.fireEvent("update-end",O),this.wavesurfer.fireEvent("region-update-end",this,O)))},D=O=>{const I=this.wavesurfer.getDuration();let k=this.util.withOrientation(O,this.vertical),g=null;if(O.touches&&O.touches.length>1||O.targetTouches&&O.targetTouches[0].identifier!=n||!m&&!d)return;let p=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(O)*I);if(m){const P=this.wavesurfer.getDuration();p>P-j&&(p=P-j),p-_<0&&(p=_)}if(d){let P=this.minLength;P||(P=0),d==="start"?(p>this.end-P&&(p=this.end-P),p<0&&(p=0)):d==="end"&&(p<this.start+P&&(p=this.start+P,g=p-(this.end+(p-u))),p>I&&(p=I))}if(g||(g=p-u),u=p,this.drag&&m&&(b=b||!!g,this.onDrag(g)),this.resize&&d&&(b=b||!!g,this.onResize(g,d)),this.scroll&&i.clientWidth<this.wrapper.scrollWidth){let P=k.clientX;P<E.left+this.edgeScrollWidth?v=-1:P>E.right-this.edgeScrollWidth?v=1:v=null,v&&A(O)}};this.element.addEventListener("mousedown",N),this.element.addEventListener("touchstart",N),document.body.addEventListener("mousemove",D),document.body.addEventListener("touchmove",D,{passive:!1}),document.addEventListener("mouseup",x),document.body.addEventListener("touchend",x),this.on("remove",()=>{document.removeEventListener("mouseup",x),document.body.removeEventListener("touchend",x),document.body.removeEventListener("mousemove",D),document.body.removeEventListener("touchmove",D)}),this.wavesurfer.on("destroy",()=>{document.removeEventListener("mouseup",x),document.body.removeEventListener("touchend",x)})}onDrag(i){const s=this.wavesurfer.getDuration();this.end+i>s&&(i=s-this.end),this.start+i<0&&(i=this.start*-1);let u=null;for(let m of Object.values(this.wavesurfer.regions.list))m.id!==this.id&&(this.channelIdx===m.channelIdx&&(i>0?m.start>=this.end&&(!u||u.start>m.start)&&(u=m):i<0&&m.end<=this.start&&(!u||u.end<m.end)&&(u=m)),m.element.classList.toggle("highlight-start",m.start===this.start||m.start==this.end),m.element.classList.toggle("highlight-end",m.end===this.end||m.end==this.start),m.fadeTimer&&clearTimeout(m.fadeTimer),m.fadeTimer=setTimeout(()=>{m.element.classList.remove("highlight-end"),m.element.classList.remove("highlight-start")},1e3));u!=null&&(i<0?this.start+i<=u.end&&(i=u.end-this.start):i>0&&this.end+i>=u.start&&(i=u.start-this.end));const n={direction:this._getDragDirection(i),action:"drag"};this.update({start:this.regionsUtil.getRegionSnapToGridValue(this.start+i),end:this.regionsUtil.getRegionSnapToGridValue(this.end+i)},n)}_getDragDirection(i){return i<0?"left":i>0?"right":null}onResize(i,s){const u=this.wavesurfer.getDuration(),n={action:"resize",direction:s==="start"?"left":"right"};if(s==="start"){i>0&&this.end-(this.start+i)<this.minLength&&(i=this.end-this.minLength-this.start),i<0&&this.end-(this.start+i)>this.maxLength&&(i=this.end-this.start-this.maxLength),i<0&&this.start+i<0&&(i=this.start*-1);let m=null;if(i<0){for(let c of Object.values(this.wavesurfer.regions.list))c.id!==this.id&&(c.channelIdx==this.channelIdx&&c.end<=this.start&&(!m||m.end<c.end)&&(m=c),c.element.classList.toggle("highlight-start",c.start===this.start),c.element.classList.toggle("highlight-end",c.end==this.start),c.fadeTimer&&clearTimeout(c.fadeTimer),c.fadeTimer=setTimeout(()=>{c.element.classList.remove("highlight-end"),c.element.classList.remove("highlight-start")},1e3));m!=null&&this.start+i<m.end&&(i=m.end-this.start)}this.update({start:this.regionsUtil.getRegionSnapToGridValue(Math.min(this.start+i,this.end)),end:this.regionsUtil.getRegionSnapToGridValue(Math.max(this.start+i,this.end))},n)}else{i<0&&this.end+i-this.start<this.minLength&&(i=this.start+this.minLength-this.end),i>0&&this.end+i-this.start>this.maxLength&&(i=this.maxLength-(this.end-this.start)),i>0&&this.end+i>u&&(i=u-this.end);let m=null;if(i>0){for(let c of Object.values(this.wavesurfer.regions.list))c.id!==this.id&&(c.channelIdx==this.channelIdx&&c.start>=this.end&&(!m||m.start>c.start)&&(m=c),c.element.classList.toggle("highlight-start",c.start===this.end),c.element.classList.toggle("highlight-end",c.end==this.end),c.fadeTimer&&clearTimeout(c.fadeTimer),c.fadeTimer=setTimeout(()=>{c.element.classList.remove("highlight-end"),c.element.classList.remove("highlight-start")},1e3));m!=null&&this.end+i>m.start&&(i=m.start-this.end)}this.update({start:this.regionsUtil.getRegionSnapToGridValue(Math.min(this.end+i,this.start)),end:this.regionsUtil.getRegionSnapToGridValue(Math.max(this.end+i,this.start))},n)}}onContentBlur(i){const{text:s}=this.data||{},u=i.target.innerText,n={...this.data,text:u},m={action:"contentEdited",oldText:s,text:u};this.update({data:n},m)}onContentClick(i){i.stopPropagation()}onRemove(i){i.stopPropagation(),this.remove()}updateHandlesResize(i){let s;i?s=this.vertical?"row-resize":"col-resize":s="auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:s}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:s})}}class gt{static create(i){return{name:"regions",deferInit:i&&i.deferInit?i.deferInit:!1,params:i,staticProps:{addRegion(s){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(s)},clearRegions(){this.regions&&this.regions.clear()},enableDragSelection(s){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(s)},disableDragSelection(){this.regions.disableDragSelection()}},instance:gt}}constructor(i,s){this.params=i,this.wavesurfer=s,this.channelCount=0,this.util={...s.util,getRegionSnapToGridValue:m=>this.getRegionSnapToGridValue(m,i)},this.maxRegions=i.maxRegions,this.regionsMinLength=i.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(m=>{Dt.prototype[m]=this.util.Observer.prototype[m]}),this.wavesurfer.Region=Dt;const n=.05;this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.orientation=this.wavesurfer.drawer.orientation,this.defaultEdgeScrollWidth=this.wrapper.clientWidth*n,this.params.regions&&this.params.regions.forEach(m=>{this.add(m)})},this.list={},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.vertical=this.wavesurfer.drawer.params.vertical,this.params.dragSelection&&this.enableDragSelection(this.params),Object.keys(this.list).forEach(m=>{this.list[m].updateRender()})}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}add(i){if(this.wouldExceedMaxRegions())return null;i={edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,contentEditable:this.params.contentEditable,removeButton:this.params.removeButton,...i},!i.formatTimeCallback&&this.params.formatTimeCallback&&(i={...i,formatTimeCallback:this.params.formatTimeCallback}),!i.minLength&&this.regionsMinLength&&(i={...i,minLength:this.regionsMinLength});const s=new this.wavesurfer.Region(i,this.util,this.wavesurfer);return this.list[s.id]=s,s.on("remove",()=>{delete this.list[s.id]}),s}clear(){Object.keys(this.list).forEach(i=>{this.list[i].remove()})}enableDragSelection(i){this.disableDragSelection();const s=i.slop||2,u=this.wavesurfer.drawer.container,n=i.scroll!==!1&&this.wavesurfer.params.scrollParent,m=i.scrollSpeed||1,c=i.scrollThreshold||10;let d,b=this.wavesurfer.getDuration(),v,E,_,j,A=0,N,x;const D=g=>{if(!_||!N)return;let p=this.wrapper.scrollLeft+m*N;this.wrapper.scrollLeft=p=Math.min(v,Math.max(0,p));const P=this.wavesurfer.drawer.handleEvent(g);_.update({start:Math.min(P*b,E*b),end:Math.max(P*b,E*b)}),p<v&&p>0&&window.requestAnimationFrame(()=>{D(g)})},O=g=>{if(!(g.touches&&g.touches.length>1)){if(b=this.wavesurfer.getDuration(),j=g.targetTouches?g.targetTouches[0].identifier:null,v=this.wrapper.scrollWidth-this.wrapper.clientWidth,x=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.wavesurfer.params.splitChannels&&this.wavesurfer.params.splitChannelsOptions.splitDragSelection){const p=(g.touches?g.touches[0].clientY:g.clientY)-x.top,P=this.channelCount,T=this.wrapper.clientHeight/P,V=Math.floor(p/T);i.channelIdx=V;const W=this.wavesurfer.params.splitChannelsOptions.channelColors[V];W&&W.dragColor&&(i.color=W.dragColor)}d=!0,E=this.wavesurfer.drawer.handleEvent(g,!0),_=null,N=null}};this.wrapper.addEventListener("mousedown",O),this.wrapper.addEventListener("touchstart",O),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchstart",O),this.wrapper.removeEventListener("mousedown",O)});const I=g=>{g.touches&&g.touches.length>1||(d=!1,A=0,N=null,_&&(this.util.preventClick(),_.fireEvent("update-end",g),this.wavesurfer.fireEvent("region-update-end",_,g)),_=null)};this.wrapper.addEventListener("mouseleave",I),this.wrapper.addEventListener("mouseup",I),this.wrapper.addEventListener("touchend",I),document.body.addEventListener("mouseup",I),document.body.addEventListener("touchend",I),this.on("disable-drag-selection",()=>{document.body.removeEventListener("mouseup",I),document.body.removeEventListener("touchend",I),this.wrapper.removeEventListener("touchend",I),this.wrapper.removeEventListener("mouseup",I),this.wrapper.removeEventListener("mouseleave",I)});const k=g=>{if(!d||++A<=s||g.touches&&g.touches.length>1||g.targetTouches&&g.targetTouches[0].identifier!=j||!_&&(_=this.add(i||{}),!_))return;const p=this.wavesurfer.drawer.handleEvent(g),P=this.wavesurfer.regions.util.getRegionSnapToGridValue(E*b),T=this.wavesurfer.regions.util.getRegionSnapToGridValue(p*b);_.update({start:Math.min(T,P),end:Math.max(T,P)});let V=this.util.withOrientation(g,this.vertical);if(n&&u.clientWidth<this.wrapper.scrollWidth){const W=V.clientX-x.left;W<=c?N=-1:W>=x.right-c?N=1:N=null,N&&D(g)}};this.wrapper.addEventListener("mousemove",k),this.wrapper.addEventListener("touchmove",k),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchmove",k),this.wrapper.removeEventListener("mousemove",k)}),this.wavesurfer.on("region-created",g=>{this.regionsMinLength&&(g.minLength=this.regionsMinLength)})}disableDragSelection(){this.fireEvent("disable-drag-selection")}getCurrentRegion(){const i=this.wavesurfer.getCurrentTime();let s=null;return Object.keys(this.list).forEach(u=>{const n=this.list[u];n.start<=i&&n.end>=i&&(!s||n.end-n.start<s.end-s.start)&&(s=n)}),s}getRegionSnapToGridValue(i,s){return s.snapToGridInterval?Math.round(i*100)/100:i}}const Ue={audioDataUri:null,selectedRegion:null,audioLoaded:!1,seekPos:0,volume:.5,playing:!1,bashscript:"",paneSize:200,trackId:0,zoomFactor:20},gn=Wi({name:"IndexPage",data(){return{...Ue,tracks:[],palette:["rgba(255, 230, 230, 0.7)","rgba(255, 232, 204, 0.7)","rgba(255, 255, 204, 0.7)","rgba(230, 255, 230, 0.7)","rgba(230, 247, 255, 0.7)","rgba(230, 230, 255, 0.7)","rgba(255, 242, 204, 0.7)","rgba(204, 255, 242, 0.7)","rgba(255, 204, 230, 0.7)","rgba(242, 255, 204, 0.7)"]}},methods:{saturate(t,i){const s=$e.rgbToHsv($e.textToRgb(t));return s.s=i,$e.rgbToHex($e.hsvToRgb(s))},downloadScript(){const t=`data:text/plain,${encodeURIComponent(this.bashscript)}`;this.promptDownload("untitled.songsync",t)},promptDownload(t,i){var s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",t),document.body.appendChild(s),s.click(),document.body.removeChild(s)},exportProject(){this.saveState();const t=this.$q.localStorage.getItem("_savedState"),i="data:application/json, "+encodeURIComponent(JSON.stringify(t));this.promptDownload("project.json",i)},saveState(){this.$q.localStorage.set("_savedState",{audioDataUri:this.audioDataUri,tracks:this.tracks,regions:Array.from(Object.values(this.ws.regions.list)).map(t=>({id:t.id,channelIdx:t.channelIdx,start:t.start,end:t.end}))})},loadState(t){t||(t=this.$q.localStorage.getItem("_savedState")||{...Ue,tracks:[]}),this.resetProject(),this.audioDataUri=t.audioDataUri,this.tracks=t.tracks,this.trackId=this.tracks.length,this.ws.regions.channelCount=this.tracks.length;let i=()=>{if(this.audioDataUri){this.audioLoaded=!0;for(let s of Object.values(t.regions))this.ws.regions.add({channelIdx:s.channelIdx,id:s.id,start:s.start,end:s.end,color:this.tracks[s.channelIdx].color})}this.ws.un("ready",i),this.saveState()};this.audioDataUri&&(this.ws.on("ready",i),this.ws.load(this.audioDataUri))},changeTrackColor(t,i){t.color=i;for(let s of Object.values(this.ws.regions.list))s.channelIdx==t.id&&(s.color=t.color,s.updateRender());this.saveState()},deleteTrack(t){this.$q.dialog({title:"Delete Effect?",message:"Are you sure?",cancel:!0,persistent:!0}).onOk(()=>{for(let i of Array.from(Object.values(this.ws.regions.list)).filter(s=>s.channelIdx==t.id))i.remove(),this.selectedRegion.id==i.id&&(this.selectedRegion=null);this.tracks.splice(t.id,1),this.tracks.forEach((i,s)=>{i.id!=s&&(Array.from(Object.values(this.ws.regions.list)).forEach(u=>{u.channelIdx==i.id&&(u.channelIdx=s)}),i.id=s)}),this.ws.regions.channelCount-=1,this.redrawRegions(),this.trackId-=1,this.generateScript()})},deleteRegion(){this.selectedRegion.remove(),this.selectedRegion=null},playRegion(){Object.keys(this.ws.regions.list).forEach(t=>{t!=e.id&&(this.ws.regions.list[t].setLoop(!1),this.ws.regions.list[t].updateRender()),this.selectedRegion.play()})},playRegionLooped(){Object.keys(this.ws.regions.list).forEach(t=>{t!=e.id&&(this.ws.regions.list[t].setLoop(!1),this.ws.regions.list[t].updateRender())}),this.selectedRegion.playLoop(),this.selectedRegion.updateRender()},newProject(){this.tracks.length>0?this.$q.dialog({title:"Create New Project?",message:"Your current work will be lost.",cancel:!0,persistent:!0}).onOk(()=>{this.resetProject()}):this.resetProject()},resetProject(){for(let t of Object.keys(Ue))this[t]=Ue[t];this.tracks=[],this.ws.clearRegions(),this.ws.setVolume(this.volume),this.ws.zoom(this.zoomFactor),this.ws.empty()},seekTo(t){this.ws.seekAndCenter(Math.min(1,parseFloat(t)/this.ws.getDuration()))},seekToStart(){this.ws.seekAndCenter(0)},seekToEnd(){this.ws.seekAndCenter(1)},playPause(){if(this.playing=!this.playing,this.playing||this.tracks.forEach(t=>{t.playing=!1}),!this.playing)for(let t of Object.values(this.ws.regions.list))t.setLoop(!1),t.updateRender();this.ws.playPause()},setVolume(t){this.ws.setVolume(t)},renameTrack(t,i){t.target.blur(),i.label=t.target.textContent,this.generateScript()},copyToClipboard(){navigator.clipboard.writeText(this.bashscript)},uploadAudio(){document.getElementById("audioInput").click()},onAudioUploaded(t){this.audioLoaded=!0;const i=new FileReader;i.addEventListener("load",s=>{this.audioDataUri=s.target.result,console.log("saving");let u=()=>{this.saveState(),this.ws.un("ready",u)};this.ws.on("ready",u),this.ws.load(this.audioDataUri)}),i.readAsDataURL(t.target.files[0])},uploadProject(){document.getElementById("projectInput").click()},onProjectUploaded(t){let i=new FileReader;t.target,i.addEventListener("load",s=>{let u=JSON.parse(s.target.result);this.loadState(u)}),i.readAsText(t.target.files[0])},uploadCfg(){document.getElementById("cfgInput").click()},onCfgUploaded(t){let i=new FileReader;const s=t.target;i.addEventListener("load",u=>{let n=u.target.result.split(`
`);for(let m of n){let c=m.match(/^\[led_effect\s+([^\]]+)\]$/i);c!=null&&this.addTrack(c[1])}s.value=null}),i.readAsText(t.target.files[0])},generateScript(){this.bashscript="";let t=new Map;for(let u of Object.values(this.ws.regions.list))t.has(u.start)||t.set(u.start,[]),t.has(u.end)||t.set(u.end,[]),t.get(u.end).unshift({action:"end",region:this.tracks[u.channelIdx]}),t.get(u.start).push({action:"start",region:this.tracks[u.channelIdx]});let i=Array.from(t.keys());i.sort((u,n)=>u-n);let s=0;for(;i.length>0;){let u=i.shift(),n=Math.round((u-s)*100)/100;n!=0&&(this.bashscript+=`sleep:${n}
`);for(let m of t.get(u))this.bashscript+=`${m.action=="start"?"on":"off"}:${m.region.label}
`;s=u}this.saveState()},insertRegion(t){let i=this.ws.getCurrentTime();for(let s of Object.values(this.ws.regions.list))if(s.channelIdx==t.id&&s.start<=i&&s.end>=i)return;this.ws.regions.add({channelIdx:t.id,color:t.color,start:Math.round(this.ws.getCurrentTime()*100)/100,end:Math.round(this.ws.getCurrentTime()*100)/100+.5})},onResize(t){this.ws&&t.height!=this.ws.getHeight()&&this.ws.setHeight(t.height)},nextTrackId(){return this.trackId++},setZoom(t){this.zoomFactor=t,this.ws.zoom(t)},addTrack(t){let i=this.nextTrackId();this.tracks.push({id:i,label:t||`effect_${i}`,color:this.palette[i%this.palette.length]}),this.ws.regions.channelCount+=1,Object.values(this.ws.regions.list).forEach(s=>s.updateRender())},redrawRegions(){Object.keys(this.ws.regions.list).forEach(t=>{this.ws.regions.list[t].updateRender()})}},mounted(){this.ws=pn.create({container:".waveform",scrollParent:!0,responsive:!0,waveColor:"#999",progressColor:"#999",plugins:[gt.create({regionsMinLength:.01,snapToGridInterval:.01,style:{},formatTimeCallback:(t,i)=>`${t}s-${i}s`})]}),this.ws.on("play",t=>{console.log("play"),this.playing=!0}),this.ws.on("pause",t=>{console.log("pause"),this.playing=!1}),this.ws.on("seek",t=>{this.seekPos=(Math.round(this.ws.getCurrentTime()*100)/100).toFixed(2)}),this.ws.on("audioprocess",t=>{this.seekPos=(Math.round(this.ws.getCurrentTime()*100)/100).toFixed(2)}),this.ws.on("region-in",t=>{this.tracks[t.channelIdx].playing=!0}),this.ws.on("region-out",t=>{this.tracks[t.channelIdx].playing=!1}),this.ws.on("region-updated",ot(this.generateScript,300)),this.ws.on("region-removed",ot(this.generateScript,300)),this.ws.on("region-created",ot(this.generateScript,300)),this.ws.on("region-created",t=>{this.selectedRegion&&this.selectedRegion.element.classList.remove("selected"),this.selectedRegion=t,t.element.classList.add("selected")}),this.ws.on("region-click",(t,i)=>{console.log(i);let s=!1;this.selectedRegion&&(s=this.selectedRegion.id==t.id,this.selectedRegion.element.classList.remove("selected")),this.selectedRegion=t,t.element.classList.add("selected"),s||(i.preventDefault(),i.stopPropagation())}),this.loadState()},beforeUnmount(){}}),yn={class:"tracklist"},bn=de("div",{class:"vert-separator"},null,-1),wn=de("div",{class:"waveform"},null,-1),kn={style:{width:"10vw"},class:"row q-mr-lg"},Cn=de("div",{class:"col-1"},null,-1),Pn=de("div",{class:"col-1"},null,-1),An={style:{width:"10vw"},class:"row"},En=de("div",{class:"col-1"},null,-1),Sn=de("div",{class:"col-1"},null,-1),_n=["value"];function Rn(t,i,s,u,n,m){return Se(),ze(rn,{class:"flex column"},{default:$(()=>[q(Fe,{class:"bg-secondary text-white"},{default:$(()=>[q(fe,{dense:"",flat:""},{default:$(()=>[ne("Project "),q(He,{autoClose:""},{default:$(()=>[q(Ne,{dense:""},{default:$(()=>[q(ve,{clickable:"",onClick:t.newProject},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"add_chart"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("New Project...")]),_:1}),q(he,{caption:""},{default:$(()=>[ne("Clear everything and start a new project")]),_:1})]),_:1})]),_:1},8,["onClick"]),q(lt),q(ve,{clickable:"",onClick:t.uploadAudio},{default:$(()=>[de("input",{type:"file",id:"audioInput",style:{display:"none"},onChange:i[0]||(i[0]=(...c)=>t.onAudioUploaded&&t.onAudioUploaded(...c))},null,32),q(ie,{side:""},{default:$(()=>[q(le,{name:"library_music"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Load Audio...")]),_:1}),q(he,{caption:""},{default:$(()=>[ne("Upload a new audio track")]),_:1})]),_:1})]),_:1},8,["onClick"]),q(ve,{clickable:"",onClick:t.uploadCfg},{default:$(()=>[de("input",{type:"file",id:"cfgInput",style:{display:"none"},onChange:i[1]||(i[1]=(...c)=>t.onCfgUploaded&&t.onCfgUploaded(...c))},null,32),q(ie,{side:""},{default:$(()=>[q(le,{name:"blur_on"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Load Effects...")]),_:1}),q(he,{caption:""},{default:$(()=>[ne("Import effect names from a klipper config file")]),_:1})]),_:1})]),_:1},8,["onClick"]),q(lt),q(ve,{clickable:"",onClick:t.uploadProject},{default:$(()=>[de("input",{type:"file",id:"projectInput",style:{display:"none"},onChange:i[2]||(i[2]=(...c)=>t.onProjectUploaded&&t.onProjectUploaded(...c))},null,32),q(ie,{side:""},{default:$(()=>[q(le,{name:"upload"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Import Project...")]),_:1})]),_:1})]),_:1},8,["onClick"]),q(ve,{clickable:"",onClick:t.exportProject},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"download"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Export Project...")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),q(fe,{dense:"",flat:"",disable:!t.selectedRegion},{default:$(()=>[ne("Region "),q(He,{autoClose:""},{default:$(()=>[q(Ne,{dense:""},{default:$(()=>[q(ve,{clickable:"",onClick:t.deleteRegion},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"delete"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Delete")]),_:1})]),_:1})]),_:1},8,["onClick"]),q(ve,{clickable:"",onClick:t.playRegion},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"play_arrow"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Play")]),_:1})]),_:1})]),_:1},8,["onClick"]),q(ve,{clickable:"",onClick:t.playRegionLooped},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"repeat"})]),_:1}),q(ie,null,{default:$(()=>[q(he,null,{default:$(()=>[ne("Play looped")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["disable"])]),_:1}),q(Gi,{modelValue:t.paneSize,"onUpdate:modelValue":i[3]||(i[3]=c=>t.paneSize=c),unit:"px"},{before:$(()=>[de("div",yn,[(Se(!0),Ct(At,null,Pt(t.tracks,c=>(Se(),ze(Fe,{class:ji(["track-title",c.playing?"track-playing":null]),key:c.id,style:Et(`background-color: ${c.playing?t.saturate(c.color,50):c.color};`)},{default:$(()=>[q(Hi,{contenteditable:"true",onKeydown:Ii(d=>t.renameTrack(d,c),["enter"])},{default:$(()=>[ne(qi(c.label),1)]),_:2},1032,["onKeydown"]),q(fe,{flat:"",round:"",dense:"",icon:"add",onClick:d=>t.insertRegion(c)},null,8,["onClick"]),q(fe,{flat:"",round:"",dense:"",icon:"more_vert"},{default:$(()=>[q(He,null,{default:$(()=>[q(Ne,{dense:""},{default:$(()=>[zi((Se(),ze(ve,{clickable:"",onClick:()=>t.deleteTrack(c)},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"delete"})]),_:1}),q(ie,null,{default:$(()=>[ne("Delete Effect")]),_:1})]),_:2},1032,["onClick"])),[[an]]),q(ve,{clickable:""},{default:$(()=>[q(ie,{side:""},{default:$(()=>[q(le,{name:"palette"})]),_:1}),q(ie,null,{default:$(()=>[ne("Change Color")]),_:1}),q(ie,{side:""},{default:$(()=>[q(le,{name:"arrow_right"})]),_:1}),q(He,{"auto-close":"",anchor:"top end",self:"top start"},{default:$(()=>[q(Ne,null,{default:$(()=>[(Se(!0),Ct(At,null,Pt(t.palette,d=>(Se(),ze(ve,{key:d,dense:"",clickable:"",style:Et(`background-color: ${d}`),onClick:b=>t.changeTrackColor(c,d)},null,8,["style","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","style"]))),128)),q(Ni,{onResize:t.onResize},null,8,["onResize"])])]),separator:$(()=>[bn]),after:$(()=>[wn]),_:1},8,["modelValue"]),q(Fe,{class:"bg-secondary text-white"},{default:$(()=>[q(fe,{flat:"",dense:"",onClick:i[4]||(i[4]=()=>t.addTrack()),icon:"add"},{default:$(()=>[ne("Effect")]),_:1}),q(dt),q(fe,{disable:!t.audioLoaded,flat:"",dense:"",onClick:t.seekToStart,icon:"skip_previous"},null,8,["disable","onClick"]),q(fe,{disable:!t.audioLoaded,flat:"",dense:"",onClick:t.playPause,icon:t.playing?"pause":"play_arrow"},null,8,["disable","onClick","icon"]),q(fe,{disable:!t.audioLoaded,flat:"",dense:"",onClick:t.seekToEnd,icon:"skip_next"},null,8,["disable","onClick"]),q(dt),q(Vi,{disable:!t.audioLoaded,dense:"",rounded:"",standout:"","input-class":"text-white text-right","model-value":t.seekPos,"onUpdate:modelValue":t.seekTo,color:"secondary"},{append:$(()=>[q(le,{name:"schedule",size:"xs",color:"white"})]),_:1},8,["disable","model-value","onUpdate:modelValue"]),de("div",kn,[q(le,{size:"sm",name:"volume_down",class:"col-1"}),Cn,q(Mt,{step:.01,class:"col-8",color:"white",min:0,max:1,modelValue:t.volume,"onUpdate:modelValue":t.setVolume},null,8,["step","modelValue","onUpdate:modelValue"]),Pn,q(le,{size:"sm",name:"volume_up",class:"col-1"})]),de("div",An,[q(le,{size:"sm",name:"zoom_out",class:"col-1"}),En,q(Mt,{disable:!t.audioLoaded,class:"col-8",color:"white",min:20,max:500,modelValue:t.zoomFactor,"onUpdate:modelValue":t.setZoom},null,8,["disable","modelValue","onUpdate:modelValue"]),Sn,q(le,{size:"sm",name:"zoom_in",class:"col-1"})])]),_:1}),q(lt),q(Fe,null,{default:$(()=>[q(fe,{flat:"",dense:"",round:"",onClick:t.generateScript,icon:"refresh"},{default:$(()=>[q(ft,null,{default:$(()=>[ne("Regenerate Script")]),_:1})]),_:1},8,["onClick"]),q(fe,{icon:"content_copy",flat:"",dense:"",onClick:t.copyToClipboard},{default:$(()=>[q(ft,null,{default:$(()=>[ne(" Copy script to clipboard ")]),_:1})]),_:1},8,["onClick"]),q(fe,{flat:"",dense:"",round:"",icon:"download",onClick:t.downloadScript},{default:$(()=>[q(ft,null,{default:$(()=>[ne(" Download script ")]),_:1})]),_:1},8,["onClick"]),q(dt),q(fe,{flat:"",dense:"",icon:"download",label:"Download Player",download:"player.py",href:"/player.py"})]),_:1}),de("textarea",{readonly:"",value:t.bashscript,style:{"font-family":"Courier","flex-grow":"1",width:"100%",resize:"none"}},`
    `,8,_n)]),_:1})}var Tn=Bi(gn,[["render",Rn]]);export{Tn as default};
