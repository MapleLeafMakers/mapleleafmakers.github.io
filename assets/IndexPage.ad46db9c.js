import{c as he,a as N,h as J,b as ve,H as Oe,I as li,J as xe,K as ui,r as ne,g as me,L as ct,M as We,d as ci,P as di,N as $e,G as Mt,O as be,w as fe,j as fi,o as Re,Q as _e,m as lt,R as vt,S as Ee,u as hi,T as Lt,U as Dt,V as Bt,W as Wt,X as Vt,Y as jt,Z as It,$ as qt,a0 as vi,a1 as Be,a2 as mi,a3 as mt,k as zt,a4 as pi,a5 as Nt,a6 as gi,a7 as yi,a8 as bi,a9 as Ft,n as wi,aa as ki,ab as et,ac as tt,ad as $t,y as Ci,ae as Pi,af as it,ag as Ai,ah as Ei,ai as Si,i as pt,e as Ce,l as _i,f as Ri,aj as Oi,ak as xi,_ as Ti,z as Mi,al as nt,B as Pe,C as qe,D as U,E as z,am as de,F as le,an as ue,ao as rt,ap as ce,aq as gt,ar as yt,as as bt,at as ze,au as wt,av as Li,aw as Di,ax as Bi}from"./index.4aa9e440.js";import{Q as Wi,a as Vi}from"./QResizeObserver.fdb586aa.js";var re=he({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const o=N(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>J("div",{class:o.value},ve(t.default))}}),Ae=he({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const o=N(()=>parseInt(e.lines,10)),c=N(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),n=N(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>J("div",{style:n.value,class:c.value},ve(t.default))}}),ge=he({name:"QItem",props:{...Oe,...li,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:o}){const{proxy:{$q:c}}=me(),n=xe(e,c),{hasLink:p,linkAttrs:f,linkClass:u,linkTag:b,navigateOnClick:h}=ui(),S=ne(null),O=ne(null),j=N(()=>e.clickable===!0||p.value===!0||e.tag==="label"),P=N(()=>e.disable!==!0&&j.value===!0),q=N(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(n.value===!0?" q-item--dark":"")+(p.value===!0&&e.active===null?u.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(P.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),R=N(()=>{if(e.insetLevel===void 0)return null;const w=c.lang.rtl===!0?"Right":"Left";return{["padding"+w]:16+e.insetLevel*56+"px"}});function B(w){P.value===!0&&(O.value!==null&&(w.qKeyEvent!==!0&&document.activeElement===S.value?O.value.focus():document.activeElement===O.value&&S.value.focus()),h(w))}function _(w){if(P.value===!0&&ct(w,13)===!0){We(w),w.qKeyEvent=!0;const m=new MouseEvent("click",w);m.qKeyEvent=!0,S.value.dispatchEvent(m)}o("keyup",w)}function V(){const w=ci(t.default,[]);return P.value===!0&&w.unshift(J("div",{class:"q-focus-helper",tabindex:-1,ref:O})),w}return()=>{const w={ref:S,class:q.value,style:R.value,role:"listitem",onClick:B,onKeyup:_};return P.value===!0?(w.tabindex=e.tabindex||"0",Object.assign(w,f.value)):j.value===!0&&(w["aria-disabled"]="true"),J(b.value,w,V())}}}),Ne=he({name:"QList",props:{...Oe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const o=me(),c=xe(e,o.proxy.$q),n=N(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(c.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>J(e.tag,{class:n.value},ve(t.default))}});function He(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),di.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Ht={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Ut({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:c,proxy:n,emit:p}=me(),f=ne(null);let u=null;function b(P){return f.value===null?!1:P===void 0||P.touches===void 0||P.touches.length<=1}const h={};o===void 0&&(Object.assign(h,{hide(P){n.hide(P)},toggle(P){n.toggle(P),P.qAnchorHandled=!0},toggleKey(P){ct(P,13)===!0&&h.toggle(P)},contextClick(P){n.hide(P),$e(P),Mt(()=>{n.show(P),P.qAnchorHandled=!0})},prevent:$e,mobileTouch(P){if(h.mobileCleanup(P),b(P)!==!0)return;n.hide(P),f.value.classList.add("non-selectable");const q=P.target;be(h,"anchor",[[q,"touchmove","mobileCleanup","passive"],[q,"touchend","mobileCleanup","passive"],[q,"touchcancel","mobileCleanup","passive"],[f.value,"contextmenu","prevent","notPassive"]]),u=setTimeout(()=>{u=null,n.show(P),P.qAnchorHandled=!0},300)},mobileCleanup(P){f.value.classList.remove("non-selectable"),u!==null&&(clearTimeout(u),u=null),e.value===!0&&P!==void 0&&He()}}),o=function(P=c.contextMenu){if(c.noParentEvent===!0||f.value===null)return;let q;P===!0?n.$q.platform.is.mobile===!0?q=[[f.value,"touchstart","mobileTouch","passive"]]:q=[[f.value,"mousedown","hide","passive"],[f.value,"contextmenu","contextClick","notPassive"]]:q=[[f.value,"click","toggle","passive"],[f.value,"keyup","toggleKey","passive"]],be(h,"anchor",q)});function S(){_e(h,"anchor")}function O(P){for(f.value=P;f.value.classList.contains("q-anchor--skip");)f.value=f.value.parentNode;o()}function j(){if(c.target===!1||c.target===""||n.$el.parentNode===null)f.value=null;else if(c.target===!0)O(n.$el.parentNode);else{let P=c.target;if(typeof c.target=="string")try{P=document.querySelector(c.target)}catch{P=void 0}P!=null?(f.value=P.$el||P,o()):(f.value=null,console.error(`Anchor: target "${c.target}" not found`))}}return fe(()=>c.contextMenu,P=>{f.value!==null&&(S(),o(P))}),fe(()=>c.target,()=>{f.value!==null&&S(),j()}),fe(()=>c.noParentEvent,P=>{f.value!==null&&(P===!0?S():o())}),fi(()=>{j(),t!==!0&&c.modelValue===!0&&f.value===null&&p("update:modelValue",!1)}),Re(()=>{u!==null&&clearTimeout(u),S()}),{anchorEl:f,canShow:b,anchorEvents:h}}function Qt(e,t){const o=ne(null);let c;function n(u,b){const h=`${b!==void 0?"add":"remove"}EventListener`,S=b!==void 0?b:c;u!==window&&u[h]("scroll",S,lt.passive),window[h]("scroll",S,lt.passive),c=b}function p(){o.value!==null&&(n(o.value),o.value=null)}const f=fe(()=>e.noParentEvent,()=>{o.value!==null&&(p(),t())});return Re(f),{localScrollTarget:o,unconfigureScrollTarget:p,changeScrollEvent:n}}const{notPassiveCapture:Ue}=lt,we=[];function Qe(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=vt.length-1;for(;o>=0;){const c=vt[o].$;if(c.type.name!=="QDialog")break;if(c.props.seamless!==!0)return;o--}for(let c=we.length-1;c>=0;c--){const n=we[c];if((n.anchorEl.value===null||n.anchorEl.value.contains(t)===!1)&&(t===document.body||n.innerRef.value!==null&&n.innerRef.value.contains(t)===!1))e.qClickOutside=!0,n.onClickOutside(e);else return}}function Kt(e){we.push(e),we.length===1&&(document.addEventListener("mousedown",Qe,Ue),document.addEventListener("touchstart",Qe,Ue))}function Ke(e){const t=we.findIndex(o=>o===e);t>-1&&(we.splice(t,1),we.length===0&&(document.removeEventListener("mousedown",Qe,Ue),document.removeEventListener("touchstart",Qe,Ue)))}let kt,Ct;function Ge(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Gt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const ut={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{ut[`${e}#ltr`]=e,ut[`${e}#rtl`]=e});function Xe(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:ut[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function ji(e,t){let{top:o,left:c,right:n,bottom:p,width:f,height:u}=e.getBoundingClientRect();return t!==void 0&&(o-=t[1],c-=t[0],p+=t[1],n+=t[0],f+=t[0],u+=t[1]),{top:o,bottom:p,height:u,left:c,right:n,width:f,middle:c+(n-c)/2,center:o+(p-o)/2}}function Ii(e,t,o){let{top:c,left:n}=e.getBoundingClientRect();return c+=t.top,n+=t.left,o!==void 0&&(c+=o[1],n+=o[0]),{top:c,bottom:c+1,height:1,left:n,right:n+1,width:1,middle:n,center:c}}function qi(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function Pt(e,t,o){return{top:e[o.anchorOrigin.vertical]-t[o.selfOrigin.vertical],left:e[o.anchorOrigin.horizontal]-t[o.selfOrigin.horizontal]}}function Xt(e){if(Ee.is.ios===!0&&window.visualViewport!==void 0){const u=document.body.style,{offsetLeft:b,offsetTop:h}=window.visualViewport;b!==kt&&(u.setProperty("--q-pe-left",b+"px"),kt=b),h!==Ct&&(u.setProperty("--q-pe-top",h+"px"),Ct=h)}const{scrollLeft:t,scrollTop:o}=e.el,c=e.absoluteOffset===void 0?ji(e.anchorEl,e.cover===!0?[0,0]:e.offset):Ii(e.anchorEl,e.absoluteOffset,e.offset);let n={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(n.minWidth=c.width+"px",e.cover===!0&&(n.minHeight=c.height+"px")),Object.assign(e.el.style,n);const p=qi(e.el);let f=Pt(c,p,e);if(e.absoluteOffset===void 0||e.offset===void 0)at(f,c,p,e.anchorOrigin,e.selfOrigin);else{const{top:u,left:b}=f;at(f,c,p,e.anchorOrigin,e.selfOrigin);let h=!1;if(f.top!==u){h=!0;const S=2*e.offset[1];c.center=c.top-=S,c.bottom-=S+2}if(f.left!==b){h=!0;const S=2*e.offset[0];c.middle=c.left-=S,c.right-=S+2}h===!0&&(f=Pt(c,p,e),at(f,c,p,e.anchorOrigin,e.selfOrigin))}n={top:f.top+"px",left:f.left+"px"},f.maxHeight!==void 0&&(n.maxHeight=f.maxHeight+"px",c.height>f.maxHeight&&(n.minHeight=n.maxHeight)),f.maxWidth!==void 0&&(n.maxWidth=f.maxWidth+"px",c.width>f.maxWidth&&(n.minWidth=n.maxWidth)),Object.assign(e.el.style,n),e.el.scrollTop!==o&&(e.el.scrollTop=o),e.el.scrollLeft!==t&&(e.el.scrollLeft=t)}function at(e,t,o,c,n){const p=o.bottom,f=o.right,u=hi(),b=window.innerHeight-u,h=document.body.clientWidth;if(e.top<0||e.top+p>b)if(n.vertical==="center")e.top=t[c.vertical]>b/2?Math.max(0,b-p):0,e.maxHeight=Math.min(p,b);else if(t[c.vertical]>b/2){const S=Math.min(b,c.vertical==="center"?t.center:c.vertical===n.vertical?t.bottom:t.top);e.maxHeight=Math.min(p,S),e.top=Math.max(0,S-p)}else e.top=Math.max(0,c.vertical==="center"?t.center:c.vertical===n.vertical?t.top:t.bottom),e.maxHeight=Math.min(p,b-e.top);if(e.left<0||e.left+f>h)if(e.maxWidth=Math.min(f,h),n.horizontal==="middle")e.left=t[c.horizontal]>h/2?Math.max(0,h-f):0;else if(t[c.horizontal]>h/2){const S=Math.min(h,c.horizontal==="middle"?t.middle:c.horizontal===n.horizontal?t.right:t.left);e.maxWidth=Math.min(f,S),e.left=Math.max(0,S-e.maxWidth)}else e.left=Math.max(0,c.horizontal==="middle"?t.middle:c.horizontal===n.horizontal?t.left:t.right),e.maxWidth=Math.min(f,h-e.left)}var De=he({name:"QMenu",inheritAttrs:!1,props:{...Ht,...Lt,...Oe,...Dt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ge},self:{type:String,validator:Ge},offset:{type:Array,validator:Gt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Bt,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:c}){let n=null,p,f,u;const b=me(),{proxy:h}=b,{$q:S}=h,O=ne(null),j=ne(!1),P=N(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),q=xe(e,S),{registerTick:R,removeTick:B}=Wt(),{registerTimeout:_}=Vt(),{transitionProps:V,transitionStyle:w}=jt(e),{localScrollTarget:m,changeScrollEvent:v,unconfigureScrollTarget:C}=Qt(e,L),{anchorEl:x,canShow:W}=Ut({showing:j}),{hide:D}=It({showing:j,canShow:W,handleShow:d,handleHide:i,hideOnRouteChange:P,processOnMount:!0}),{showPortal:T,hidePortal:E,renderPortal:M}=qt(b,O,Q,"menu"),k={anchorEl:x,innerRef:O,onClickOutside(H){if(e.persistent!==!0&&j.value===!0)return D(H),(H.type==="touchstart"||H.target.classList.contains("q-dialog__backdrop"))&&We(H),!0}},s=N(()=>Xe(e.anchor||(e.cover===!0?"center middle":"bottom start"),S.lang.rtl)),l=N(()=>e.cover===!0?s.value:Xe(e.self||"top start",S.lang.rtl)),y=N(()=>(e.square===!0?" q-menu--square":"")+(q.value===!0?" q-menu--dark q-dark":"")),a=N(()=>e.autoClose===!0?{onClick:$}:{}),r=N(()=>j.value===!0&&e.persistent!==!0);fe(r,H=>{H===!0?(gi(K),Kt(k)):(mt(K),Ke(k))});function g(){yi(()=>{let H=O.value;H&&H.contains(document.activeElement)!==!0&&(H=H.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||H.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||H.querySelector("[autofocus], [data-autofocus]")||H,H.focus({preventScroll:!0}))})}function d(H){if(n=e.noRefocus===!1?document.activeElement:null,vi(F),T(),L(),p=void 0,H!==void 0&&(e.touchPosition||e.contextMenu)){const te=Be(H);if(te.left!==void 0){const{top:Y,left:se}=x.value.getBoundingClientRect();p={left:te.left-se,top:te.top-Y}}}f===void 0&&(f=fe(()=>S.screen.width+"|"+S.screen.height+"|"+e.self+"|"+e.anchor+"|"+S.lang.rtl,G)),e.noFocus!==!0&&document.activeElement.blur(),R(()=>{G(),e.noFocus!==!0&&g()}),_(()=>{S.platform.is.ios===!0&&(u=e.autoClose,O.value.click()),G(),T(!0),o("show",H)},e.transitionDuration)}function i(H){B(),E(),A(!0),n!==null&&(H===void 0||H.qClickOutside!==!0)&&(((H&&H.type.indexOf("key")===0?n.closest('[tabindex]:not([tabindex^="-"])'):void 0)||n).focus(),n=null),_(()=>{E(!0),o("hide",H)},e.transitionDuration)}function A(H){p=void 0,f!==void 0&&(f(),f=void 0),(H===!0||j.value===!0)&&(mi(F),C(),Ke(k),mt(K)),H!==!0&&(n=null)}function L(){(x.value!==null||e.scrollTarget!==void 0)&&(m.value=zt(x.value,e.scrollTarget),v(m.value,G))}function $(H){u!==!0?(pi(h,H),o("click",H)):u=!1}function F(H){r.value===!0&&e.noFocus!==!0&&bi(O.value,H.target)!==!0&&g()}function K(H){o("escapeKey"),D(H)}function G(){const H=O.value;H===null||x.value===null||Xt({el:H,offset:e.offset,anchorEl:x.value,anchorOrigin:s.value,selfOrigin:l.value,absoluteOffset:p,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Q(){return J(Nt,V.value,()=>j.value===!0?J("div",{role:"menu",...c,ref:O,tabindex:-1,class:["q-menu q-position-engine scroll"+y.value,c.class],style:[c.style,w.value],...a.value},ve(t.default)):null)}return Re(A),Object.assign(h,{focus:g,updatePosition:G}),M}}),Fe=he({name:"QBar",props:{...Oe,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=me(),c=xe(e,o),n=N(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${c.value===!0?"dark":"light"}`);return()=>J("div",{class:n.value,role:"toolbar"},ve(t.default))}});const dt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},zi=Object.keys(dt);dt.all=!0;function At(e){const t={};for(const o of zi)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?dt:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function Et(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function st(e,t,o){const c=Be(e);let n,p=c.left-t.event.x,f=c.top-t.event.y,u=Math.abs(p),b=Math.abs(f);const h=t.direction;h.horizontal===!0&&h.vertical!==!0?n=p<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?n=f<0?"up":"down":h.up===!0&&f<0?(n="up",u>b&&(h.left===!0&&p<0?n="left":h.right===!0&&p>0&&(n="right"))):h.down===!0&&f>0?(n="down",u>b&&(h.left===!0&&p<0?n="left":h.right===!0&&p>0&&(n="right"))):h.left===!0&&p<0?(n="left",u<b&&(h.up===!0&&f<0?n="up":h.down===!0&&f>0&&(n="down"))):h.right===!0&&p>0&&(n="right",u<b&&(h.up===!0&&f<0?n="up":h.down===!0&&f>0&&(n="down")));let S=!1;if(n===void 0&&o===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};n=t.event.lastDir,S=!0,n==="left"||n==="right"?(c.left-=p,u=0,p=0):(c.top-=f,b=0,f=0)}return{synthetic:S,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:c,direction:n,isFirst:t.event.isFirst,isFinal:o===!0,duration:Date.now()-t.event.time,distance:{x:u,y:b},offset:{x:p,y:f},delta:{x:c.left-t.event.lastX,y:c.top-t.event.lastY}}}}let Ni=0;var Yt=Ft({name:"touch-pan",beforeMount(e,{value:t,modifiers:o}){if(o.mouse!==!0&&Ee.has.touch!==!0)return;function c(p,f){o.mouse===!0&&f===!0?We(p):(o.stop===!0&&tt(p),o.prevent===!0&&$e(p))}const n={uid:"qvtp_"+Ni++,handler:t,modifiers:o,direction:At(o),noop:wi,mouseStart(p){Et(p,n)&&ki(p)&&(be(n,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),n.start(p,!0))},touchStart(p){if(Et(p,n)){const f=p.target;be(n,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","passiveCapture"],[f,"touchend","end","passiveCapture"]]),n.start(p)}},start(p,f){if(Ee.is.firefox===!0&&et(e,!0),n.lastEvt=p,f===!0||o.stop===!0){if(n.direction.all!==!0&&(f!==!0||n.modifiers.mouseAllDir!==!0&&n.modifiers.mousealldir!==!0)){const h=p.type.indexOf("mouse")>-1?new MouseEvent(p.type,p):new TouchEvent(p.type,p);p.defaultPrevented===!0&&$e(h),p.cancelBubble===!0&&tt(h),Object.assign(h,{qKeyEvent:p.qKeyEvent,qClickOutside:p.qClickOutside,qAnchorHandled:p.qAnchorHandled,qClonedBy:p.qClonedBy===void 0?[n.uid]:p.qClonedBy.concat(n.uid)}),n.initialEvent={target:p.target,event:h}}tt(p)}const{left:u,top:b}=Be(p);n.event={x:u,y:b,time:Date.now(),mouse:f===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:u,lastY:b}},move(p){if(n.event===void 0)return;const f=Be(p),u=f.left-n.event.x,b=f.top-n.event.y;if(u===0&&b===0)return;n.lastEvt=p;const h=n.event.mouse===!0,S=()=>{c(p,h);let P;o.preserveCursor!==!0&&o.preservecursor!==!0&&(P=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),He(),n.styleCleanup=q=>{if(n.styleCleanup=void 0,P!==void 0&&(document.documentElement.style.cursor=P),document.body.classList.remove("non-selectable"),h===!0){const R=()=>{document.body.classList.remove("no-pointer-events--children")};q!==void 0?setTimeout(()=>{R(),q()},50):R()}else q!==void 0&&q()}};if(n.event.detected===!0){n.event.isFirst!==!0&&c(p,n.event.mouse);const{payload:P,synthetic:q}=st(p,n,!1);P!==void 0&&(n.handler(P)===!1?n.end(p):(n.styleCleanup===void 0&&n.event.isFirst===!0&&S(),n.event.lastX=P.position.left,n.event.lastY=P.position.top,n.event.lastDir=q===!0?void 0:P.direction,n.event.isFirst=!1));return}if(n.direction.all===!0||h===!0&&(n.modifiers.mouseAllDir===!0||n.modifiers.mousealldir===!0)){S(),n.event.detected=!0,n.move(p);return}const O=Math.abs(u),j=Math.abs(b);O!==j&&(n.direction.horizontal===!0&&O>j||n.direction.vertical===!0&&O<j||n.direction.up===!0&&O<j&&b<0||n.direction.down===!0&&O<j&&b>0||n.direction.left===!0&&O>j&&u<0||n.direction.right===!0&&O>j&&u>0?(n.event.detected=!0,n.move(p)):n.end(p,!0))},end(p,f){if(n.event!==void 0){if(_e(n,"temp"),Ee.is.firefox===!0&&et(e,!1),f===!0)n.styleCleanup!==void 0&&n.styleCleanup(),n.event.detected!==!0&&n.initialEvent!==void 0&&n.initialEvent.target.dispatchEvent(n.initialEvent.event);else if(n.event.detected===!0){n.event.isFirst===!0&&n.handler(st(p===void 0?n.lastEvt:p,n).payload);const{payload:u}=st(p===void 0?n.lastEvt:p,n,!0),b=()=>{n.handler(u)};n.styleCleanup!==void 0?n.styleCleanup(b):b()}n.event=void 0,n.initialEvent=void 0,n.lastEvt=void 0}}};if(e.__qtouchpan=n,o.mouse===!0){const p=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";be(n,"main",[[e,"mousedown","mouseStart",`passive${p}`]])}Ee.has.touch===!0&&be(n,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchpan;o!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&o.end(),o.handler=t.value),o.direction=At(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),_e(t,"main"),_e(t,"temp"),Ee.is.firefox===!0&&et(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}}),Fi=he({name:"QSplitter",props:{...Oe,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:o}){const{proxy:{$q:c}}=me(),n=xe(e,c),p=ne(null),f={before:ne(null),after:ne(null)},u=N(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(n.value===!0?" q-splitter--dark":"")),b=N(()=>e.horizontal===!0?"height":"width"),h=N(()=>e.reverse!==!0?"before":"after"),S=N(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function O(v){return(e.unit==="%"?v:Math.round(v))+e.unit}const j=N(()=>({[h.value]:{[b.value]:O(e.modelValue)}}));let P,q,R,B,_;function V(v){if(v.isFirst===!0){const x=p.value.getBoundingClientRect()[b.value];P=e.horizontal===!0?"up":"left",q=e.unit==="%"?100:x,R=Math.min(q,S.value[1],Math.max(S.value[0],e.modelValue)),B=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:c.lang.rtl===!0?-1:1)*(e.unit==="%"?x===0?0:100/x:1),p.value.classList.add("q-splitter--active");return}if(v.isFinal===!0){_!==e.modelValue&&o("update:modelValue",_),p.value.classList.remove("q-splitter--active");return}const C=R+B*(v.direction===P?-1:1)*v.distance[e.horizontal===!0?"y":"x"];_=Math.min(q,S.value[1],Math.max(S.value[0],C)),f[h.value].value.style[b.value]=O(_),e.emitImmediately===!0&&e.modelValue!==_&&o("update:modelValue",_)}const w=N(()=>[[Yt,V,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function m(v,C){v<C[0]?o("update:modelValue",C[0]):v>C[1]&&o("update:modelValue",C[1])}return fe(()=>e.modelValue,v=>{m(v,S.value)}),fe(()=>e.limits,()=>{Mt(()=>{m(e.modelValue,S.value)})}),()=>{const v=[J("div",{ref:f.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:j.value.before},ve(t.before)),J("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[$t("div",{class:"q-splitter__separator-area absolute-full"},ve(t.separator),"sep",e.disable!==!0,()=>w.value)]),J("div",{ref:f.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:j.value.after},ve(t.after))];return J("div",{class:u.value,ref:p},Ci(t.default,v))}}});const $i=J("div",{class:"q-space"});var St=he({name:"QSpace",setup(){return()=>$i}});function Se(e,t,o){return o<=t?t:Math.min(o,Math.max(t,e))}const _t="q-slider__marker-labels",Hi=e=>({value:e}),Ui=({marker:e})=>J("div",{key:e.value,style:e.style,class:e.classes},e.label),Jt=[34,37,40,33,39,38],Qi={...Oe,...Ai,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ki=["pan","update:modelValue","change"];function Gi({updateValue:e,updatePosition:t,getDragging:o,formAttrs:c}){const{props:n,emit:p,slots:f,proxy:{$q:u}}=me(),b=xe(n,u),h=Ei(c),S=ne(!1),O=ne(!1),j=ne(!1),P=ne(!1),q=N(()=>n.vertical===!0?"--v":"--h"),R=N(()=>"-"+(n.switchLabelSide===!0?"switched":"standard")),B=N(()=>n.vertical===!0?n.reverse===!0:n.reverse!==(u.lang.rtl===!0)),_=N(()=>isNaN(n.innerMin)===!0||n.innerMin<n.min?n.min:n.innerMin),V=N(()=>isNaN(n.innerMax)===!0||n.innerMax>n.max?n.max:n.innerMax),w=N(()=>n.disable!==!0&&n.readonly!==!0&&_.value<V.value),m=N(()=>(String(n.step).trim().split(".")[1]||"").length),v=N(()=>n.step===0?1:n.step),C=N(()=>w.value===!0?n.tabindex||0:-1),x=N(()=>n.max-n.min),W=N(()=>V.value-_.value),D=N(()=>Y(_.value)),T=N(()=>Y(V.value)),E=N(()=>n.vertical===!0?B.value===!0?"bottom":"top":B.value===!0?"right":"left"),M=N(()=>n.vertical===!0?"height":"width"),k=N(()=>n.vertical===!0?"width":"height"),s=N(()=>n.vertical===!0?"vertical":"horizontal"),l=N(()=>{const I={role:"slider","aria-valuemin":_.value,"aria-valuemax":V.value,"aria-orientation":s.value,"data-step":n.step};return n.disable===!0?I["aria-disabled"]="true":n.readonly===!0&&(I["aria-readonly"]="true"),I}),y=N(()=>`q-slider q-slider${q.value} q-slider--${S.value===!0?"":"in"}active inline no-wrap `+(n.vertical===!0?"row":"column")+(n.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(j.value==="both"?" q-slider--focus":"")+(n.label||n.labelAlways===!0?" q-slider--label":"")+(n.labelAlways===!0?" q-slider--label-always":"")+(b.value===!0?" q-slider--dark":"")+(n.dense===!0?" q-slider--dense q-slider--dense"+q.value:""));function a(I){const X="q-slider__"+I;return`${X} ${X}${q.value} ${X}${q.value}${R.value}`}function r(I){const X="q-slider__"+I;return`${X} ${X}${q.value}`}const g=N(()=>{const I=n.selectionColor||n.color;return"q-slider__selection absolute"+(I!==void 0?` text-${I}`:"")}),d=N(()=>r("markers")+" absolute overflow-hidden"),i=N(()=>r("track-container")),A=N(()=>a("pin")),L=N(()=>a("label")),$=N(()=>a("text-container")),F=N(()=>a("marker-labels-container")+(n.markerLabelsClass!==void 0?` ${n.markerLabelsClass}`:"")),K=N(()=>"q-slider__track relative-position no-outline"+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),G=N(()=>{const I={[k.value]:n.trackSize};return n.trackImg!==void 0&&(I.backgroundImage=`url(${n.trackImg}) !important`),I}),Q=N(()=>"q-slider__inner absolute"+(n.innerTrackColor!==void 0?` bg-${n.innerTrackColor}`:"")),H=N(()=>{const I={[E.value]:`${100*D.value}%`,[M.value]:`${100*(T.value-D.value)}%`};return n.innerTrackImg!==void 0&&(I.backgroundImage=`url(${n.innerTrackImg}) !important`),I});function te(I){const{min:X,max:Z,step:ee}=n;let ae=X+I*(Z-X);if(ee>0){const ye=(ae-X)%ee;ae+=(Math.abs(ye)>=ee/2?(ye<0?-1:1)*ee:0)-ye}return m.value>0&&(ae=parseFloat(ae.toFixed(m.value))),Se(ae,_.value,V.value)}function Y(I){return x.value===0?0:(I-n.min)/x.value}function se(I,X){const Z=Be(I),ee=n.vertical===!0?Se((Z.top-X.top)/X.height,0,1):Se((Z.left-X.left)/X.width,0,1);return Se(B.value===!0?1-ee:ee,D.value,T.value)}const ie=N(()=>Pi(n.markers)===!0?n.markers:v.value),oe=N(()=>{const I=[],X=ie.value,Z=n.max;let ee=n.min;do I.push(ee),ee+=X;while(ee<Z);return I.push(Z),I}),Ve=N(()=>{const I=` ${_t}${q.value}-`;return _t+`${I}${n.switchMarkerLabelsSide===!0?"switched":"standard"}${I}${B.value===!0?"rtl":"ltr"}`}),Te=N(()=>n.markerLabels===!1?null:Le(n.markerLabels).map((I,X)=>({index:X,value:I.value,label:I.label||I.value,classes:Ve.value+(I.classes!==void 0?" "+I.classes:""),style:{...je(I.value),...I.style||{}}}))),pe=N(()=>({markerList:Te.value,markerMap:Ie.value,classes:Ve.value,getStyle:je})),Me=N(()=>{if(W.value!==0){const I=100*ie.value/W.value;return{...H.value,backgroundSize:n.vertical===!0?`2px ${I}%`:`${I}% 2px`}}return null});function Le(I){if(I===!1)return null;if(I===!0)return oe.value.map(Hi);if(typeof I=="function")return oe.value.map(Z=>{const ee=I(Z);return it(ee)===!0?{...ee,value:Z}:{value:Z,label:ee}});const X=({value:Z})=>Z>=n.min&&Z<=n.max;return Array.isArray(I)===!0?I.map(Z=>it(Z)===!0?Z:{value:Z}).filter(X):Object.keys(I).map(Z=>{const ee=I[Z],ae=Number(Z);return it(ee)===!0?{...ee,value:ae}:{value:ae,label:ee}}).filter(X)}function je(I){return{[E.value]:`${100*(I-n.min)/x.value}%`}}const Ie=N(()=>{if(n.markerLabels===!1)return null;const I={};return Te.value.forEach(X=>{I[X.value]=X}),I});function ke(){if(f["marker-label-group"]!==void 0)return f["marker-label-group"](pe.value);const I=f["marker-label"]||Ui;return Te.value.map(X=>I({marker:X,...pe.value}))}const ei=N(()=>[[Yt,ti,void 0,{[s.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ti(I){I.isFinal===!0?(P.value!==void 0&&(t(I.evt),I.touch===!0&&e(!0),P.value=void 0,p("pan","end")),S.value=!1,j.value=!1):I.isFirst===!0?(P.value=o(I.evt),t(I.evt),e(),S.value=!0,p("pan","start")):(t(I.evt),e())}function ht(){j.value=!1}function ii(I){t(I,o(I)),e(),O.value=!0,S.value=!0,document.addEventListener("mouseup",Ye,!0)}function Ye(){O.value=!1,S.value=!1,e(!0),ht(),document.removeEventListener("mouseup",Ye,!0)}function ni(I){t(I,o(I)),e(!0)}function ri(I){Jt.includes(I.keyCode)&&e(!0)}function ai(I){if(n.vertical===!0)return null;const X=u.lang.rtl!==n.reverse?1-I:I;return{transform:`translateX(calc(${2*X-1} * ${n.thumbSize} / 2 + ${50-100*X}%))`}}function si(I){const X=N(()=>O.value===!1&&(j.value===I.focusValue||j.value==="both")?" q-slider--focus":""),Z=N(()=>`q-slider__thumb q-slider__thumb${q.value} q-slider__thumb${q.value}-${B.value===!0?"rtl":"ltr"} absolute non-selectable`+X.value+(I.thumbColor.value!==void 0?` text-${I.thumbColor.value}`:"")),ee=N(()=>({width:n.thumbSize,height:n.thumbSize,[E.value]:`${100*I.ratio.value}%`,zIndex:j.value===I.focusValue?2:void 0})),ae=N(()=>I.labelColor.value!==void 0?` text-${I.labelColor.value}`:""),ye=N(()=>ai(I.ratio.value)),Je=N(()=>"q-slider__text"+(I.labelTextColor.value!==void 0?` text-${I.labelTextColor.value}`:""));return()=>{const Ze=[J("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[J("path",{d:n.thumbPath})]),J("div",{class:"q-slider__focus-ring fit"})];return(n.label===!0||n.labelAlways===!0)&&(Ze.push(J("div",{class:A.value+" absolute fit no-pointer-events"+ae.value},[J("div",{class:L.value,style:{minWidth:n.thumbSize}},[J("div",{class:$.value,style:ye.value},[J("span",{class:Je.value},I.label.value)])])])),n.name!==void 0&&n.disable!==!0&&h(Ze,"push")),J("div",{class:Z.value,style:ee.value,...I.getNodeData()},Ze)}}function oi(I,X,Z,ee){const ae=[];n.innerTrackColor!=="transparent"&&ae.push(J("div",{key:"inner",class:Q.value,style:H.value})),n.selectionColor!=="transparent"&&ae.push(J("div",{key:"selection",class:g.value,style:I.value})),n.markers!==!1&&ae.push(J("div",{key:"marker",class:d.value,style:Me.value})),ee(ae);const ye=[$t("div",{key:"trackC",class:i.value,tabindex:X.value,...Z.value},[J("div",{class:K.value,style:G.value},ae)],"slide",w.value,()=>ei.value)];if(n.markerLabels!==!1){const Je=n.switchMarkerLabelsSide===!0?"unshift":"push";ye[Je](J("div",{key:"markerL",class:F.value},ke()))}return ye}return Re(()=>{document.removeEventListener("mouseup",Ye,!0)}),{state:{active:S,focus:j,preventFocus:O,dragging:P,editable:w,classes:y,tabindex:C,attributes:l,step:v,decimals:m,trackLen:x,innerMin:_,innerMinRatio:D,innerMax:V,innerMaxRatio:T,positionProp:E,sizeProp:M,isReversed:B},methods:{onActivate:ii,onMobileClick:ni,onBlur:ht,onKeyup:ri,getContent:oi,getThumbRenderFn:si,convertRatioToModel:te,convertModelToRatio:Y,getDraggingRatio:se}}}const Xi=()=>({});var Rt=he({name:"QSlider",props:{...Qi,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Ki,setup(e,{emit:t}){const{proxy:{$q:o}}=me(),{state:c,methods:n}=Gi({updateValue:q,updatePosition:B,getDragging:R,formAttrs:Si(e)}),p=ne(null),f=ne(0),u=ne(0);function b(){u.value=e.modelValue===null?c.innerMin.value:Se(e.modelValue,c.innerMin.value,c.innerMax.value)}fe(()=>`${e.modelValue}|${c.innerMin.value}|${c.innerMax.value}`,b),b();const h=N(()=>n.convertModelToRatio(u.value)),S=N(()=>c.active.value===!0?f.value:h.value),O=N(()=>{const w={[c.positionProp.value]:`${100*c.innerMinRatio.value}%`,[c.sizeProp.value]:`${100*(S.value-c.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(w.backgroundImage=`url(${e.selectionImg}) !important`),w}),j=n.getThumbRenderFn({focusValue:!0,getNodeData:Xi,ratio:S,label:N(()=>e.labelValue!==void 0?e.labelValue:u.value),thumbColor:N(()=>e.thumbColor||e.color),labelColor:N(()=>e.labelColor),labelTextColor:N(()=>e.labelTextColor)}),P=N(()=>c.editable.value!==!0?{}:o.platform.is.mobile===!0?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:_,onBlur:n.onBlur,onKeydown:V,onKeyup:n.onKeyup});function q(w){u.value!==e.modelValue&&t("update:modelValue",u.value),w===!0&&t("change",u.value)}function R(){return p.value.getBoundingClientRect()}function B(w,m=c.dragging.value){const v=n.getDraggingRatio(w,m);u.value=n.convertRatioToModel(v),f.value=e.snap!==!0||e.step===0?v:n.convertModelToRatio(u.value)}function _(){c.focus.value=!0}function V(w){if(!Jt.includes(w.keyCode))return;We(w);const m=([34,33].includes(w.keyCode)?10:1)*c.step.value,v=([34,37,40].includes(w.keyCode)?-1:1)*(c.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*m;u.value=Se(parseFloat((u.value+v).toFixed(c.decimals.value)),c.innerMin.value,c.innerMax.value),q()}return()=>{const w=n.getContent(O,c.tabindex,P,m=>{m.push(j())});return J("div",{ref:p,class:c.classes.value+(e.modelValue===null?" q-slider--no-value":""),...c.attributes.value,"aria-valuenow":e.modelValue},w)}}}),Ot=he({name:"QTooltip",inheritAttrs:!1,props:{...Ht,...Lt,...Dt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ge},self:{type:String,default:"top middle",validator:Ge},offset:{type:Array,default:()=>[14,14],validator:Gt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Bt],setup(e,{slots:t,emit:o,attrs:c}){let n,p;const f=me(),{proxy:{$q:u}}=f,b=ne(null),h=ne(!1),S=N(()=>Xe(e.anchor,u.lang.rtl)),O=N(()=>Xe(e.self,u.lang.rtl)),j=N(()=>e.persistent!==!0),{registerTick:P,removeTick:q}=Wt(),{registerTimeout:R}=Vt(),{transitionProps:B,transitionStyle:_}=jt(e),{localScrollTarget:V,changeScrollEvent:w,unconfigureScrollTarget:m}=Qt(e,d),{anchorEl:v,canShow:C,anchorEvents:x}=Ut({showing:h,configureAnchorEl:g}),{show:W,hide:D}=It({showing:h,canShow:C,handleShow:k,handleHide:s,hideOnRouteChange:j,processOnMount:!0});Object.assign(x,{delayShow:a,delayHide:r});const{showPortal:T,hidePortal:E,renderPortal:M}=qt(f,b,A,"tooltip");if(u.platform.is.mobile===!0){const L={anchorEl:v,innerRef:b,onClickOutside(F){return D(F),F.target.classList.contains("q-dialog__backdrop")&&We(F),!0}},$=N(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);fe($,F=>{(F===!0?Kt:Ke)(L)}),Re(()=>{Ke(L)})}function k(L){T(),P(()=>{p=new MutationObserver(()=>y()),p.observe(b.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),y(),d()}),n===void 0&&(n=fe(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,y)),R(()=>{T(!0),o("show",L)},e.transitionDuration)}function s(L){q(),E(),l(),R(()=>{E(!0),o("hide",L)},e.transitionDuration)}function l(){p!==void 0&&(p.disconnect(),p=void 0),n!==void 0&&(n(),n=void 0),m(),_e(x,"tooltipTemp")}function y(){const L=b.value;v.value===null||!L||Xt({el:L,offset:e.offset,anchorEl:v.value,anchorOrigin:S.value,selfOrigin:O.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function a(L){if(u.platform.is.mobile===!0){He(),document.body.classList.add("non-selectable");const $=v.value,F=["touchmove","touchcancel","touchend","click"].map(K=>[$,K,"delayHide","passiveCapture"]);be(x,"tooltipTemp",F)}R(()=>{W(L)},e.delay)}function r(L){u.platform.is.mobile===!0&&(_e(x,"tooltipTemp"),He(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),R(()=>{D(L)},e.hideDelay)}function g(){if(e.noParentEvent===!0||v.value===null)return;const L=u.platform.is.mobile===!0?[[v.value,"touchstart","delayShow","passive"]]:[[v.value,"mouseenter","delayShow","passive"],[v.value,"mouseleave","delayHide","passive"]];be(x,"anchor",L)}function d(){if(v.value!==null||e.scrollTarget!==void 0){V.value=zt(v.value,e.scrollTarget);const L=e.noParentEvent===!0?y:D;w(V.value,L)}}function i(){return h.value===!0?J("div",{...c,ref:b,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",c.class],style:[c.style,_.value],role:"tooltip"},ve(t.default)):null}function A(){return J(Nt,B.value,i)}return Re(l),Object.assign(f.proxy,{updatePosition:y}),M}}),Yi=he({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:o}}=me(),c=pt(_i,Ce);if(c===Ce)return console.error("QPage needs to be a deep child of QLayout"),Ce;if(pt(Ri,Ce)===Ce)return console.error("QPage needs to be child of QPageContainer"),Ce;const p=N(()=>{const u=(c.header.space===!0?c.header.size:0)+(c.footer.space===!0?c.footer.size:0);if(typeof e.styleFn=="function"){const b=c.isContainer.value===!0?c.containerHeight.value:o.screen.height;return e.styleFn(u,b)}return{minHeight:c.isContainer.value===!0?c.containerHeight.value-u+"px":o.screen.height===0?u!==0?`calc(100vh - ${u}px)`:"100vh":o.screen.height-u+"px"}}),f=N(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>J("main",{class:f.value,style:p.value},ve(t.default))}});function xt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Ji=Ft({name:"close-popup",beforeMount(e,{value:t}){const o={depth:xt(t),handler(c){o.depth!==0&&setTimeout(()=>{const n=Oi(e);n!==void 0&&xi(n,c,o.depth)})},handlerKey(c){ct(c,13)===!0&&o.handler(c)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=xt(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zt={exports:{}};/*!
 * wavesurfer.js 6.5.2 (2023-03-12)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(e,t){(function(c,n){e.exports=n()})(self,()=>(()=>{var o={"./src/drawer.canvasentry.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=O(b("./src/util/style.js")),S=O(b("./src/util/get-id.js"));function O(w){return w&&w.__esModule?w:{default:w}}function j(w){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},j(w)}function P(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function q(w,m){for(var v=0;v<m.length;v++){var C=m[v];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,B(C.key),C)}}function R(w,m,v){return m&&q(w.prototype,m),v&&q(w,v),Object.defineProperty(w,"prototype",{writable:!1}),w}function B(w){var m=_(w,"string");return j(m)==="symbol"?m:String(m)}function _(w,m){if(j(w)!=="object"||w===null)return w;var v=w[Symbol.toPrimitive];if(v!==void 0){var C=v.call(w,m||"default");if(j(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(w)}var V=function(){function w(){P(this,w),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,S.default)(typeof this.constructor.name!="undefined"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return R(w,[{key:"initWave",value:function(v){this.wave=v,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(v){this.progress=v,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(v,C,x,W){this.start=this.wave.offsetLeft/C||0,this.end=this.start+v/C,this.wave.width=x,this.wave.height=W;var D={width:v+"px"};(0,h.default)(this.wave,D),this.hasProgressCanvas&&(this.progress.width=x,this.progress.height=W,(0,h.default)(this.progress,D))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(v,C){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,v),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,C))}},{key:"getFillStyle",value:function(v,C){if(typeof C=="string"||C instanceof CanvasGradient)return C;var x=v.createLinearGradient(0,0,0,v.canvas.height);return C.forEach(function(W,D){return x.addColorStop(D/C.length,W)}),x}},{key:"applyCanvasTransforms",value:function(v){v&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(v,C,x,W,D){this.fillRectToContext(this.waveCtx,v,C,x,W,D),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,v,C,x,W,D)}},{key:"fillRectToContext",value:function(v,C,x,W,D,T){!v||(T?this.drawRoundedRect(v,C,x,W,D,T):v.fillRect(C,x,W,D))}},{key:"drawRoundedRect",value:function(v,C,x,W,D,T){D!==0&&(D<0&&(D*=-1,x-=D),v.beginPath(),v.moveTo(C+T,x),v.lineTo(C+W-T,x),v.quadraticCurveTo(C+W,x,C+W,x+T),v.lineTo(C+W,x+D-T),v.quadraticCurveTo(C+W,x+D,C+W-T,x+D),v.lineTo(C+T,x+D),v.quadraticCurveTo(C,x+D,C,x+D-T),v.lineTo(C,x+T),v.quadraticCurveTo(C,x,C+T,x),v.closePath(),v.fill())}},{key:"drawLines",value:function(v,C,x,W,D,T){this.drawLineToContext(this.waveCtx,v,C,x,W,D,T),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,v,C,x,W,D,T)}},{key:"drawLineToContext",value:function(v,C,x,W,D,T,E){if(!!v){var M=C.length/2,k=Math.round(M*this.start),s=Math.round(M*this.end)+1,l=k,y=s,a=this.wave.width/(y-l-1),r=W+D,g=x/W;v.beginPath(),v.moveTo((l-k)*a,r),v.lineTo((l-k)*a,r-Math.round((C[2*l]||0)/g));var d,i,A;for(d=l;d<y;d++)i=C[2*d]||0,A=Math.round(i/g),v.lineTo((d-k)*a+this.halfPixel,r-A);var L=y-1;for(L;L>=l;L--)i=C[2*L+1]||0,A=Math.round(i/g),v.lineTo((L-k)*a+this.halfPixel,r-A);v.lineTo((l-k)*a,r-Math.round((C[2*l+1]||0)/g)),v.closePath(),v.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(v,C,x){var W=this;if(x==="blob")return new Promise(function(D){W.wave.toBlob(D,v,C)});if(x==="dataURL")return this.wave.toDataURL(v,C)}}]),w}();u.default=V,f.exports=u.default},"./src/drawer.js":(f,u,b)=>{function h(T){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},h(T)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=j(b("./src/util/index.js"));function O(T){if(typeof WeakMap!="function")return null;var E=new WeakMap,M=new WeakMap;return(O=function(s){return s?M:E})(T)}function j(T,E){if(!E&&T&&T.__esModule)return T;if(T===null||h(T)!=="object"&&typeof T!="function")return{default:T};var M=O(E);if(M&&M.has(T))return M.get(T);var k={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in T)if(l!=="default"&&Object.prototype.hasOwnProperty.call(T,l)){var y=s?Object.getOwnPropertyDescriptor(T,l):null;y&&(y.get||y.set)?Object.defineProperty(k,l,y):k[l]=T[l]}return k.default=T,M&&M.set(T,k),k}function P(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function q(T,E){for(var M=0;M<E.length;M++){var k=E[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,B(k.key),k)}}function R(T,E,M){return E&&q(T.prototype,E),M&&q(T,M),Object.defineProperty(T,"prototype",{writable:!1}),T}function B(T){var E=_(T,"string");return h(E)==="symbol"?E:String(E)}function _(T,E){if(h(T)!=="object"||T===null)return T;var M=T[Symbol.toPrimitive];if(M!==void 0){var k=M.call(T,E||"default");if(h(k)!=="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(T)}function V(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),E&&w(T,E)}function w(T,E){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,s){return k.__proto__=s,k},w(T,E)}function m(T){var E=x();return function(){var k=W(T),s;if(E){var l=W(this).constructor;s=Reflect.construct(k,arguments,l)}else s=k.apply(this,arguments);return v(this,s)}}function v(T,E){if(E&&(h(E)==="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(T)}function C(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W(T){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},W(T)}var D=function(T){V(M,T);var E=m(M);function M(k,s){var l;return P(this,M),l=E.call(this),l.container=S.withOrientation(k,s.vertical),l.params=s,l.width=0,l.height=s.height*l.params.pixelRatio,l.lastPos=0,l.wrapper=null,l}return R(M,[{key:"style",value:function(s,l){return S.style(s,l)}},{key:"createWrapper",value:function(){this.wrapper=S.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(s,l){!l&&s.preventDefault();var y=S.withOrientation(s.targetTouches?s.targetTouches[0]:s,this.params.vertical).clientX,a=this.wrapper.getBoundingClientRect(),r=this.width,g=this.getWidth(),d=this.getProgressPixels(a,y),i;return!this.params.fillParent&&r<g?i=d*(this.params.pixelRatio/r)||0:i=(d+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,S.clamp(i,0,1)}},{key:"getProgressPixels",value:function(s,l){return this.params.rtl?s.right-l:l-s.left}},{key:"setupWrapperEvents",value:function(){var s=this;this.wrapper.addEventListener("click",function(l){var y=S.withOrientation(l,s.params.vertical),a=s.wrapper.offsetHeight-s.wrapper.clientHeight;if(a!==0){var r=s.wrapper.getBoundingClientRect();if(y.clientY>=r.bottom-a)return}s.params.interact&&s.fireEvent("click",l,s.handleEvent(l))}),this.wrapper.addEventListener("dblclick",function(l){s.params.interact&&s.fireEvent("dblclick",l,s.handleEvent(l))}),this.wrapper.addEventListener("scroll",function(l){return s.fireEvent("scroll",l)})}},{key:"drawPeaks",value:function(s,l,y,a){this.setWidth(l)||this.clearWave(),this.params.barWidth?this.drawBars(s,0,y,a):this.drawWave(s,0,y,a)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(s){var l=this.wrapper.scrollWidth*s;this.recenterOnPosition(l,!0)}},{key:"recenterOnPosition",value:function(s,l){var y=this.wrapper.scrollLeft,a=~~(this.wrapper.clientWidth/2),r=this.wrapper.scrollWidth-this.wrapper.clientWidth,g=s-a,d=g-y;if(r!=0){if(!l&&-a<=d&&d<a){var i=this.params.autoCenterRate;i/=a,i*=r,d=Math.max(-i,Math.min(i,d)),g=y+d}g=Math.max(0,Math.min(r,g)),g!=y&&(this.wrapper.scrollLeft=g)}}},{key:"getScrollX",value:function(){var s=0;if(this.wrapper){var l=this.params.pixelRatio;if(s=Math.round(this.wrapper.scrollLeft*l),this.params.scrollParent){var y=~~(this.wrapper.scrollWidth*l-this.getWidth());s=Math.min(y,Math.max(0,s))}}return s}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(s){if(this.width==s)return!1;if(this.width=s,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var l=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:l})}return this.updateSize(),!0}},{key:"setHeight",value:function(s){return s==this.height?!1:(this.height=s,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(s){var l=1/this.params.pixelRatio,y=Math.round(s*this.width)*l;if(y<this.lastPos||y-this.lastPos>=l){if(this.lastPos=y,this.params.scrollParent&&this.params.autoCenter){var a=~~(this.wrapper.scrollWidth*s);this.recenterOnPosition(a,this.params.autoCenterImmediately)}this.updateProgress(y)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(s,l,y,a){}},{key:"drawWave",value:function(s,l,y,a){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(s){}}]),M}(S.Observer);u.default=D,f.exports=u.default},"./src/drawer.multicanvas.js":(f,u,b)=>{function h(k){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},h(k)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=R(b("./src/drawer.js")),O=q(b("./src/util/index.js")),j=R(b("./src/drawer.canvasentry.js"));function P(k){if(typeof WeakMap!="function")return null;var s=new WeakMap,l=new WeakMap;return(P=function(a){return a?l:s})(k)}function q(k,s){if(!s&&k&&k.__esModule)return k;if(k===null||h(k)!=="object"&&typeof k!="function")return{default:k};var l=P(s);if(l&&l.has(k))return l.get(k);var y={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in k)if(r!=="default"&&Object.prototype.hasOwnProperty.call(k,r)){var g=a?Object.getOwnPropertyDescriptor(k,r):null;g&&(g.get||g.set)?Object.defineProperty(y,r,g):y[r]=k[r]}return y.default=k,l&&l.set(k,y),y}function R(k){return k&&k.__esModule?k:{default:k}}function B(k,s){if(!(k instanceof s))throw new TypeError("Cannot call a class as a function")}function _(k,s){for(var l=0;l<s.length;l++){var y=s[l];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(k,w(y.key),y)}}function V(k,s,l){return s&&_(k.prototype,s),l&&_(k,l),Object.defineProperty(k,"prototype",{writable:!1}),k}function w(k){var s=m(k,"string");return h(s)==="symbol"?s:String(s)}function m(k,s){if(h(k)!=="object"||k===null)return k;var l=k[Symbol.toPrimitive];if(l!==void 0){var y=l.call(k,s||"default");if(h(y)!=="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(k)}function v(k,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(s&&s.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),s&&C(k,s)}function C(k,s){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,a){return y.__proto__=a,y},C(k,s)}function x(k){var s=T();return function(){var y=E(k),a;if(s){var r=E(this).constructor;a=Reflect.construct(y,arguments,r)}else a=y.apply(this,arguments);return W(this,a)}}function W(k,s){if(s&&(h(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(k)}function D(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(k){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},E(k)}var M=function(k){v(l,k);var s=x(l);function l(y,a){var r;return B(this,l),r=s.call(this,y,a),r.maxCanvasWidth=a.maxCanvasWidth,r.maxCanvasElementWidth=Math.round(a.maxCanvasWidth/a.pixelRatio),r.hasProgressCanvas=a.waveColor!=a.progressColor,r.halfPixel=.5/a.pixelRatio,r.canvases=[],r.progressWave=null,r.EntryClass=j.default,r.canvasContextAttributes=a.drawingContextAttributes,r.overlap=2*Math.ceil(a.pixelRatio/2),r.barRadius=a.barRadius||0,r.vertical=a.vertical,r}return V(l,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=O.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var a=this,r=Math.round(this.width/this.params.pixelRatio),g=Math.ceil(r/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<g;)this.addCanvas();for(;this.canvases.length>g;)this.removeCanvas();var d=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach(function(A,L){L==i&&(d=a.width-a.maxCanvasWidth*i),a.updateDimensions(A,d,a.height),A.clearWave()})}},{key:"addCanvas",value:function(){var a=new this.EntryClass;a.canvasContextAttributes=this.canvasContextAttributes,a.hasProgressCanvas=this.hasProgressCanvas,a.halfPixel=this.halfPixel;var r=this.maxCanvasElementWidth*this.canvases.length,g=O.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(g,{position:"absolute",zIndex:2,left:r+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),a.initWave(g),this.hasProgressCanvas){var d=O.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(d,{position:"absolute",left:r+"px",top:0,bottom:0,height:"100%"}),a.initProgress(d)}this.canvases.push(a)}},{key:"removeCanvas",value:function(){var a=this.canvases[this.canvases.length-1];a.wave.parentElement.removeChild(a.wave.domElement),this.hasProgressCanvas&&a.progress.parentElement.removeChild(a.progress.domElement),a&&(a.destroy(),a=null),this.canvases.pop()}},{key:"updateDimensions",value:function(a,r,g){var d=Math.round(r/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);a.updateDimensions(d,i,r,g),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var a=this;O.frame(function(){a.canvases.forEach(function(r){return r.clearWave()})})()}},{key:"drawBars",value:function(a,r,g,d){var i=this;return this.prepareDraw(a,r,g,d,function(A){var L=A.absmax,$=A.hasMinVals;A.height;var F=A.offsetY,K=A.halfH,G=A.peaks,Q=A.channelIndex;if(g!==void 0){var H=$?2:1,te=G.length/H,Y=i.params.barWidth*i.params.pixelRatio,se=i.params.barGap===null?Math.max(i.params.pixelRatio,~~(Y/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio),ie=Y+se,oe=te/i.width,Ve=g,Te=d,pe=Ve;for(pe;pe<Te;pe+=ie){var Me=0,Le=Math.floor(pe*oe)*H,je=Math.floor((pe+ie)*oe)*H;do{var Ie=Math.abs(G[Le]);Ie>Me&&(Me=Ie),Le+=H}while(Le<je);var ke=Math.round(Me/L*K);i.params.barMinHeight&&(ke=Math.max(ke,i.params.barMinHeight)),i.fillRect(pe+i.halfPixel,K-ke+F,Y+i.halfPixel,ke*2,i.barRadius,Q)}}})}},{key:"drawWave",value:function(a,r,g,d){var i=this;return this.prepareDraw(a,r,g,d,function(A){var L=A.absmax,$=A.hasMinVals;A.height;var F=A.offsetY,K=A.halfH,G=A.peaks,Q=A.channelIndex;if(!$){var H=[],te=G.length,Y=0;for(Y;Y<te;Y++)H[2*Y]=G[Y],H[2*Y+1]=-G[Y];G=H}g!==void 0&&i.drawLine(G,L,K,F,g,d,Q),i.fillRect(0,K+F-i.halfPixel,i.width,i.halfPixel,i.barRadius,Q)})}},{key:"drawLine",value:function(a,r,g,d,i,A,L){var $=this,F=this.params.splitChannelsOptions.channelColors[L]||{},K=F.waveColor,G=F.progressColor;this.canvases.forEach(function(Q,H){$.setFillStyles(Q,K,G),$.applyCanvasTransforms(Q,$.params.vertical),Q.drawLines(a,r,g,d,i,A)})}},{key:"fillRect",value:function(a,r,g,d,i,A){var L=Math.floor(a/this.maxCanvasWidth),$=Math.min(Math.ceil((a+g)/this.maxCanvasWidth)+1,this.canvases.length),F=L;for(F;F<$;F++){var K=this.canvases[F],G=F*this.maxCanvasWidth,Q={x1:Math.max(a,F*this.maxCanvasWidth),y1:r,x2:Math.min(a+g,F*this.maxCanvasWidth+K.wave.width),y2:r+d};if(Q.x1<Q.x2){var H=this.params.splitChannelsOptions.channelColors[A]||{},te=H.waveColor,Y=H.progressColor;this.setFillStyles(K,te,Y),this.applyCanvasTransforms(K,this.params.vertical),K.fillRects(Q.x1-G,Q.y1,Q.x2-Q.x1,Q.y2-Q.y1,i)}}}},{key:"hideChannel",value:function(a){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(a)}},{key:"prepareDraw",value:function(a,r,g,d,i,A,L){var $=this;return O.frame(function(){if(a[0]instanceof Array){var F=a;if($.params.splitChannels){var K=F.filter(function(ie,oe){return!$.hideChannel(oe)});$.params.splitChannelsOptions.overlay||$.setHeight(Math.max(K.length,1)*$.params.height*$.params.pixelRatio);var G;return $.params.splitChannelsOptions&&$.params.splitChannelsOptions.relativeNormalization&&(G=O.max(F.map(function(ie){return O.absMax(ie)}))),F.forEach(function(ie,oe){return $.prepareDraw(ie,oe,g,d,i,K.indexOf(ie),G)})}a=F[0]}if(!$.hideChannel(r)){var Q=1/$.params.barHeight;$.params.normalize&&(Q=L===void 0?O.absMax(a):L);var H=[].some.call(a,function(ie){return ie<0}),te=$.params.height*$.params.pixelRatio,Y=te/2,se=te*A||0;return $.params.splitChannelsOptions&&$.params.splitChannelsOptions.overlay&&(se=0),i({absmax:Q,hasMinVals:H,height:te,offsetY:se,halfH:Y,peaks:a,channelIndex:r})}})()}},{key:"setFillStyles",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;a.setFillStyles(r,g)}},{key:"applyCanvasTransforms",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.applyCanvasTransforms(r)}},{key:"getImage",value:function(a,r,g){if(g==="blob")return Promise.all(this.canvases.map(function(i){return i.getImage(a,r,g)}));if(g==="dataURL"){var d=this.canvases.map(function(i){return i.getImage(a,r,g)});return d.length>1?d:d[0]}}},{key:"updateProgress",value:function(a){this.style(this.progressWave,{width:a+"px"})}}]),l}(S.default);u.default=M,f.exports=u.default},"./src/mediaelement-webaudio.js":(f,u,b)=>{function h(E){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(E)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=O(b("./src/mediaelement.js"));function O(E){return E&&E.__esModule?E:{default:E}}function j(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}function P(E,M){for(var k=0;k<M.length;k++){var s=M[k];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(E,R(s.key),s)}}function q(E,M,k){return M&&P(E.prototype,M),k&&P(E,k),Object.defineProperty(E,"prototype",{writable:!1}),E}function R(E){var M=B(E,"string");return h(M)==="symbol"?M:String(M)}function B(E,M){if(h(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var s=k.call(E,M||"default");if(h(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(E)}function _(){return typeof Reflect!="undefined"&&Reflect.get?_=Reflect.get.bind():_=function(M,k,s){var l=V(M,k);if(!!l){var y=Object.getOwnPropertyDescriptor(l,k);return y.get?y.get.call(arguments.length<3?M:s):y.value}},_.apply(this,arguments)}function V(E,M){for(;!Object.prototype.hasOwnProperty.call(E,M)&&(E=D(E),E!==null););return E}function w(E,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(M&&M.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),M&&m(E,M)}function m(E,M){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,l){return s.__proto__=l,s},m(E,M)}function v(E){var M=W();return function(){var s=D(E),l;if(M){var y=D(this).constructor;l=Reflect.construct(s,arguments,y)}else l=s.apply(this,arguments);return C(this,l)}}function C(E,M){if(M&&(h(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(E)}function x(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function W(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(E){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},D(E)}var T=function(E){w(k,E);var M=v(k);function k(s){var l;return j(this,k),l=M.call(this,s),l.params=s,l.sourceMediaElement=null,l}return q(k,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(l,y,a){_(D(k.prototype),"_load",this).call(this,l,y,a),this.createMediaElementSource(l)}},{key:"createMediaElementSource",value:function(l){this.sourceMediaElement=this.ac.createMediaElementSource(l),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(l,y){return this.resumeAudioContext(),_(D(k.prototype),"play",this).call(this,l,y)}},{key:"destroy",value:function(){_(D(k.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),k}(S.default);u.default=T,f.exports=u.default},"./src/mediaelement.js":(f,u,b)=>{function h(s){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},h(s)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=q(b("./src/webaudio.js")),O=P(b("./src/util/index.js"));function j(s){if(typeof WeakMap!="function")return null;var l=new WeakMap,y=new WeakMap;return(j=function(r){return r?y:l})(s)}function P(s,l){if(!l&&s&&s.__esModule)return s;if(s===null||h(s)!=="object"&&typeof s!="function")return{default:s};var y=j(l);if(y&&y.has(s))return y.get(s);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in s)if(g!=="default"&&Object.prototype.hasOwnProperty.call(s,g)){var d=r?Object.getOwnPropertyDescriptor(s,g):null;d&&(d.get||d.set)?Object.defineProperty(a,g,d):a[g]=s[g]}return a.default=s,y&&y.set(s,a),a}function q(s){return s&&s.__esModule?s:{default:s}}function R(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function B(s,l){for(var y=0;y<l.length;y++){var a=l[y];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,V(a.key),a)}}function _(s,l,y){return l&&B(s.prototype,l),y&&B(s,y),Object.defineProperty(s,"prototype",{writable:!1}),s}function V(s){var l=w(s,"string");return h(l)==="symbol"?l:String(l)}function w(s,l){if(h(s)!=="object"||s===null)return s;var y=s[Symbol.toPrimitive];if(y!==void 0){var a=y.call(s,l||"default");if(h(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(s)}function m(){return typeof Reflect!="undefined"&&Reflect.get?m=Reflect.get.bind():m=function(l,y,a){var r=v(l,y);if(!!r){var g=Object.getOwnPropertyDescriptor(r,y);return g.get?g.get.call(arguments.length<3?l:a):g.value}},m.apply(this,arguments)}function v(s,l){for(;!Object.prototype.hasOwnProperty.call(s,l)&&(s=M(s),s!==null););return s}function C(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),l&&x(s,l)}function x(s,l){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},x(s,l)}function W(s){var l=E();return function(){var a=M(s),r;if(l){var g=M(this).constructor;r=Reflect.construct(a,arguments,g)}else r=a.apply(this,arguments);return D(this,r)}}function D(s,l){if(l&&(h(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(s)}function T(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function E(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(s){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},M(s)}var k=function(s){C(y,s);var l=W(y);function y(a){var r;return R(this,y),r=l.call(this,a),r.params=a,r.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},r.mediaType=a.mediaType.toLowerCase(),r.elementPosition=a.elementPosition,r.peaks=null,r.playbackRate=1,r.volume=1,r.isMuted=!1,r.buffer=null,r.onPlayEnd=null,r.mediaListeners={},r}return _(y,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var r=this;this.mediaListeners.error=function(){r.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){r.fireEvent("waiting")},this.mediaListeners.canplay=function(){r.fireEvent("canplay")},this.mediaListeners.ended=function(){r.fireEvent("finish")},this.mediaListeners.play=function(){r.fireEvent("play")},this.mediaListeners.pause=function(){r.fireEvent("pause")},this.mediaListeners.seeked=function(g){r.fireEvent("seek")},this.mediaListeners.volumechange=function(g){r.isMuted=r.media.muted,r.isMuted?r.volume=0:r.volume=r.media.volume,r.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(g){r.media.removeEventListener(g,r.mediaListeners[g]),r.media.addEventListener(g,r.mediaListeners[g])})}},{key:"createTimer",value:function(){var r=this,g=function d(){r.isPaused()||(r.fireEvent("audioprocess",r.getCurrentTime()),O.frame(d)())};this.on("play",g),this.on("pause",function(){r.fireEvent("audioprocess",r.getCurrentTime())})}},{key:"load",value:function(r,g,d,i){var A=document.createElement(this.mediaType);A.controls=this.params.mediaControls,A.autoplay=this.params.autoplay||!1,A.preload=i==null?"auto":i,A.src=r,A.style.width="100%";var L=g.querySelector(this.mediaType);L&&g.removeChild(L),g.appendChild(A),this._load(A,d,i)}},{key:"loadElt",value:function(r,g){r.controls=this.params.mediaControls,r.autoplay=this.params.autoplay||!1,this._load(r,g,r.preload)}},{key:"_load",value:function(r,g,d){if(!(r instanceof HTMLMediaElement)||typeof r.addEventListener=="undefined")throw new Error("media parameter is not a valid media element");typeof r.load=="function"&&!(g&&d=="none")&&r.load(),this.media=r,this._setupMediaListeners(),this.peaks=g,this.onPlayEnd=null,this.buffer=null,this.isMuted=r.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var r=(this.buffer||this.media).duration;return r>=1/0&&(r=this.media.seekable.end(0)),r}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(r){this.playbackRate=r||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(r){r!=null&&!isNaN(r)&&(this.media.currentTime=r),this.clearPlayEnd()}},{key:"play",value:function(r,g){this.seekTo(r);var d=this.media.play();return g&&this.setPlayEnd(g),d}},{key:"pause",value:function(){var r;return this.media&&(r=this.media.pause()),this.clearPlayEnd(),r}},{key:"setPlayEnd",value:function(r){var g=this;this.clearPlayEnd(),this._onPlayEnd=function(d){d>=r&&(g.pause(),g.seekTo(r))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(r,g,d){return this.buffer?m(M(y.prototype),"getPeaks",this).call(this,r,g,d):this.peaks||[]}},{key:"setSinkId",value:function(r){return r?this.media.setSinkId?this.media.setSinkId(r):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+r))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(r){this.volume=r,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(r){this.isMuted=this.media.muted=r}},{key:"destroy",value:function(){var r=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(g){r.media&&r.media.removeEventListener(g,r.mediaListeners[g])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),y}(S.default);u.default=k,f.exports=u.default},"./src/peakcache.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;function b(R){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},b(R)}function h(R,B){if(!(R instanceof B))throw new TypeError("Cannot call a class as a function")}function S(R,B){for(var _=0;_<B.length;_++){var V=B[_];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(R,j(V.key),V)}}function O(R,B,_){return B&&S(R.prototype,B),_&&S(R,_),Object.defineProperty(R,"prototype",{writable:!1}),R}function j(R){var B=P(R,"string");return b(B)==="symbol"?B:String(B)}function P(R,B){if(b(R)!=="object"||R===null)return R;var _=R[Symbol.toPrimitive];if(_!==void 0){var V=_.call(R,B||"default");if(b(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(R)}var q=function(){function R(){h(this,R),this.clearPeakCache()}return O(R,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(_,V,w){_!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=_);for(var m=[],v=0;v<this.peakCacheRanges.length&&this.peakCacheRanges[v]<V;)v++;for(v%2==0&&m.push(V);v<this.peakCacheRanges.length&&this.peakCacheRanges[v]<=w;)m.push(this.peakCacheRanges[v]),v++;v%2==0&&m.push(w),m=m.filter(function(x,W,D){return W==0?x!=D[W+1]:W==D.length-1?x!=D[W-1]:x!=D[W-1]&&x!=D[W+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(m),this.peakCacheRanges=this.peakCacheRanges.sort(function(x,W){return x-W}).filter(function(x,W,D){return W==0?x!=D[W+1]:W==D.length-1?x!=D[W-1]:x!=D[W-1]&&x!=D[W+1]});var C=[];for(v=0;v<m.length;v+=2)C.push([m[v],m[v+1]]);return C}},{key:"getCacheRanges",value:function(){var _=[],V;for(V=0;V<this.peakCacheRanges.length;V+=2)_.push([this.peakCacheRanges[V],this.peakCacheRanges[V+1]]);return _}}]),R}();u.default=q,f.exports=u.default},"./src/util/absMax.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=j;var h=O(b("./src/util/max.js")),S=O(b("./src/util/min.js"));function O(P){return P&&P.__esModule?P:{default:P}}function j(P){var q=(0,h.default)(P),R=(0,S.default)(P);return-R>q?-R:q}f.exports=u.default},"./src/util/clamp.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=b;function b(h,S,O){return Math.min(Math.max(S,h),O)}f.exports=u.default},"./src/util/fetch.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=V;var h=S(b("./src/util/observer.js"));function S(w){return w&&w.__esModule?w:{default:w}}function O(w){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},O(w)}function j(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function P(w,m){for(var v=0;v<m.length;v++){var C=m[v];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,R(C.key),C)}}function q(w,m,v){return m&&P(w.prototype,m),v&&P(w,v),Object.defineProperty(w,"prototype",{writable:!1}),w}function R(w){var m=B(w,"string");return O(m)==="symbol"?m:String(m)}function B(w,m){if(O(w)!=="object"||w===null)return w;var v=w[Symbol.toPrimitive];if(v!==void 0){var C=v.call(w,m||"default");if(O(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(w)}var _=function(){function w(m,v,C){j(this,w),this.instance=m,this.instance._reader=C.body.getReader(),this.total=parseInt(v,10),this.loaded=0}return q(w,[{key:"start",value:function(v){var C=this,x=function W(){C.instance._reader.read().then(function(D){var T=D.done,E=D.value;if(T){C.total===0&&C.instance.onProgress.call(C.instance,{loaded:C.loaded,total:C.total,lengthComputable:!1}),v.close();return}C.loaded+=E.byteLength,C.instance.onProgress.call(C.instance,{loaded:C.loaded,total:C.total,lengthComputable:C.total!==0}),v.enqueue(E),W()}).catch(function(D){v.error(D)})};x()}}]),w}();function V(w){if(w){if(!w.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var m=new h.default,v=new Headers,C=new Request(w.url);m.controller=new AbortController,w&&w.requestHeaders&&w.requestHeaders.forEach(function(D){v.append(D.key,D.value)});var x=w.responseType||"json",W={method:w.method||"GET",headers:v,mode:w.mode||"cors",credentials:w.credentials||"same-origin",cache:w.cache||"default",redirect:w.redirect||"follow",referrer:w.referrer||"client",signal:m.controller.signal};return fetch(C,W).then(function(D){m.response=D;var T=!0;D.body||(T=!1);var E=D.headers.get("content-length");return E===null&&(T=!1),T?(m.onProgress=function(M){m.fireEvent("progress",M)},new Response(new ReadableStream(new _(m,E,D)),W)):D}).then(function(D){var T;if(D.ok)switch(x){case"arraybuffer":return D.arrayBuffer();case"json":return D.json();case"blob":return D.blob();case"text":return D.text();default:T="Unknown responseType: "+x;break}throw T||(T="HTTP error status: "+D.status),new Error(T)}).then(function(D){m.fireEvent("success",D)}).catch(function(D){m.fireEvent("error",D)}),m.fetchRequest=C,m}f.exports=u.default},"./src/util/frame.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=O;var h=S(b("./src/util/request-animation-frame.js"));function S(j){return j&&j.__esModule?j:{default:j}}function O(j){return function(){for(var P=arguments.length,q=new Array(P),R=0;R<P;R++)q[R]=arguments[R];return(0,h.default)(function(){return j.apply(void 0,q)})}}f.exports=u.default},"./src/util/get-id.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=b;function b(h){return h===void 0&&(h="wavesurfer_"),h+Math.random().toString(32).substring(2)}f.exports=u.default},"./src/util/index.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"Observer",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(u,"absMax",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(u,"clamp",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(u,"debounce",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(u,"fetchFile",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(u,"frame",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(u,"getId",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(u,"ignoreSilenceMode",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(u,"max",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(u,"min",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(u,"preventClick",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(u,"requestAnimationFrame",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(u,"style",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(u,"withOrientation",{enumerable:!0,get:function(){return v.default}});var h=x(b("./src/util/get-id.js")),S=x(b("./src/util/max.js")),O=x(b("./src/util/min.js")),j=x(b("./src/util/absMax.js")),P=x(b("./src/util/observer.js")),q=x(b("./src/util/style.js")),R=x(b("./src/util/request-animation-frame.js")),B=x(b("./src/util/frame.js")),_=x(b("./node_modules/debounce/index.js")),V=x(b("./src/util/prevent-click.js")),w=x(b("./src/util/fetch.js")),m=x(b("./src/util/clamp.js")),v=x(b("./src/util/orientation.js")),C=x(b("./src/util/silence-mode.js"));function x(W){return W&&W.__esModule?W:{default:W}}},"./src/util/max.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=b;function b(h){var S=-1/0;return Object.keys(h).forEach(function(O){h[O]>S&&(S=h[O])}),S}f.exports=u.default},"./src/util/min.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=b;function b(h){var S=Number(1/0);return Object.keys(h).forEach(function(O){h[O]<S&&(S=h[O])}),S}f.exports=u.default},"./src/util/observer.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;function b(R){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},b(R)}function h(R,B){if(!(R instanceof B))throw new TypeError("Cannot call a class as a function")}function S(R,B){for(var _=0;_<B.length;_++){var V=B[_];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(R,j(V.key),V)}}function O(R,B,_){return B&&S(R.prototype,B),_&&S(R,_),Object.defineProperty(R,"prototype",{writable:!1}),R}function j(R){var B=P(R,"string");return b(B)==="symbol"?B:String(B)}function P(R,B){if(b(R)!=="object"||R===null)return R;var _=R[Symbol.toPrimitive];if(_!==void 0){var V=_.call(R,B||"default");if(b(V)!=="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(B==="string"?String:Number)(R)}var q=function(){function R(){h(this,R),this._disabledEventEmissions=[],this.handlers=null}return O(R,[{key:"on",value:function(_,V){var w=this;this.handlers||(this.handlers={});var m=this.handlers[_];return m||(m=this.handlers[_]=[]),m.push(V),{name:_,callback:V,un:function(C,x){return w.un(C,x)}}}},{key:"un",value:function(_,V){if(!!this.handlers){var w=this.handlers[_],m;if(w)if(V)for(m=w.length-1;m>=0;m--)w[m]==V&&w.splice(m,1);else w.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(_,V){var w=this,m=function v(){for(var C=arguments.length,x=new Array(C),W=0;W<C;W++)x[W]=arguments[W];V.apply(w,x),setTimeout(function(){w.un(_,v)},0)};return this.on(_,m)}},{key:"setDisabledEventEmissions",value:function(_){this._disabledEventEmissions=_}},{key:"_isDisabledEventEmission",value:function(_){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(_)}},{key:"fireEvent",value:function(_){for(var V=arguments.length,w=new Array(V>1?V-1:0),m=1;m<V;m++)w[m-1]=arguments[m];if(!(!this.handlers||this._isDisabledEventEmission(_))){var v=this.handlers[_];v&&v.forEach(function(C){C.apply(void 0,w)})}}}]),R}();u.default=q,f.exports=u.default},"./src/util/orientation.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=O;var b={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function h(j,P){return Object.prototype.hasOwnProperty.call(b,j)&&P?b[j]:j}var S=Symbol("isProxy");function O(j,P){return j[S]?j:new Proxy(j,{get:function(R,B,_){if(B===S)return!0;if(B==="domElement")return R;if(B==="style")return O(R.style,P);if(B==="canvas")return O(R.canvas,P);if(B==="getBoundingClientRect")return function(){return O(R.getBoundingClientRect.apply(R,arguments),P)};if(B==="getContext")return function(){return O(R.getContext.apply(R,arguments),P)};var V=R[h(B,P)];return typeof V=="function"?V.bind(R):V},set:function(R,B,_){return R[h(B,P)]=_,!0}})}f.exports=u.default},"./src/util/prevent-click.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=h;function b(S){S.stopPropagation(),document.body.removeEventListener("click",b,!0)}function h(S){document.body.addEventListener("click",b,!0)}f.exports=u.default},"./src/util/request-animation-frame.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var b=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h,S){return setTimeout(h,1e3/60)}).bind(window);u.default=b,f.exports=u.default},"./src/util/silence-mode.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=b;function b(){var h=new AudioContext,S=h.createBufferSource();S.buffer=h.createBuffer(1,1,44100),S.connect(h.destination),S.start();var O="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",j=document.createElement("div");j.innerHTML='<audio x-webkit-airplay="deny"></audio>';var P=j.children.item(0);P.src=O,P.preload="auto",P.type="audio/mpeg",P.disableRemotePlayback=!0,P.play(),P.remove(),j.remove()}f.exports=u.default},"./src/util/style.js":(f,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=b;function b(h,S){return Object.keys(S).forEach(function(O){h.style[O]!==S[O]&&(h.style[O]=S[O])}),h}f.exports=u.default},"./src/wavesurfer.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=_(b("./src/util/index.js")),S=R(b("./src/drawer.multicanvas.js")),O=R(b("./src/webaudio.js")),j=R(b("./src/mediaelement.js")),P=R(b("./src/peakcache.js")),q=R(b("./src/mediaelement-webaudio.js"));function R(a){return a&&a.__esModule?a:{default:a}}function B(a){if(typeof WeakMap!="function")return null;var r=new WeakMap,g=new WeakMap;return(B=function(i){return i?g:r})(a)}function _(a,r){if(!r&&a&&a.__esModule)return a;if(a===null||T(a)!=="object"&&typeof a!="function")return{default:a};var g=B(r);if(g&&g.has(a))return g.get(a);var d={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in a)if(A!=="default"&&Object.prototype.hasOwnProperty.call(a,A)){var L=i?Object.getOwnPropertyDescriptor(a,A):null;L&&(L.get||L.set)?Object.defineProperty(d,A,L):d[A]=a[A]}return d.default=a,g&&g.set(a,d),d}function V(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),r&&w(a,r)}function w(a,r){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,i){return d.__proto__=i,d},w(a,r)}function m(a){var r=x();return function(){var d=W(a),i;if(r){var A=W(this).constructor;i=Reflect.construct(d,arguments,A)}else i=d.apply(this,arguments);return v(this,i)}}function v(a,r){if(r&&(T(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(a)}function C(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W(a){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},W(a)}function D(a,r,g){return r=s(r),r in a?Object.defineProperty(a,r,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[r]=g,a}function T(a){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},T(a)}function E(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function M(a,r){for(var g=0;g<r.length;g++){var d=r[g];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,s(d.key),d)}}function k(a,r,g){return r&&M(a.prototype,r),g&&M(a,g),Object.defineProperty(a,"prototype",{writable:!1}),a}function s(a){var r=l(a,"string");return T(r)==="symbol"?r:String(r)}function l(a,r){if(T(a)!=="object"||a===null)return a;var g=a[Symbol.toPrimitive];if(g!==void 0){var d=g.call(a,r||"default");if(T(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}var y=function(a){V(g,a);var r=m(g);function g(d){var i;if(E(this,g),i=r.call(this),D(C(i),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:S.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),D(C(i),"backends",{MediaElement:j.default,WebAudio:O.default,MediaElementWebAudio:q.default}),D(C(i),"util",h),i.params=Object.assign({},i.defaultParams,d),i.params.splitChannelsOptions=Object.assign({},i.defaultParams.splitChannelsOptions,d.splitChannelsOptions),i.container=typeof d.container=="string"?document.querySelector(i.params.container):i.params.container,!i.container)throw new Error("Container element not found");if(i.params.mediaContainer==null?i.mediaContainer=i.container:typeof i.params.mediaContainer=="string"?i.mediaContainer=document.querySelector(i.params.mediaContainer):i.mediaContainer=i.params.mediaContainer,!i.mediaContainer)throw new Error("Media Container element not found");if(i.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(i.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(i.params.rtl===!0&&(i.params.vertical===!0?h.style(i.container,{transform:"rotateX(180deg)"}):h.style(i.container,{transform:"rotateY(180deg)"})),i.params.backgroundColor&&i.setBackgroundColor(i.params.backgroundColor),i.savedVolume=0,i.isMuted=!1,i.tmpEvents=[],i.currentRequest=null,i.arraybuffer=null,i.drawer=null,i.backend=null,i.peakCache=null,typeof i.params.renderer!="function")throw new Error("Renderer parameter is invalid");i.Drawer=i.params.renderer,i.params.backend=="AudioElement"&&(i.params.backend="MediaElement"),(i.params.backend=="WebAudio"||i.params.backend==="MediaElementWebAudio")&&!O.default.prototype.supportsWebAudio.call(null)&&(i.params.backend="MediaElement"),i.Backend=i.backends[i.params.backend],i.initialisedPluginList={},i.isDestroyed=!1,i.isReady=!1;var A=0;return i._onResize=h.debounce(function(){i.drawer.wrapper&&A!=i.drawer.wrapper.clientWidth&&!i.params.scrollParent&&(A=i.drawer.wrapper.clientWidth,A&&i.drawer.fireEvent("redraw"))},typeof i.params.responsive=="number"?i.params.responsive:100),v(i,C(i))}return k(g,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(i){var A=this;return i.forEach(function(L){return A.addPlugin(L)}),i.forEach(function(L){L.deferInit||A.initPlugin(L.name)}),this.fireEvent("plugins-registered",i),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(i){var A=this;if(!i.name)throw new Error("Plugin does not have a name!");if(!i.instance)throw new Error("Plugin ".concat(i.name," does not have an instance property!"));i.staticProps&&Object.keys(i.staticProps).forEach(function(F){A[F]=i.staticProps[F]});var L=i.instance,$=Object.getOwnPropertyNames(h.Observer.prototype);return $.forEach(function(F){L.prototype[F]=h.Observer.prototype[F]}),this[i.name]=new L(i.params||{},this),this.fireEvent("plugin-added",i.name),this}},{key:"initPlugin",value:function(i){if(!this[i])throw new Error("Plugin ".concat(i," has not been added yet!"));return this.initialisedPluginList[i]&&this.destroyPlugin(i),this[i].init(),this.initialisedPluginList[i]=!0,this.fireEvent("plugin-initialised",i),this}},{key:"destroyPlugin",value:function(i){if(!this[i])throw new Error("Plugin ".concat(i," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[i])throw new Error("Plugin ".concat(i," is not active and cannot be destroyed!"));if(typeof this[i].destroy!="function")throw new Error("Plugin ".concat(i," does not have a destroy function!"));return this[i].destroy(),delete this.initialisedPluginList[i],this.fireEvent("plugin-destroyed",i),this}},{key:"destroyAllPlugins",value:function(){var i=this;Object.keys(this.initialisedPluginList).forEach(function(A){return i.destroyPlugin(A)})}},{key:"createDrawer",value:function(){var i=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){i.drawBuffer(),i.drawer.progress(i.backend.getPlayedPercents())}),this.drawer.on("click",function(A,L){setTimeout(function(){return i.seekTo(L)},0)}),this.drawer.on("scroll",function(A){i.params.partialRender&&i.drawBuffer(),i.fireEvent("scroll",A)})}},{key:"createBackend",value:function(){var i=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){i.drawer.progress(i.backend.getPlayedPercents()),i.fireEvent("finish")}),this.backend.on("play",function(){return i.fireEvent("play")}),this.backend.on("pause",function(){return i.fireEvent("pause")}),this.backend.on("audioprocess",function(A){i.drawer.progress(i.backend.getPlayedPercents()),i.fireEvent("audioprocess",A)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){i.drawer.progress(i.backend.getPlayedPercents())}),this.backend.on("volume",function(){var A=i.getVolume();i.fireEvent("volume",A),i.backend.isMuted!==i.isMuted&&(i.isMuted=i.backend.isMuted,i.fireEvent("mute",i.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new P.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(i){i>=this.getDuration()?this.seekTo(1):this.seekTo(i/this.getDuration())}},{key:"play",value:function(i,A){var L=this;return this.params.ignoreSilenceMode&&h.ignoreSilenceMode(),this.fireEvent("interaction",function(){return L.play(i,A)}),this.backend.play(i,A)}},{key:"setPlayEnd",value:function(i){this.backend.setPlayEnd(i)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(i){this.skip(-i||-this.params.skipLength)}},{key:"skipForward",value:function(i){this.skip(i||this.params.skipLength)}},{key:"skip",value:function(i){var A=this.getDuration()||1,L=this.getCurrentTime()||0;L=Math.max(0,Math.min(A,L+(i||0))),this.seekAndCenter(L/A)}},{key:"seekAndCenter",value:function(i){this.seekTo(i),this.drawer.recenter(i)}},{key:"seekTo",value:function(i){var A=this;if(typeof i!="number"||!isFinite(i)||i<0||i>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return A.seekTo(i)});var L=this.params.backend==="WebAudio",$=this.backend.isPaused();L&&!$&&this.backend.pause();var F=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(i*this.getDuration()),this.drawer.progress(i),L&&!$&&this.backend.play(),this.params.scrollParent=F,this.fireEvent("seek",i)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(i){return this.backend.setSinkId(i)}},{key:"setVolume",value:function(i){if(this.isMuted===!0){this.savedVolume=i;return}this.backend.setVolume(i),this.fireEvent("volume",i)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(i){this.backend.setPlaybackRate(i)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(i){if(i===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(i),this.isMuted=i):i?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[i]?this.params.splitChannelsOptions.channelColors[i].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(i){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[A]?this.params.splitChannelsOptions.channelColors[A].waveColor=i:this.params.waveColor=i,this.drawBuffer()}},{key:"getProgressColor",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[i]?this.params.splitChannelsOptions.channelColors[i].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(i,A){this.params.splitChannelsOptions.channelColors[A]?this.params.splitChannelsOptions.channelColors[A].progressColor=i:this.params.progressColor=i,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(i){this.params.backgroundColor=i,h.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(i){this.params.cursorColor=i,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(i){this.params.height=i,this.drawer.setHeight(i*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(i){this.params.splitChannelsOptions.filterChannels=i,this.drawBuffer()}},{key:"drawBuffer",value:function(){var i=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),A=this.drawer.getWidth(),L=i,$=0,F=Math.max($+A,L);this.params.fillParent&&(!this.params.scrollParent||i<A)&&(L=A,$=0,F=L);var K;if(this.params.partialRender){var G=this.peakCache.addRangeToPeakCache(L,$,F),Q;for(Q=0;Q<G.length;Q++)K=this.backend.getPeaks(L,G[Q][0],G[Q][1]),this.drawer.drawPeaks(K,L,G[Q][0],G[Q][1])}else K=this.backend.getPeaks(L,$,F),this.drawer.drawPeaks(K,L,$,F);this.fireEvent("redraw",K,L)}},{key:"zoom",value:function(i){i?(this.params.minPxPerSec=i,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",i)}},{key:"loadArrayBuffer",value:function(i){var A=this;this.decodeArrayBuffer(i,function(L){A.isDestroyed||A.loadDecodedBuffer(L)})}},{key:"loadDecodedBuffer",value:function(i){this.backend.load(i),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(i){var A=this,L=new FileReader;L.addEventListener("progress",function($){return A.onProgress($)}),L.addEventListener("load",function($){return A.loadArrayBuffer($.target.result)}),L.addEventListener("error",function(){return A.fireEvent("error","Error reading file")}),L.readAsArrayBuffer(i),this.empty()}},{key:"load",value:function(i,A,L,$){if(!i)throw new Error("url parameter cannot be empty");if(this.empty(),L){var F={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(L)===-1,"Peaks are not provided":!A,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof i!="string"},K=Object.keys(F).filter(function(G){return F[G]});K.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+K.join(`
	- `)),L=null)}switch(this.params.backend==="WebAudio"&&i instanceof HTMLMediaElement&&(i=i.src),this.params.backend){case"WebAudio":return this.loadBuffer(i,A,$);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(i,A,L,$)}}},{key:"loadBuffer",value:function(i,A,L){var $=this,F=function(G){return G&&$.tmpEvents.push($.once("ready",G)),$.getArrayBuffer(i,function(Q){return $.loadArrayBuffer(Q)})};if(A)this.backend.setPeaks(A,L),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",F));else return F()}},{key:"loadMediaElement",value:function(i,A,L,$){var F=this,K=i;if(typeof i=="string")this.backend.load(K,this.mediaContainer,A,L);else{var G=i;this.backend.loadElt(G,A),K=G.src}this.tmpEvents.push(this.backend.once("canplay",function(){F.backend.destroyed||(F.drawBuffer(),F.isReady=!0,F.fireEvent("ready"))}),this.backend.once("error",function(Q){return F.fireEvent("error",Q)})),A&&(this.backend.setPeaks(A,$),this.drawBuffer(),this.fireEvent("waveform-ready")),(!A||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(K,function(Q){F.decodeArrayBuffer(Q,function(H){F.backend.buffer=H,F.backend.setPeaks(null),F.drawBuffer(),F.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(i,A){var L=this;this.isDestroyed||(this.arraybuffer=i,this.backend.decodeArrayBuffer(i,function($){!L.isDestroyed&&L.arraybuffer==i&&(A($),L.arraybuffer=null)},function(){return L.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(i,A){var L=this,$=Object.assign({url:i,responseType:"arraybuffer"},this.params.xhr),F=h.fetchFile($);return this.currentRequest=F,this.tmpEvents.push(F.on("progress",function(K){L.onProgress(K)}),F.on("success",function(K){A(K),L.currentRequest=null}),F.on("error",function(K){L.fireEvent("error",K),L.currentRequest=null})),F}},{key:"onProgress",value:function(i){var A;i.lengthComputable?A=i.loaded/i.total:A=i.loaded/(i.loaded+1e6),this.fireEvent("loading",Math.round(A*100),i.target)}},{key:"exportPCM",value:function(i,A,L,$,F){i=i||1024,$=$||0,A=A||1e4,L=L||!1;var K=this.backend.getPeaks(i,$,F),G=[].map.call(K,function(Q){return Math.round(Q*A)/A});return new Promise(function(Q,H){if(!L){var te=new Blob([JSON.stringify(G)],{type:"application/json;charset=utf-8"}),Y=URL.createObjectURL(te);window.open(Y),URL.revokeObjectURL(Y)}Q(G)})}},{key:"exportImage",value:function(i,A,L){return i||(i="image/png"),A||(A=1),L||(L="dataURL"),this.drawer.getImage(i,A,L)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(i){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(i){return i.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(i){var A=new g(i);return A.init()}}]),g}(h.Observer);u.default=y,D(y,"VERSION","6.5.2"),D(y,"util",h),f.exports=u.default},"./src/webaudio.js":(f,u,b)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=O(b("./src/util/index.js"));function S(s){if(typeof WeakMap!="function")return null;var l=new WeakMap,y=new WeakMap;return(S=function(r){return r?y:l})(s)}function O(s,l){if(!l&&s&&s.__esModule)return s;if(s===null||j(s)!=="object"&&typeof s!="function")return{default:s};var y=S(l);if(y&&y.has(s))return y.get(s);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in s)if(g!=="default"&&Object.prototype.hasOwnProperty.call(s,g)){var d=r?Object.getOwnPropertyDescriptor(s,g):null;d&&(d.get||d.set)?Object.defineProperty(a,g,d):a[g]=s[g]}return a.default=s,y&&y.set(s,a),a}function j(s){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},j(s)}function P(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function q(s,l){for(var y=0;y<l.length;y++){var a=l[y];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,W(a.key),a)}}function R(s,l,y){return l&&q(s.prototype,l),y&&q(s,y),Object.defineProperty(s,"prototype",{writable:!1}),s}function B(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),l&&_(s,l)}function _(s,l){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},_(s,l)}function V(s){var l=v();return function(){var a=C(s),r;if(l){var g=C(this).constructor;r=Reflect.construct(a,arguments,g)}else r=a.apply(this,arguments);return w(this,r)}}function w(s,l){if(l&&(j(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(s)}function m(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function v(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(s){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},C(s)}function x(s,l,y){return l=W(l),l in s?Object.defineProperty(s,l,{value:y,enumerable:!0,configurable:!0,writable:!0}):s[l]=y,s}function W(s){var l=D(s,"string");return j(l)==="symbol"?l:String(l)}function D(s,l){if(j(s)!=="object"||s===null)return s;var y=s[Symbol.toPrimitive];if(y!==void 0){var a=y.call(s,l||"default");if(j(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(s)}var T="playing",E="paused",M="finished",k=function(s){B(y,s);var l=V(y);function y(a){var r,g,d;return P(this,y),d=l.call(this),x(m(d),"audioContext",null),x(m(d),"offlineAudioContext",null),x(m(d),"stateBehaviors",(r={},x(r,T,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var A=this.getDuration();return this.getCurrentTime()/A||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),x(r,E,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var A=this.getDuration();return this.getCurrentTime()/A||0},getCurrentTime:function(){return this.startPosition}}),x(r,M,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),r)),d.params=a,d.ac=a.audioContext||(d.supportsWebAudio()?d.getAudioContext():{}),d.lastPlay=d.ac.currentTime,d.startPosition=0,d.scheduledPause=null,d.states=(g={},x(g,T,Object.create(d.stateBehaviors[T])),x(g,E,Object.create(d.stateBehaviors[E])),x(g,M,Object.create(d.stateBehaviors[M])),g),d.buffer=null,d.filters=[],d.gainNode=null,d.mergedPeaks=null,d.offlineAc=null,d.peaks=null,d.playbackRate=1,d.analyser=null,d.scriptNode=null,d.source=null,d.splitPeaks=[],d.state=null,d.explicitDuration=a.duration,d.sinkStreamDestination=null,d.sinkAudioElement=null,d.destroyed=!1,d}return R(y,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(r){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,r)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(E),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(r){r&&r.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(r){this.state!==this.states[r]&&(this.state=this.states[r],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var r=arguments.length,g=new Array(r),d=0;d<r;d++)g[d]=arguments[d];this.setFilters(g)}},{key:"setFilters",value:function(r){this.disconnectFilters(),r&&r.length&&(this.filters=r,this.analyser.disconnect(),r.reduce(function(g,d){return g.connect(d),d},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(y.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(y.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var r=this;this.scriptNode.onaudioprocess=function(){var g=r.getCurrentTime();g>=r.getDuration()?(r.setState(M),r.fireEvent("pause")):g>=r.scheduledPause?r.pause():r.state===r.states[T]&&r.fireEvent("audioprocess",g)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(r){return r?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(r)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+r))}},{key:"setVolume",value:function(r){this.gainNode.gain.setValueAtTime(r,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(r,g,d){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(r,function(i){return g(i)},d):this.offlineAc.decodeAudioData(r).then(function(i){return g(i)}).catch(function(i){return d(i)})}},{key:"setPeaks",value:function(r,g){g!=null&&(this.explicitDuration=g),this.peaks=r}},{key:"setLength",value:function(r){if(!(this.mergedPeaks&&r==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var g=this.buffer?this.buffer.numberOfChannels:1,d;for(d=0;d<g;d++)this.splitPeaks[d]=[],this.splitPeaks[d][2*(r-1)]=0,this.splitPeaks[d][2*(r-1)+1]=0;this.mergedPeaks[2*(r-1)]=0,this.mergedPeaks[2*(r-1)+1]=0}}},{key:"getPeaks",value:function(r,g,d){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(g=g||0,d=d||r-1,this.setLength(r),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var i=this.createBuffer(1,4096,this.sampleRate);this.buffer=i.buffer}var A=this.buffer.length/r,L=~~(A/10)||1,$=this.buffer.numberOfChannels,F;for(F=0;F<$;F++){var K=this.splitPeaks[F],G=this.buffer.getChannelData(F),Q=void 0;for(Q=g;Q<=d;Q++){var H=~~(Q*A),te=~~(H+A),Y=G[H],se=Y,ie=void 0;for(ie=H;ie<te;ie+=L){var oe=G[ie];oe>se&&(se=oe),oe<Y&&(Y=oe)}K[2*Q]=se,K[2*Q+1]=Y,(F==0||se>this.mergedPeaks[2*Q])&&(this.mergedPeaks[2*Q]=se),(F==0||Y<this.mergedPeaks[2*Q+1])&&(this.mergedPeaks[2*Q+1]=Y)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(r){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=r,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[T]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(r,g){if(!!this.buffer)return this.scheduledPause=null,r==null&&(r=this.getCurrentTime(),r>=this.getDuration()&&(r=0)),g==null&&(g=this.getDuration()),this.startPosition=r,this.lastPlay=this.ac.currentTime,this.state===this.states[M]&&this.setState(E),{start:r,end:g}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(r,g){if(!!this.buffer){this.createSource();var d=this.seekTo(r,g);r=d.start,g=d.end,this.scheduledPause=g,this.source.start(0,r),this.resumeAudioContext(),this.setState(T),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(E),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(r){this.playbackRate=r||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(r){this.scheduledPause=r}}]),y}(h.Observer);u.default=k,x(k,"scriptBufferSize",256),f.exports=u.default},"./node_modules/debounce/index.js":f=>{function u(b,h,S){var O,j,P,q,R;h==null&&(h=100);function B(){var V=Date.now()-q;V<h&&V>=0?O=setTimeout(B,h-V):(O=null,S||(R=b.apply(P,j),P=j=null))}var _=function(){P=this,j=arguments,q=Date.now();var V=S&&!O;return O||(O=setTimeout(B,h)),V&&(R=b.apply(P,j),P=j=null),R};return _.clear=function(){O&&(clearTimeout(O),O=null)},_.flush=function(){O&&(R=b.apply(P,j),P=j=null,clearTimeout(O),O=null)},_}u.debounce=u,f.exports=u}},c={};function n(f){var u=c[f];if(u!==void 0)return u.exports;var b=c[f]={exports:{}};return o[f](b,b.exports,n),b.exports}var p=n("./src/wavesurfer.js");return p})())})(Zt);var en=Zi(Zt.exports);class Tt{constructor(t,o,c){var p;this.wavesurfer=c,this.wrapper=c.drawer.wrapper,this.util=c.util,this.style=this.util.style,this.regionsUtil=o,this.vertical=c.drawer.params.vertical,this.id=t.id==null?c.util.getId():t.id,this.start=Number(t.start)||0,this.end=t.end==null?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=t.resize===void 0?!0:Boolean(t.resize),this.drag=t.drag===void 0?!0:Boolean(t.drag),this.contentEditable=Boolean(t.contentEditable),this.removeButton=Boolean(t.removeButton),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(t.loop),this.color=t.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=t.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=t.data||{},this.attributes=t.attributes||{},this.showTooltip=(p=t.showTooltip)!=null?p:!0,this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=()=>this.updateRender(),this.scroll=t.scroll!==!1&&c.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.preventContextMenu=t.preventContextMenu===void 0?!1:Boolean(t.preventContextMenu);let n=t.channelIdx==null?-1:parseInt(t.channelIdx);this.channelIdx=n,this.regionHeight="100%",this.marginTop="0px",this.setHeight(),this.formatTimeCallback=t.formatTimeCallback,this.edgeScrollWidth=t.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}setHeight(){if(this.channelIdx!==-1){let t=this.wavesurfer.regions.channelCount;t>=0&&this.channelIdx<t&&(this.regionHeight=Math.floor(1/t*100)+"%",this.marginTop=this.wrapper.querySelector("canvas").getBoundingClientRect().height/t*this.channelIdx+"px")}}update(t,o){t.start!=null&&(this.start=Number(t.start)),t.end!=null&&(this.end=Number(t.end)),t.loop!=null&&(this.loop=Boolean(t.loop)),t.color!=null&&(this.color=t.color),t.handleStyle!=null&&(this.handleStyle=t.handleStyle),t.data!=null&&(this.data=t.data),t.resize!=null&&(this.resize=Boolean(t.resize),this.updateHandlesResize(this.resize)),t.drag!=null&&(this.drag=Boolean(t.drag)),t.maxLength!=null&&(this.maxLength=Number(t.maxLength)),t.minLength!=null&&(this.minLength=Number(t.minLength)),t.attributes!=null&&(this.attributes=t.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,o)}remove(){this.element&&(this.element.remove(),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}play(t){const o=t||this.start;this.wavesurfer.play(o,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}playLoop(t){this.loop=!0,this.play(t)}setLoop(t){this.loop=t}render(){this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id);for(const t in this.attributes)this.element.setAttribute("data-region-"+t,this.attributes[t]);if(this.setHeight(),this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.removeButton){const t=document.createElement("div");t.className="remove-region-button",t.textContent="\u2A2F",this.removeButtonEl=this.element.appendChild(t);const o={zIndex:4,position:"absolute",bottom:0,right:"4px",cursor:"pointer",fontSize:"20px",lineHeight:"21px",color:"grey"};this.style(this.removeButtonEl,o)}if(this.contentEditable){const t=document.createElement("div");t.className="region-content",t.contentEditable="true",t.innerText=this.data.text||"",this.contentEl=this.element.appendChild(t);const o={zIndex:4,padding:"2px 5px",cursor:"text"};this.style(this.contentEl,o)}if(this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.textLabelEl=this.util.withOrientation(this.element.appendChild(document.createElement("div")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.textLabelEl.className="region-label",this.textLabelEl.textContent=this.formatTimeCallback(this.start,this.end),this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";const t={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%"},o=this.handleStyle.left!=="none"?Object.assign({left:"0px"},t,this.handleStyle.left):null,c=this.handleStyle.right!=="none"?Object.assign({right:"0px"},t,this.handleStyle.right):null;o&&this.style(this.handleLeftEl,o),c&&this.style(this.handleRightEl,c)}this.updateRender(),this.bindEvents()}formatTime(t,o){return this.formatTimeCallback?this.formatTimeCallback(t,o):(t==o?[t]:[t,o]).map(c=>[Math.floor(c%3600/60),("00"+Math.floor(c%60)).slice(-2)].join(":")).join("-")}getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}updateRender(){const t=this.wavesurfer.getDuration(),o=this.getWidth();let c=this.start,n=this.end;if(c<0&&(c=0,n=n-c),n>t&&(n=t,c=t-(n-c)),this.minLength!=null&&(n=Math.max(c+this.minLength,n)),this.maxLength!=null&&(n=Math.min(c+this.maxLength,n)),this.element!=null){const p=Math.round(c/t*o),f=Math.round(n/t*o)-p;this.setHeight(),this.textLabelEl.textContent=this.formatTimeCallback(this.start,this.end),this.style(this.element,{height:this.regionHeight,top:this.marginTop,left:p+"px",width:f+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"});for(const u in this.attributes)this.element.setAttribute("data-region-"+u,this.attributes[u]);this.element.classList.toggle("looping",this.loop),this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}bindInOut(){this.firedIn=!1,this.firedOut=!1;const t=o=>{let c=Math.round(this.start*10)/10,n=Math.round(this.end*10)/10;o=Math.round(o*10)/10,!this.firedOut&&this.firedIn&&(c>o||n<=o)&&(this.firedOut=!0,this.firedIn=!1,this.fireEvent("out"),this.wavesurfer.fireEvent("region-out",this)),!this.firedIn&&c<=o&&n>o&&(this.firedIn=!0,this.firedOut=!1,this.fireEvent("in"),this.wavesurfer.fireEvent("region-in",this))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",()=>{this.wavesurfer.backend.un("audioprocess",t)}),this.on("out",()=>{if(this.loop){const o=this.wavesurfer.getCurrentTime();o>=this.start&&o<=this.end&&this.wavesurfer.play(this.start)}})}bindEvents(){const t=this.preventContextMenu;this.element.addEventListener("mouseenter",o=>{this.fireEvent("mouseenter",o),this.wavesurfer.fireEvent("region-mouseenter",this,o)}),this.element.addEventListener("mouseleave",o=>{this.fireEvent("mouseleave",o),this.wavesurfer.fireEvent("region-mouseleave",this,o)}),this.element.addEventListener("click",o=>{o.preventDefault(),this.fireEvent("click",o),this.wavesurfer.fireEvent("region-click",this,o)}),this.element.addEventListener("dblclick",o=>{o.stopPropagation(),o.preventDefault(),this.fireEvent("dblclick",o),this.wavesurfer.fireEvent("region-dblclick",this,o)}),this.element.addEventListener("contextmenu",o=>{t&&o.preventDefault(),this.fireEvent("contextmenu",o),this.wavesurfer.fireEvent("region-contextmenu",this,o)}),(this.drag||this.resize)&&this.bindDragEvents(),this.contentEditable&&(this.contentEl.addEventListener("blur",this.onContentBlur.bind(this)),this.contentEl.addEventListener("click",this.onContentClick.bind(this))),this.removeButton&&this.removeButtonEl.addEventListener("click",this.onRemove.bind(this))}bindDragEvents(){const t=this.wavesurfer.drawer.container,o=this.scrollSpeed;let c,n,p,f,u,b=!1,h,S,O,j;const P=_=>{let V=this.util.withOrientation(_,this.vertical);const w=this.wavesurfer.getDuration();if(!h||!p&&!u)return;const m=V.clientX;let v=0,C=0,x=0,W=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(_)*w);if(p)h===-1?(C=O*this.wavesurfer.params.minPxPerSec,v=m-S.left):(C=j*this.wavesurfer.params.minPxPerSec,v=S.right-m);else{let M=this.minLength;M||(M=0),u==="start"?(W>this.end-M&&(W=this.end-M,x=o*h),W<0&&(W=0)):u==="end"&&(W<this.start+M&&(W=this.start+M,x=o*h),W>w&&(W=w))}const D=this.wrapper.scrollLeft;if(h===-1){if(Math.round(D)===0||Math.round(D-C+v)<=0)return}else if(Math.round(D)===f||Math.round(D+C-v)>=f)return;let T=D-x+o*h;if(h===-1){const M=Math.max(0+C-v,T);this.wrapper.scrollLeft=T=M}else{const M=Math.min(f-C+v,T);this.wrapper.scrollLeft=T=M}const E=W-c;c=W,p?this.onDrag(E):this.onResize(E,u),window.requestAnimationFrame(()=>{P(_)})},q=_=>{const V=this.wavesurfer.getDuration();_.touches&&_.touches.length>1||(n=_.targetTouches?_.targetTouches[0].identifier:null,(this.drag||this.resize)&&_.stopPropagation(),c=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(_,!0)*V),O=c-this.start,j=this.end-c,f=this.wrapper.scrollWidth-this.wrapper.clientWidth,S=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.isResizing=!1,this.isDragging=!1,_.target.tagName.toLowerCase()==="handle"?(this.isResizing=!0,u=_.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(this.isDragging=!0,p=!0,u=!1))},R=_=>{_.touches&&_.touches.length>1||((p||u)&&(this.isDragging=!1,this.isResizing=!1,p=!1,h=null,u=!1),b&&(b=!1,this.util.preventClick(),this.fireEvent("update-end",_),this.wavesurfer.fireEvent("region-update-end",this,_)))},B=_=>{const V=this.wavesurfer.getDuration();let w=this.util.withOrientation(_,this.vertical),m=null;if(_.touches&&_.touches.length>1||_.targetTouches&&_.targetTouches[0].identifier!=n||!p&&!u)return;let v=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(_)*V);if(p){const C=this.wavesurfer.getDuration();v>C-j&&(v=C-j),v-O<0&&(v=O)}if(u){let C=this.minLength;C||(C=0),u==="start"?(v>this.end-C&&(v=this.end-C),v<0&&(v=0)):u==="end"&&(v<this.start+C&&(v=this.start+C,m=v-(this.end+(v-c))),v>V&&(v=V))}if(m||(m=v-c),c=v,this.drag&&p&&(b=b||!!m,this.onDrag(m)),this.resize&&u&&(b=b||!!m,this.onResize(m,u)),this.scroll&&t.clientWidth<this.wrapper.scrollWidth){let C=w.clientX;C<S.left+this.edgeScrollWidth?h=-1:C>S.right-this.edgeScrollWidth?h=1:h=null,h&&P(_)}};this.element.addEventListener("mousedown",q),this.element.addEventListener("touchstart",q),document.body.addEventListener("mousemove",B),document.body.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("mouseup",R),document.body.addEventListener("touchend",R),this.on("remove",()=>{document.removeEventListener("mouseup",R),document.body.removeEventListener("touchend",R),document.body.removeEventListener("mousemove",B),document.body.removeEventListener("touchmove",B)}),this.wavesurfer.on("destroy",()=>{document.removeEventListener("mouseup",R),document.body.removeEventListener("touchend",R)})}onDrag(t){const o=this.wavesurfer.getDuration();this.end+t>o&&(t=o-this.end),this.start+t<0&&(t=this.start*-1);let c=null;for(let p of Object.values(this.wavesurfer.regions.list))p.id!==this.id&&(this.channelIdx===p.channelIdx&&(t>0?p.start>=this.end&&(!c||c.start>p.start)&&(c=p):t<0&&p.end<=this.start&&(!c||c.end<p.end)&&(c=p)),p.element.classList.toggle("highlight-start",p.start===this.start||p.start==this.end),p.element.classList.toggle("highlight-end",p.end===this.end||p.end==this.start),p.fadeTimer&&clearTimeout(p.fadeTimer),p.fadeTimer=setTimeout(()=>{p.element.classList.remove("highlight-end"),p.element.classList.remove("highlight-start")},1e3));c!=null&&(t<0?this.start+t<=c.end&&(t=c.end-this.start):t>0&&this.end+t>=c.start&&(t=c.start-this.end));const n={direction:this._getDragDirection(t),action:"drag"};this.update({start:this.regionsUtil.getRegionSnapToGridValue(this.start+t),end:this.regionsUtil.getRegionSnapToGridValue(this.end+t)},n)}_getDragDirection(t){return t<0?"left":t>0?"right":null}onResize(t,o){const c=this.wavesurfer.getDuration(),n={action:"resize",direction:o==="start"?"left":"right"};if(o==="start"){t>0&&this.end-(this.start+t)<this.minLength&&(t=this.end-this.minLength-this.start),t<0&&this.end-(this.start+t)>this.maxLength&&(t=this.end-this.start-this.maxLength),t<0&&this.start+t<0&&(t=this.start*-1);let p=null;if(t<0){for(let f of Object.values(this.wavesurfer.regions.list))f.id!==this.id&&(f.channelIdx==this.channelIdx&&f.end<=this.start&&(!p||p.end<f.end)&&(p=f),f.element.classList.toggle("highlight-start",f.start===this.start),f.element.classList.toggle("highlight-end",f.end==this.start),f.fadeTimer&&clearTimeout(f.fadeTimer),f.fadeTimer=setTimeout(()=>{f.element.classList.remove("highlight-end"),f.element.classList.remove("highlight-start")},1e3));p!=null&&this.start+t<p.end&&(t=p.end-this.start)}this.update({start:this.regionsUtil.getRegionSnapToGridValue(Math.min(this.start+t,this.end)),end:this.regionsUtil.getRegionSnapToGridValue(Math.max(this.start+t,this.end))},n)}else{t<0&&this.end+t-this.start<this.minLength&&(t=this.start+this.minLength-this.end),t>0&&this.end+t-this.start>this.maxLength&&(t=this.maxLength-(this.end-this.start)),t>0&&this.end+t>c&&(t=c-this.end);let p=null;if(t>0){for(let f of Object.values(this.wavesurfer.regions.list))f.id!==this.id&&(f.channelIdx==this.channelIdx&&f.start>=this.end&&(!p||p.start>f.start)&&(p=f),f.element.classList.toggle("highlight-start",f.start===this.end),f.element.classList.toggle("highlight-end",f.end==this.end),f.fadeTimer&&clearTimeout(f.fadeTimer),f.fadeTimer=setTimeout(()=>{f.element.classList.remove("highlight-end"),f.element.classList.remove("highlight-start")},1e3));p!=null&&this.end+t>p.start&&(t=p.start-this.end)}this.update({start:this.regionsUtil.getRegionSnapToGridValue(Math.min(this.end+t,this.start)),end:this.regionsUtil.getRegionSnapToGridValue(Math.max(this.end+t,this.start))},n)}}onContentBlur(t){const{text:o}=this.data||{},c=t.target.innerText,n={...this.data,text:c},p={action:"contentEdited",oldText:o,text:c};this.update({data:n},p)}onContentClick(t){t.stopPropagation()}onRemove(t){t.stopPropagation(),this.remove()}updateHandlesResize(t){let o;t?o=this.vertical?"row-resize":"col-resize":o="auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:o}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:o})}}class ft{static create(t){return{name:"regions",deferInit:t&&t.deferInit?t.deferInit:!1,params:t,staticProps:{addRegion(o){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(o)},clearRegions(){this.regions&&this.regions.clear()},enableDragSelection(o){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(o)},disableDragSelection(){this.regions.disableDragSelection()}},instance:ft}}constructor(t,o){this.params=t,this.wavesurfer=o,this.channelCount=0,this.util={...o.util,getRegionSnapToGridValue:p=>this.getRegionSnapToGridValue(p,t)},this.maxRegions=t.maxRegions,this.regionsMinLength=t.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(p=>{Tt.prototype[p]=this.util.Observer.prototype[p]}),this.wavesurfer.Region=Tt;const n=.05;this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.orientation=this.wavesurfer.drawer.orientation,this.defaultEdgeScrollWidth=this.wrapper.clientWidth*n,this.params.regions&&this.params.regions.forEach(p=>{this.add(p)})},this.list={},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.vertical=this.wavesurfer.drawer.params.vertical,this.params.dragSelection&&this.enableDragSelection(this.params),Object.keys(this.list).forEach(p=>{this.list[p].updateRender()})}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}add(t){if(this.wouldExceedMaxRegions())return null;t={edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,contentEditable:this.params.contentEditable,removeButton:this.params.removeButton,...t},!t.formatTimeCallback&&this.params.formatTimeCallback&&(t={...t,formatTimeCallback:this.params.formatTimeCallback}),!t.minLength&&this.regionsMinLength&&(t={...t,minLength:this.regionsMinLength});const o=new this.wavesurfer.Region(t,this.util,this.wavesurfer);return this.list[o.id]=o,o.on("remove",()=>{delete this.list[o.id]}),o}clear(){Object.keys(this.list).forEach(t=>{this.list[t].remove()})}enableDragSelection(t){this.disableDragSelection();const o=t.slop||2,c=this.wavesurfer.drawer.container,n=t.scroll!==!1&&this.wavesurfer.params.scrollParent,p=t.scrollSpeed||1,f=t.scrollThreshold||10;let u,b=this.wavesurfer.getDuration(),h,S,O,j,P=0,q,R;const B=m=>{if(!O||!q)return;let v=this.wrapper.scrollLeft+p*q;this.wrapper.scrollLeft=v=Math.min(h,Math.max(0,v));const C=this.wavesurfer.drawer.handleEvent(m);O.update({start:Math.min(C*b,S*b),end:Math.max(C*b,S*b)}),v<h&&v>0&&window.requestAnimationFrame(()=>{B(m)})},_=m=>{if(!(m.touches&&m.touches.length>1)){if(b=this.wavesurfer.getDuration(),j=m.targetTouches?m.targetTouches[0].identifier:null,h=this.wrapper.scrollWidth-this.wrapper.clientWidth,R=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.wavesurfer.params.splitChannels&&this.wavesurfer.params.splitChannelsOptions.splitDragSelection){const v=(m.touches?m.touches[0].clientY:m.clientY)-R.top,C=this.channelCount,x=this.wrapper.clientHeight/C,W=Math.floor(v/x);t.channelIdx=W;const D=this.wavesurfer.params.splitChannelsOptions.channelColors[W];D&&D.dragColor&&(t.color=D.dragColor)}u=!0,S=this.wavesurfer.drawer.handleEvent(m,!0),O=null,q=null}};this.wrapper.addEventListener("mousedown",_),this.wrapper.addEventListener("touchstart",_),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchstart",_),this.wrapper.removeEventListener("mousedown",_)});const V=m=>{m.touches&&m.touches.length>1||(u=!1,P=0,q=null,O&&(this.util.preventClick(),O.fireEvent("update-end",m),this.wavesurfer.fireEvent("region-update-end",O,m)),O=null)};this.wrapper.addEventListener("mouseleave",V),this.wrapper.addEventListener("mouseup",V),this.wrapper.addEventListener("touchend",V),document.body.addEventListener("mouseup",V),document.body.addEventListener("touchend",V),this.on("disable-drag-selection",()=>{document.body.removeEventListener("mouseup",V),document.body.removeEventListener("touchend",V),this.wrapper.removeEventListener("touchend",V),this.wrapper.removeEventListener("mouseup",V),this.wrapper.removeEventListener("mouseleave",V)});const w=m=>{if(!u||++P<=o||m.touches&&m.touches.length>1||m.targetTouches&&m.targetTouches[0].identifier!=j||!O&&(O=this.add(t||{}),!O))return;const v=this.wavesurfer.drawer.handleEvent(m),C=this.wavesurfer.regions.util.getRegionSnapToGridValue(S*b),x=this.wavesurfer.regions.util.getRegionSnapToGridValue(v*b);O.update({start:Math.min(x,C),end:Math.max(x,C)});let W=this.util.withOrientation(m,this.vertical);if(n&&c.clientWidth<this.wrapper.scrollWidth){const D=W.clientX-R.left;D<=f?q=-1:D>=R.right-f?q=1:q=null,q&&B(m)}};this.wrapper.addEventListener("mousemove",w),this.wrapper.addEventListener("touchmove",w),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchmove",w),this.wrapper.removeEventListener("mousemove",w)}),this.wavesurfer.on("region-created",m=>{this.regionsMinLength&&(m.minLength=this.regionsMinLength)})}disableDragSelection(){this.fireEvent("disable-drag-selection")}getCurrentRegion(){const t=this.wavesurfer.getCurrentTime();let o=null;return Object.keys(this.list).forEach(c=>{const n=this.list[c];n.start<=t&&n.end>=t&&(!o||n.end-n.start<o.end-o.start)&&(o=n)}),o}getRegionSnapToGridValue(t,o){return o.snapToGridInterval?Math.round(t*100)/100:t}}const ot={audioDataUri:null,selectedRegion:null,audioLoaded:!1,seekPos:0,volume:.5,playing:!1,klippy_serial:"/home/pi/printer_data/comms/klippy.serial",mpg123_fifo:"/tmp/mpg123fifo",audio_file:"/tmp/song.mp3",bashscript:"",paneSize:200,trackId:0,zoomFactor:20},tn=Mi({name:"IndexPage",data(){return{...ot,tracks:[],palette:["rgba(255, 230, 230, 0.7)","rgba(255, 232, 204, 0.7)","rgba(255, 255, 204, 0.7)","rgba(230, 255, 230, 0.7)","rgba(230, 247, 255, 0.7)","rgba(230, 230, 255, 0.7)","rgba(230, 230, 230, 0.7)","rgba(255, 204, 204, 0.7)","rgba(255, 242, 204, 0.7)","rgba(230, 255, 204, 0.7)","rgba(204, 255, 255, 0.7)","rgba(230, 204, 255, 0.7)","rgba(230, 204, 255, 0.7)","rgba(255, 204, 242, 0.7)","rgba(255, 242, 230, 0.7)","rgba(204, 255, 242, 0.7)","rgba(255, 204, 230, 0.7)","rgba(242, 255, 204, 0.7)","rgba(204, 204, 255, 0.7)","rgba(255, 230, 204, 0.7)"]}},methods:{promptDownload(e,t){var o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",e),document.body.appendChild(o),o.click(),document.body.removeChild(o)},exportProject(){this.saveState();const e=this.$q.localStorage.getItem("_savedState"),t="data:application/json, "+encodeURIComponent(JSON.stringify(e));this.promptDownload("project.json",t)},saveState(){this.$q.localStorage.set("_savedState",{audioDataUri:this.audioDataUri,tracks:this.tracks,klippy_serial:this.klippy_serial,mpg123_fifo:this.mpg123_fifo,audio_file:this.audio_file,regions:Array.from(Object.values(this.ws.regions.list)).map(e=>({id:e.id,channelIdx:e.channelIdx,start:e.start,end:e.end}))})},loadState(){this.resetProject();let e=this.$q.localStorage.getItem("_savedState");this.audioDataUri=e.audioDataUri,this.klippy_serial=e.klippy_serial,this.mpg123_fifo=e.mpg123_fifo,this.audio_file=e.audio_file,this.tracks=e.tracks,this.trackId=this.tracks.length,this.ws.regions.channelCount=this.tracks.length;let t=()=>{if(this.audioDataUri){this.audioLoaded=!0;for(let o of Object.values(e.regions))this.ws.regions.add({channelIdx:o.channelIdx,id:o.id,start:o.start,end:o.end,color:this.tracks[o.channelIdx].color})}this.ws.un("ready",t),this.saveState()};this.audioDataUri&&(this.ws.on("ready",t),this.ws.load(this.audioDataUri))},changeTrackColor(e,t){e.color=t;for(let o of Object.values(this.ws.regions.list))o.channelIdx==e.id&&(o.color=e.color,o.updateRender());this.saveState()},deleteTrack(e){this.$q.dialog({title:"Delete Effect?",message:"Are you sure?",cancel:!0,persistent:!0}).onOk(()=>{for(let t of Array.from(Object.values(this.ws.regions.list)).filter(o=>o.channelIdx==e.id))t.remove(),this.selectedRegion.id==t.id&&(this.selectedRegion=null);this.tracks.splice(e.id,1),this.tracks.forEach((t,o)=>{t.id!=o&&(Array.from(Object.values(this.ws.regions.list)).forEach(c=>{c.channelIdx==t.id&&(c.channelIdx=o)}),t.id=o)}),this.ws.regions.channelCount-=1,this.redrawRegions(),this.trackId-=1,this.generateScript()})},deleteRegion(){this.selectedRegion.remove(),this.selectedRegion=null},newProject(){this.tracks.length>0?this.$q.dialog({title:"Create New Project?",message:"Your current work will be lost.",cancel:!0,persistent:!0}).onOk(()=>{this.resetProject()}):this.resetProject()},resetProject(){for(let e of Object.keys(ot))this[e]=ot[e];this.tracks=[],this.ws.clearRegions(),this.ws.setVolume(this.volume),this.ws.zoom(this.zoomFactor),this.ws.empty()},seekTo(e){this.ws.seekAndCenter(Math.min(1,parseFloat(e)/this.ws.getDuration()))},seekToStart(){this.ws.seekAndCenter(0)},seekToEnd(){this.ws.seekAndCenter(1)},playPause(){if(this.playing=!this.playing,!this.playing){console.log("clearing loops");for(let e of Object.values(this.ws.regions.list))e.setLoop(!1),e.updateRender()}this.ws.playPause()},setVolume(e){this.ws.setVolume(e)},renameTrack(e,t){e.target.blur(),t.label=e.target.textContent,this.generateScript()},copyToClipboard(){navigator.clipboard.writeText(this.bashscript)},uploadAudio(){document.getElementById("audioInput").click()},onAudioUploaded(e){this.audioLoaded=!0;const t=new FileReader;t.addEventListener("load",o=>{this.audioDataUri=o.target.result,console.log("saving");let c=()=>{this.saveState(),this.ws.un("ready",c)};this.ws.on("ready",c),this.ws.load(this.audioDataUri)}),t.readAsDataURL(e.target.files[0])},uploadCfg(){document.getElementById("cfgInput").click()},onCfgUploaded(e){let t=new FileReader;const o=e.target;t.addEventListener("load",c=>{let n=c.target.result.split(`
`);for(let p of n){let f=p.match(/^\[led_effect\s+([^\]]+)\]$/i);f!=null&&this.addTrack(f[1])}o.value=null}),t.readAsText(e.target.files[0])},generateScript(){this.bashscript=`echo "LP ${this.audio_file}" > ${this.mpg123_fifo}
sleep 1
echo "P" > ${this.mpg123_fifo}
`;let e=new Map;for(let c of Object.values(this.ws.regions.list))e.has(c.start)||e.set(c.start,[]),e.has(c.end)||e.set(c.end,[]),e.get(c.end).unshift({action:"end",region:this.tracks[c.channelIdx]}),e.get(c.start).push({action:"start",region:this.tracks[c.channelIdx]});let t=Array.from(e.keys());t.sort((c,n)=>c-n);let o=0;for(;t.length>0;){let c=t.shift(),n=Math.round((c-o)*100)/100;n!=0&&(this.bashscript+=`sleep ${n}
`);for(let p of e.get(c))this.bashscript+=`echo "SET_LED_EFFECT EFFECT=${p.region.label} ${p.action=="start"?"RESTART=1":"STOP=1"}" > ${this.klippy_serial}
`;o=c}this.saveState()},insertRegion(e){let t=this.ws.getCurrentTime();for(let o of Object.values(this.ws.regions.list))if(o.channelIdx==e.id&&o.start<=t&&o.end>=t)return;this.ws.regions.add({channelIdx:e.id,color:e.color,start:Math.round(this.ws.getCurrentTime()*100)/100,end:Math.round(this.ws.getCurrentTime()*100)/100+.5})},onResize(e){this.ws&&e.height!=this.ws.getHeight()&&this.ws.setHeight(e.height)},nextTrackId(){return this.trackId++},setZoom(e){this.zoomFactor=e,this.ws.zoom(e)},addTrack(e){let t=this.nextTrackId();this.tracks.push({id:t,label:e||`effect_${t}`,color:this.palette[t%this.palette.length]}),this.ws.regions.channelCount+=1,Object.values(this.ws.regions.list).forEach(o=>o.updateRender())},redrawRegions(){Object.keys(this.ws.regions.list).forEach(e=>{this.ws.regions.list[e].updateRender()})}},mounted(){this.ws=en.create({container:".waveform",scrollParent:!0,responsive:!0,waveColor:"#999",progressColor:"#999",plugins:[ft.create({regionsMinLength:.01,snapToGridInterval:.01,style:{},formatTimeCallback:(e,t)=>`${e}s-${t}s`})]}),this.ws.on("play",e=>{console.log("play"),this.playing=!0}),this.ws.on("pause",e=>{console.log("pause"),this.playing=!1}),this.ws.on("seek",e=>{this.seekPos=(Math.round(this.ws.getCurrentTime()*100)/100).toFixed(2)}),this.ws.on("audioprocess",e=>{this.seekPos=(Math.round(this.ws.getCurrentTime()*100)/100).toFixed(2)}),this.ws.on("region-updated",nt(this.generateScript,300)),this.ws.on("region-removed",nt(this.generateScript,300)),this.ws.on("region-created",nt(this.generateScript,300)),this.ws.on("region-created",e=>{this.selectedRegion&&this.selectedRegion.element.classList.remove("selected"),this.selectedRegion=e,e.element.classList.add("selected")}),this.ws.on("region-click",(e,t)=>{console.log(t);let o=!1;this.selectedRegion&&(o=this.selectedRegion.id==e.id,this.selectedRegion.element.classList.remove("selected")),this.selectedRegion=e,e.element.classList.add("selected"),o||(t.preventDefault(),t.stopPropagation())}),this.ws.on("region-dblclick",e=>{Object.keys(this.ws.regions.list).forEach(t=>{t!=e.id&&(this.ws.regions.list[t].setLoop(!1),this.ws.regions.list[t].updateRender())}),e.playLoop(),e.updateRender()}),this.loadState()},beforeUnmount(){}}),nn={class:"tracklist"},rn=ce("div",{class:"waveform"},null,-1),an={style:{width:"10vw"},class:"row q-mr-lg"},sn=ce("div",{class:"col-1"},null,-1),on=ce("div",{class:"col-1"},null,-1),ln={style:{width:"10vw"},class:"row"},un=ce("div",{class:"col-1"},null,-1),cn=ce("div",{class:"col-1"},null,-1),dn={class:"q-pa-md",style:{width:"50vw"}},fn=ce("div",{class:"text-h6"},"Script Settings",-1),hn=["value"];function vn(e,t,o,c,n,p){return Pe(),qe(Yi,{class:"flex column"},{default:U(()=>[z(Fe,{class:"bg-secondary text-white"},{default:U(()=>[z(de,{dense:"",flat:""},{default:U(()=>[le("Project "),z(De,{autoClose:""},{default:U(()=>[z(Ne,{dense:""},{default:U(()=>[z(ge,{clickable:"",onClick:e.newProject},{default:U(()=>[z(re,{side:""},{default:U(()=>[z(ue,{name:"add_chart"})]),_:1}),z(re,null,{default:U(()=>[z(Ae,null,{default:U(()=>[le("New Project...")]),_:1})]),_:1})]),_:1},8,["onClick"]),z(rt),z(ge,{clickable:"",onClick:e.uploadAudio},{default:U(()=>[ce("input",{type:"file",id:"audioInput",style:{display:"none"},onChange:t[0]||(t[0]=(...f)=>e.onAudioUploaded&&e.onAudioUploaded(...f))},null,32),z(re,{side:""},{default:U(()=>[z(ue,{name:"library_music"})]),_:1}),z(re,null,{default:U(()=>[z(Ae,null,{default:U(()=>[le("Load Audio...")]),_:1})]),_:1})]),_:1},8,["onClick"]),z(ge,{clickable:"",onClick:e.uploadCfg},{default:U(()=>[ce("input",{type:"file",id:"cfgInput",style:{display:"none"},onChange:t[1]||(t[1]=(...f)=>e.onCfgUploaded&&e.onCfgUploaded(...f))},null,32),z(re,{side:""},{default:U(()=>[z(ue,{name:"blur_on"})]),_:1}),z(re,null,{default:U(()=>[z(Ae,null,{default:U(()=>[le("Load Effects...")]),_:1})]),_:1})]),_:1},8,["onClick"]),z(rt),z(ge,{clickable:""},{default:U(()=>[z(re,{side:""},{default:U(()=>[z(ue,{name:"upload"})]),_:1}),z(re,null,{default:U(()=>[z(Ae,null,{default:U(()=>[le("Import Project...")]),_:1})]),_:1})]),_:1}),z(ge,{clickable:"",onClick:e.exportProject},{default:U(()=>[z(re,{side:""},{default:U(()=>[z(ue,{name:"download"})]),_:1}),z(re,null,{default:U(()=>[z(Ae,null,{default:U(()=>[le("Export Project...")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),z(de,{dense:"",flat:"",disable:!e.selectedRegion},{default:U(()=>[le("Region "),z(De,{autoClose:""},{default:U(()=>[z(Ne,{dense:""},{default:U(()=>[z(ge,{clickable:"",onClick:e.deleteRegion},{default:U(()=>[z(re,{side:""},{default:U(()=>[z(ue,{name:"delete"})]),_:1}),z(re,null,{default:U(()=>[z(Ae,null,{default:U(()=>[le("Delete Region")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["disable"])]),_:1}),z(Fi,{modelValue:e.paneSize,"onUpdate:modelValue":t[2]||(t[2]=f=>e.paneSize=f),unit:"px"},{before:U(()=>[ce("div",nn,[(Pe(!0),gt(bt,null,yt(e.tracks,f=>(Pe(),qe(Fe,{class:"track-title",key:f.id,style:wt(`background-color: ${f.color}`)},{default:U(()=>[z(Vi,{contenteditable:"true",onKeydown:Li(u=>e.renameTrack(u,f),["enter"])},{default:U(()=>[le(Di(f.label),1)]),_:2},1032,["onKeydown"]),z(de,{flat:"",round:"",dense:"",icon:"add",onClick:u=>e.insertRegion(f)},null,8,["onClick"]),z(de,{flat:"",round:"",dense:"",icon:"more_vert"},{default:U(()=>[z(De,null,{default:U(()=>[z(Ne,{dense:""},{default:U(()=>[Bi((Pe(),qe(ge,{clickable:"",onClick:()=>e.deleteTrack(f)},{default:U(()=>[z(re,{side:""},{default:U(()=>[z(ue,{name:"delete"})]),_:1}),z(re,null,{default:U(()=>[le("Delete Effect")]),_:1})]),_:2},1032,["onClick"])),[[Ji]]),z(ge,{clickable:""},{default:U(()=>[z(re,{side:""},{default:U(()=>[z(ue,{name:"palette"})]),_:1}),z(re,null,{default:U(()=>[le("Change Color")]),_:1}),z(re,{side:""},{default:U(()=>[z(ue,{name:"arrow_right"})]),_:1}),z(De,{"auto-close":"",anchor:"top end",self:"top start"},{default:U(()=>[z(Ne,null,{default:U(()=>[(Pe(!0),gt(bt,null,yt(e.palette,u=>(Pe(),qe(ge,{key:u,dense:"",clickable:"",style:wt(`background-color: ${u}`),onClick:b=>e.changeTrackColor(f,u)},null,8,["style","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128)),z(Wi,{onResize:e.onResize},null,8,["onResize"])])]),after:U(()=>[rn]),_:1},8,["modelValue"]),z(Fe,{class:"bg-secondary text-white"},{default:U(()=>[z(de,{flat:"",dense:"",onClick:t[3]||(t[3]=()=>e.addTrack()),icon:"add"},{default:U(()=>[le("Effect")]),_:1}),z(St),z(de,{disable:!e.audioLoaded,flat:"",dense:"",onClick:e.seekToStart,icon:"skip_previous"},null,8,["disable","onClick"]),z(de,{disable:!e.audioLoaded,flat:"",dense:"",onClick:e.playPause,icon:e.playing?"pause":"play_arrow"},null,8,["disable","onClick","icon"]),z(de,{disable:!e.audioLoaded,flat:"",dense:"",onClick:e.seekToEnd,icon:"skip_next"},null,8,["disable","onClick"]),z(St),z(ze,{disable:!e.audioLoaded,dense:"",rounded:"",standout:"","input-class":"text-white text-right","model-value":e.seekPos,"onUpdate:modelValue":e.seekTo,color:"secondary"},{append:U(()=>[z(ue,{name:"schedule",size:"xs",color:"white"})]),_:1},8,["disable","model-value","onUpdate:modelValue"]),ce("div",an,[z(ue,{size:"sm",name:"volume_down",class:"col-1"}),sn,z(Rt,{step:.01,class:"col-8",color:"white",min:0,max:1,modelValue:e.volume,"onUpdate:modelValue":e.setVolume},null,8,["step","modelValue","onUpdate:modelValue"]),on,z(ue,{size:"sm",name:"volume_up",class:"col-1"})]),ce("div",ln,[z(ue,{size:"sm",name:"zoom_out",class:"col-1"}),un,z(Rt,{disable:!e.audioLoaded,class:"col-8",color:"white",min:20,max:500,modelValue:e.zoomFactor,"onUpdate:modelValue":e.setZoom},null,8,["disable","modelValue","onUpdate:modelValue"]),cn,z(ue,{size:"sm",name:"zoom_in",class:"col-1"})])]),_:1}),z(rt),z(Fe,null,{default:U(()=>[z(de,{flat:"",dense:"",round:"",onClick:e.generateScript,icon:"refresh"},null,8,["onClick"]),z(de,{icon:"content_copy",flat:"",dense:"",onClick:e.copyToClipboard},{default:U(()=>[z(Ot,null,{default:U(()=>[le(" Copy script clipboard ")]),_:1})]),_:1},8,["onClick"]),z(de,{icon:"settings",flat:"",dense:""},{default:U(()=>[z(Ot,null,{default:U(()=>[le(" Script settings ")]),_:1}),z(De,null,{default:U(()=>[ce("div",dn,[fn,z(ze,{modelValue:e.klippy_serial,"onUpdate:modelValue":t[4]||(t[4]=f=>e.klippy_serial=f),label:"klippy.serial Path",onChange:e.generateScript},null,8,["modelValue","onChange"]),z(ze,{modelValue:e.mpg123_fifo,"onUpdate:modelValue":t[5]||(t[5]=f=>e.mpg123_fifo=f),label:"MPG123 Fifo",onChange:e.generateScript},null,8,["modelValue","onChange"]),z(ze,{modelValue:e.audio_file,"onUpdate:modelValue":t[6]||(t[6]=f=>e.audio_file=f),label:"Audio File Path",onChange:e.generateScript},null,8,["modelValue","onChange"])])]),_:1})]),_:1})]),_:1}),ce("textarea",{readonly:"",value:e.bashscript,style:{"font-family":"Courier","flex-grow":"1",width:"100%",resize:"none"}},`
    `,8,hn)]),_:1})}var gn=Ti(tn,[["render",vn]]);export{gn as default};
